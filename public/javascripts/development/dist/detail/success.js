/*! ishare_pc_website
*author:Jersey */
define("dist/detail/success",["../cmd-lib/myDialog","../application/method","../application/checkLogin","../application/api","../application/login","../cmd-lib/jqueryMd5","../application/iframe/iframe-parent","../application/iframe/messenger","../common/bilog","base64","../cmd-lib/util","../report/config","../cmd-lib/toast","../common/bindphone","../common/baidu-statistics","swiper","../application/effect","../common/recommendConfigInfo","../common/template/swiper_tmp.html","../common/coupon/couponIssue","../cmd-lib/loading","../common/coupon/template/couponCard.html"],function(a,b,c){function d(){p.getCookie("cuk")&&q.getLoginData(function(a){A=a,B.isVip=parseInt(a.isVip,10),w(a),j(a)}),p.getCookie("cuk")||A||q.notifyLoginInterface(function(a){A=a,B.isVip=parseInt(a.isVip,10),w(a),j(a)})}function e(a,b){var c=n();$.get(v.pay.bindUser,{visitorId:c,userId:a,nickName:b},function(a){$.toast({text:a.msg,callback:function(){location.reload()}})})}function f(){$(".previousContainer").hide(),$(".unloginStatus").show(),$(".carding-share").hide(),$(".down-carding-main").addClass("coupon-carding-item"),$(".carding-success-item").css("padding-bottom","60px"),$(".xbsd i").addClass("ico-data ico-"+u),setTimeout(function(){i()},200)}function g(){var a=p.getQueryString("url");a?p.compatibleIESkip(a,!1):C&&h()}function h(){var a=n();o&&(a=o);var b=p.getQueryString("fid");$.post("/pay/paperDown",{vuk:a,fid:b},function(a){0==a.code?location.href=a.data.dowUrl:41003==a.code?$.toast({text:a.msg}):$.toast({text:a.msg})})}function i(){function a(a){q.getLoginData(function(a){B.isVip=parseInt(a.isVip,10),A=a,e(a.userId,a.nickName)})}var b=window.pageConfig&&window.pageConfig.params?window.pageConfig.params:null,c=(b&&b.classid1?b.classid1+"":"",b&&b.classid2?"-"+b.classid2:"",b&&b.classid3?"-"+b.classid3:"",b?b.g_fileId||"":"",$("#tourist-login").html());$(".carding-info-bottom.unloginStatus .qrWrap").html(c),z("","",!1,!0,function(b){a(b)})}function j(a){if(a.mobile?$(".carding-info-bottom").hide():$(".carding-binding").show(),"1"==a.isVip){var b=p.compareTime(new Date,new Date(a.expireTime));5>=b?($(".down-succ-title").html("您的VIP将于"+a.expireTime+"到期").show(),$(".down-succ-btn[data-type=vip]").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").show()):a.privilege<=5?($(".down-succ-title").html("您的VIP下载特权仅剩"+a.privilege+"次！").show(),$(".down-succ-btn[data-type=privilege]").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").show()):($(".btn-carding-back").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").hide())}else $(".down-succ-btn[data-type=default]").show().css("display","block").siblings("a").hide(),$(".new-success-item .bottom-privilege").removeClass("hide")}function k(){var a=$(".more-nav"),b=$("#search-detail-input"),c=$(".detail-lately");a.on("mouseover",function(){var a=$(this);a.hasClass("hover")||$(this).addClass("hover")}),a.on("mouseleave",function(){var a=$(this);a.hasClass("hover")&&$(this).removeClass("hover")}),b.on("keyup",function(a){var b=a.keyCode;$(this).val()&&D($(this).val()),13===b&&E($(this).val())}),b.on("focus",function(){var a=$(".lately-list"),b=a.find("li").length;return b>0?c.show():c.hide(),!0}),$(".btn-new-search").on("click",function(){var a=$("#search-detail-input").val();a&&E(a)}),$(document).on("click",":not(.new-search)",function(a){var b=$(a.target);b.hasClass("new-input")||c.hide()}),c.on("click",function(a){a.stopPropagation()}),$(".user-login,.login-open-vip").on("click",function(){p.getCookie("cuk")||q.notifyLoginInterface(function(a){w(a),$(".down-success-other").show(),$(".qrcode-warpper").show()})}),$(".btn-exit").on("click",function(){q.ishareLogout()})}function l(){$.ajax({url:v.recommend.recommendConfigInfo,type:"POST",data:JSON.stringify(x.downSuccess.pageIds),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){"0"==a.code&&(a.data.forEach(function(a){x.downSuccess.descs.forEach(function(b){a.pageId==b.pageId&&(b.list=p.handleRecommendData(a.list))})}),console.log(x),x.downSuccess.descs.forEach(function(a){if(a.list.length&&"PC_M_DOWN_SUC_banner"==a.pageId){console.log(a.list,"item.list-------------------");var b=template.compile(y)({topBanner:a.list,className:"swiper-top-container"});$(".down-success-banner").html(b);new Swiper(".swiper-top-container",{direction:"horizontal",loop:a.list.length>1?!0:!1,autoplay:3e3})}}))}})}function m(){$(".common-bgMask").hide(),$(".detail-bg-mask").hide(),$("#dialog-box").hide()}function n(){var a=p.getCookie("visitor_id");return a||(a=p.getParam("visitorId")),a}a("../cmd-lib/myDialog");var o,p=a("../application/method"),q=a("../application/checkLogin"),r=a("../cmd-lib/util"),s=p.getParam("fid"),t=p.getParam("title"),u=p.getParam("format"),v=a("../application/api");a("swiper");var w=a("../application/effect").refreshTopBar,x=a("../common/recommendConfigInfo"),y=(a("../common/template/swiper_tmp.html"),a("../common/template/swiper_tmp.html")),z=a("../application/login").getLoginQrcode;a("../common/bindphone"),a("../common/coupon/couponIssue"),a("../common/bilog");var A=null,B={};k();var C=p.getQueryString("unloginFlag");C?($("#filename").text(t||""),u&&$(".xbsd i").addClass("ico-data ico-"+u),$(".qrcode-warpper").hide(),$(".down-success-other").hide(),$(".unloginTop").show(),$(".carding-data-pay-con").hide(),p.getCookie("cuk")?($(".carding-info-bottom.unloginStatus").remove(),q.getLoginData(function(a){A=a,o=a.userId,B.isVip=parseInt(a.isVip,10),w(a),j(a)})):(f(),setTimeout(function(){g()},1e3))):d(),p.getCookie("cuk")&&g(),$(".quick-down-a").click(function(){g()}),$(".btn-carding-back").on("click",function(){window.location.href="/f/"+s+".html"}),$(".js-buy-open").click(function(){var a=["","免费","下载券","现金","仅供在线阅读","VIP免费","VIP专享"],b=a[p.getCookie("file_state")],c=1==p.getCookie("isVip")?"续费":"充值",d=$(this).data("type"),e=r.getPageRef(s),f="?fid="+s+"&ref="+e;"vip"===d||"default"===d?(__pc__.gioTrack("vipRechargeEntryClick",{entryName_var:b,entryType_var:c}),p.compatibleIESkip("/pay/vip.html"+f,!0)):"privilege"===d&&p.compatibleIESkip("/pay/privilege.html"+f,!0)});var D=function(a){$.getScript("//sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd="+encodeURIComponent(a)+"&p=3&cb=window.baidu_searchsug&t="+(new Date).getTime())};window.baidu_searchsug=function(a){var b=$("#search-detail-input").val();if(b=b?b.replace(/^\s+|\s+$/gm,""):"",b.length>0&&a&&a.s){var c=a.s||[];if(c.length>0){for(var d=Math.min(c.length,10),e=[],f=0;d>f;f++){var g="/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(c[f]));e.push('<li><a href="'+g+'"  data-html="'+c[f]+'" >'+c[f].replace(new RegExp("("+b+")","gm"),"<span class='search-font'>$1</span>")+"</a></li>")}$(".lately-list").html(e.join("")).parent(".detail-lately").show()}}};var E=function(a){var b=a?a.replace(/^\s+|\s+$/gm,""):"";window.location.href="/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(b))};l(),$(".js-sent-email").click(function(){$("#dialog-box").dialog({html:$("#send-email").html()}).open()}),$("#dialog-box").on("click",".submit-btn",function(a){if(!p.testEmail($(".form-ipt").val()))return void $.toast({text:"请输入正确的邮箱",delay:3e3});if(p.getCookie("cuk")){console.log(p.getCookie("ui"));var b=$("#dialog-box .form-ipt").val();$.ajax({url:v.sms.sendCorpusDownloadMail,type:"POST",data:JSON.stringify({email:b,fid:s,title:t,uid:JSON.parse(p.getCookie("ui")).uid}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){if(console.log(a),"0"==a.code){$.toast({text:"发送邮箱成功!"});var b=$("#dialog-box");b.dialog({}).close()}else $.toast({text:"发送邮箱失败!"})}})}else q.notifyLoginInterface(function(a){w(a)})}),$("#dialog-box").on("click",".close-btn",function(a){m()})}),define("dist/cmd-lib/myDialog",[],function(a,b,c){!function(a){a.extend(a.fn,{dialog:function(b){return this.each(function(){var c=a.data(this,"diglog");c||(c=new a.dialog(b,this),a.data(this,"dialog",c))})}});var b={zIndex:1e3,getZindex:function(){return this.zIndex+=100},dialog:{}};a.dialog=function(a,b){arguments.length&&this._init(a,b)},a.dialog.prototype={options:{title:"title",dragable:!1,cache:!0,html:"",width:"auto",height:"auto",cannelBtn:!0,confirmlBtn:!0,cannelText:"关闭",confirmText:"确定",showFooter:!0,onClose:!1,onOpen:!1,callback:!1,showLoading:!1,loadingTxt:"处理中...",onConfirm:!1,onCannel:!1,getContent:!1,zIndex:b.zIndex,closeOnClickModal:!0,getZindex:function(){return b.zIndex+=100},mask_tpl:'<div class="dialog-mask" data-page="mask" style="z-index:'+b.zIndex+';"></div>'},_init:function(b,c){this.options=a.extend(!0,this.options,b),this.element=a(c),this._build(this.options.html),this._bindEvents()},_build:function(b){var c,d="",e="",f="",g='<div class="body-content"></div>';if(b)c=b;else{if(this.options.confirmlBtn&&(e='<button class="confirm">'+this.options.confirmText+"</button>"),this.options.cannelBtn&&(f='<button class="cannel">'+this.options.cannelText+"</button>"),this.options.showFooter&&(d='<div class="footer">                                    <div class="buttons">                                        '+e+"                                        "+f+"                                    </div>                                </div>"),this.options.showFooter){var h=this.options.height-80+"px";g='<div class="body-content" style="height:'+h+';"></div>'}else g='<div class="body-content" style="height:'+this.options.height+';"></div>';c='<div class="m-dialog" style="z-index:'+this.options.getZindex+';">								<div class="m-d-header">									<h2 style="width:'+this.options.width+';">'+this.options.title+'</h2>									<a href="javascript:;" class="btn-close">X</a>								</div>								<div class="m-d-body" style="width:'+this.options.width+";height:"+this.options.height+';">									'+g+"                                </div>"+d+"</div>"}a(document).find('[data-page="mask"]').length||a("body").append(this.options.mask_tpl),this.element.html(c)},_center:function(){var b=this.element.find(".dialog");b.css({left:(a(document).width()-b.width())/2,top:(document.documentElement.clientHeight-b.height())/2+a(document).scrollTop()})},_bindEvents:function(){var b=this;this.element.delegate(".close,.cancel","click",function(a){a&&a.preventDefault(),b.close(b.options.onClose)}),a(document).delegate('[data-page="mask"]',"click",function(a){b.options.closeOnClickModal&&(a&&a.preventDefault(),b.close(b.options.onClose))}),this.element.delegate(".cannel","click",function(a){a&&a.preventDefault(),b._cannel(b.options.onCannel)}),this.element.delegate(".confirm","click",function(c){c&&c.preventDefault(),a(this).hasClass("disable")||(b.options.showLoading&&(a(this).addClass("disable"),a(this).html(b.options.loadingTxt)),b._confirm(b.options.onConfirm))})},close:function(a){this._hide(a),this.clearCache()},open:function(b){this._callback(b),this.element.show(),a('[data-page="mask"]').show(),this.clearCache()},_hide:function(b){this.element.hide(),a('[data-page="mask"]').hide(),b&&"function"==typeof b&&this._callback(b)},clearCache:function(){this.options.cache||this.element.data("dialog","")},_callback:function(a){a&&"function"==typeof a&&a.call(this)},_cannel:function(a){this._hide(a),this.clearCache()},_confirm:function(a){return this.options.callback?a():(this._hide(a),void this.clearCache())},getElement:function(){return this.element},_getOptions:function(){return this.options},_setTxt:function(a){return this.element.find(".confirm").html(a)},destroy:function(){var a=this;a.element.remove()}},a.extend(a.fn,{open:function(b){a(this).data("dialog")&&a(this).data("dialog").open(b)},close:function(b){a(this).data("dialog")&&a(this).data("dialog").close(b)},clear:function(){a(this).data("dialog")&&a(this).data("dialog").clearCache()},getOptions:function(){return a(this).data("dialog")&&a(this).data("dialog")._getOptions()},getEl:function(){return a(this).data("dialog")&&a(this).data("dialog").getElement()},setTxt:function(b){a(this).data("dialog")&&a(this).data("dialog")._setTxt(b)},destroy:function(){a(this).data("dialog")&&a(this).data("dialog").destroy(t)}})}(jQuery)}),define("dist/application/method",[],function(require,exports,module){return{keyMap:{ishare_detail_access:"ISHARE_DETAIL_ACCESS",ishare_office_detail_access:"ISHARE_OFFICE_DETAIL_ACCESS"},async:function(a,b,c,d,e){$.ajax(a,{type:d||"post",data:e,async:!1,dataType:"json",headers:{"cache-control":"no-cache",Pragma:"no-cache"}}).done(function(a){b&&b(a)}).fail(function(a){console.log("error==="+c)})},get:function(a,b,c){$.ajaxSetup({cache:!1}),this.async(a,b,c,"get")},post:function(a,b,c,d,e){this.async(a,b,c,d,e)},postd:function(a,b,c){this.async(a,b,!1,!1,c)},random:function(a,b){return Math.floor(Math.random()*(b-a))+a},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},setCookieWithExp:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),d?document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString():document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},delCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1);var e=this.getCookie(a);null!=e&&(b&&c?document.cookie=a+"= '' ;domain="+c+";expires="+d.toGMTString()+";path="+b:b?document.cookie=a+"= '' ;expires="+d.toGMTString()+";path="+b:document.cookie=a+"="+e+";expires="+d.toGMTString())},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},url2Obj:function(a){for(var b={},c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b},getParam:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},getLocalData:function(a){try{if(localStorage&&localStorage.getItem){var b=localStorage.getItem(a);return null===b?null:JSON.parse(b)}return console.log("浏览器不支持html localStorage getItem"),null}catch(c){return null}},setLocalData:function(a,b){localStorage&&localStorage.setItem?(localStorage.removeItem(a),localStorage.setItem(a,JSON.stringify(b))):console.log("浏览器不支持html localStorage setItem")},browserType:function(){var a=navigator.userAgent,b=a.indexOf("Opera")>-1;return b?"Opera":a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b?"IE":a.indexOf("Edge")>-1?"Edge":a.indexOf("Firefox")>-1?"Firefox":a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome")?"Safari":a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1?"Chrome":void 0},validateIE9:function(){return!(!$.browser.msie||"9.0"!==$.browser.version&&"8.0"!==$.browser.version&&"7.0"!==$.browser.version&&"6.0"!==$.browser.version)},compareTime:function(a,b){return a&&b?Math.abs((b-a)/1e3/60/60/24):""},changeURLPar:function(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText)}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},getUrlAllParams:function(a){if("undefined"==typeof a)var b=decodeURI(location.search);else var b="?"+a.split("?")[1];var c=new Object;if(-1!=b.indexOf("?"))for(var d=b.substr(1),e=d.split("&"),f=0;f<e.length;f++)c[e[f].split("=")[0]]=decodeURI(e[f].split("=")[1]);return c},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},compatibleIESkip:function(a,b){var c=document.createElement("a");c.href=a,c.style.display="none",b&&(c.target="_blank"),document.body.appendChild(c),c.click()},testEmail:function(a){var b=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return b.test(a)?!0:!1},testPhone:function(a){return/^1(3|4|5|7|8)\d{9}$/.test(a)?!0:!1},handleRecommendData:function(a){var b=[];return $(a).each(function(a,c){var d={};1==c.type&&(c.linkUrl="/f/"+c.tprId+".html",d=c),2==c.type&&(d=c),3==c.type&&(c.linkUrl="/node/s/"+c.tprId+".html",d=c),b.push(d)}),console.log(b),b},formatDate:function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},getReferrer:function(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)&&(b="sm"),b},judgeSource:function(a){a||(a={}),a.searchEngine="";var b="";if(b=utils.getQueryVariable("from"),b||(b=sessionStorage.getItem("webWxFrom")||utils.getCookie("webWxFrom")),b)a.source=b,sessionStorage.setItem("webWxFrom",b),sessionStorage.removeItem("webReferrer");else{var c=sessionStorage.getItem("webReferrer")||utils.getCookie("webReferrer");if(c||(c=document.referrer),c){sessionStorage.setItem("webReferrer",c),sessionStorage.removeItem("webWxFrom"),c=c.toLowerCase();for(var d=new Array("google.","baidu.","360.","sogou.","shenma.","bing."),e=new Array("google","baidu","360","sogou","shenma","bing"),f=0,g=d.length;g>f;f++)c.indexOf(d[f])>=0&&(a.source="searchEngine",a.searchEngine=e[f])}c&&a.source||(utils.isWeChatBrow()?a.source="wechat":a.source="outLink")}return a}}}),define("dist/application/checkLogin",["dist/application/api","dist/application/method","dist/application/login","dist/cmd-lib/jqueryMd5","dist/application/iframe/iframe-parent","dist/application/iframe/messenger","dist/common/bilog","base64","dist/cmd-lib/util","dist/report/config","dist/cmd-lib/myDialog","dist/cmd-lib/toast","dist/common/bindphone","dist/common/baidu-statistics"],function(a,b,c){var d=a("dist/application/api"),e=a("dist/application/method"),d=a("dist/application/api"),f=a("dist/application/login").showLoginDialog;a("dist/common/baidu-statistics").initBaiduStatistics("17cdd3f409f282dc0eeb3785fcf78a66");var g=a("dist/common/baidu-statistics").handleBaiduStatisticsPush,h=a("dist/common/bilog").loginResult,i=a("dist/application/iframe/iframe-parent");c.exports={getIds:function(){var a=window.pageConfig&&window.pageConfig.params?window.pageConfig.params:null,b=window.pageConfig&&window.pageConfig.access?window.pageConfig.access:null,c=[];a&&(a.classid1&&c.push(a.classid1),a.classid2&&c.push(a.classid2),a.classid3&&c.push(a.classid3));var d=a&&c.length>0?c.join("-"):"",e=b?b.fileId||a.g_fileId||"":"",f=window.pageConfig&&window.pageConfig.classIds?window.pageConfig.classIds:"";return!d&&(d=f),{clsId:d,fid:e}},notifyLoginInterface:function(a){var b=this;if(!e.getCookie("cuk")){var c=(window.pageConfig&&window.pageConfig.page?window.pageConfig.page.ptype||"index":"index",this.getIds().clsId),d=this.getIds().fid;f({clsId:c,fid:d},function(){console.log("loginCallback"),b.getLoginData(a)})}},listenLoginStatus:function(a){var b=this;$.loginPop("login_wx_code",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:"ishare",popup:"hidden",clsId:this.getIds().clsId,fid:this.getIds().fid},function(){b.getLoginData(a)})},notifyCheckInterface:function(){e.getCookie("cuk")&&$.loginPop("checkCode",{terminal:"PC",businessSys:"ishare",domain:document.domain,clsId:this.getIds().clsId,fid:this.getIds().fid},function(a){"0"==a.code&&e.get(d.user.getJessionId,function(a){},"")})},syncUserInfoInterface:function(a){var b=this;e.getCookie("cuk")&&e.get(d.user.getJessionId,function(c){0==c.code&&b.getLoginData(a)},"")},getUserData:function(a){e.getCookie("cuk")&&e.get(d.coupon.querySeniority,function(b){b&&0==b.code&&a(b.data)},"")},getLoginData:function(a){var b=this;try{e.get("/node/api/getUserInfo",function(c){if(0==c.code&&c.data){if(h("","loginResult",{loginType:window.loginType&&window.loginType.type,phone:c.data.mobile,userid:c.data.userId,loginResult:"1"}),g("loginResult",{loginType:window.loginType&&window.loginType.type,phone:c.data.mobile,userid:c.data.userId,loginResult:"1"}),a&&"function"==typeof a){a(c.data);try{window.pageConfig.params.isVip=c.data.isVip,window.pageConfig.page.uid=c.data.userId}catch(d){}}try{var f={uid:c.data.userId,isVip:c.data.isVip,tel:c.data.mobile};e.setCookieWithExpPath("ui",JSON.stringify(f),18e5,"/")}catch(i){}}else h("","loginResult",{loginType:window.loginType&&window.loginType.type,phone:"",userid:"",loginResult:"0"}),g("loginResult",{loginType:window.loginType&&window.loginType.type,phone:"",userid:c.data.userId,loginResult:"0"}),b.ishareLogout()})}catch(c){console.log(c)}},ishareLogout:function(){e.delCookie("cuk","/",".sina.com.cn"),e.delCookie("cuk","/",".iask.com.cn"),e.delCookie("cuk","/",".iask.com"),e.delCookie("cuk","/"),e.delCookie("sid","/",".iask.sina.com.cn"),e.delCookie("sid","/",".iask.com.cn"),e.delCookie("sid","/",".sina.com.cn"),e.delCookie("sid","/",".ishare.iask.com.cn"),e.delCookie("sid","/",".office.iask.com"),e.delCookie("sid_ishare","/",".iask.sina.com.cn"),e.delCookie("sid_ishare","/",".iask.com.cn"),e.delCookie("sid_ishare","/",".sina.com.cn"),e.delCookie("sid_ishare","/",".ishare.iask.com.cn"),e.delCookie("_1st_l","/"),e.delCookie("ui","/"),$.get(d.user.loginOut,function(a){console.log("loginOut:",a),0==a.code?(i.send("",""),window.location.href=window.location.href):$.toast({text:a.msg,delay:3e3})})}}}),define("dist/application/api",[],function(a,b,c){var d="/gateway/pc",e="/gateway";c.exports={user:{loginByPsodOrVerCode:e+"/cas/login/authorize",getLoginQrcode:e+"/cas/login/qrcode",loginByWeChat:e+"/cas/login/gzhScan",getUserInfo:"/node/api/getUserInfo",thirdLoginRedirect:e+"/cas/login/redirect",login:d+"/usermanage/checkLogin",loginOut:e+"/cas/login/logout",collect:d+"/usermanage/collect",newCollect:e+"/content/collect/getUserFileList",getJessionId:d+"/usermanage/getJessionId",getSessionInfo:d+"/usermanage/getSessionInfo",addFeedback:e+"/feedback/addFeedback",getFeedbackType:e+"/feedback/getFeedbackType",sendSms:e+"/cas/sms/sendSms",queryBindInfo:e+"/cas/user/queryBindInfo",thirdCodelogin:e+"/cas/login/thirdCode",userBindMobile:e+"/cas/user/bindMobile",checkIdentity:e+"/cas/sms/checkIdentity",userBindThird:e+"/cas/user/bindThird",untyingThird:e+"/cas/user/untyingThird",setUpPassword:e+"/cas/user/setUpPassword",getUserCentreInfo:e+"/user/getUserCentreInfo",editUser:e+"/user/editUser",getFileBrowsePage:e+"/content/fileBrowse/getFileBrowsePage",getDownloadRecordList:e+"/content/getDownloadRecordList",getUserFileList:e+"/content/collect/getUserFileList",getMyUploadPage:e+"/content/getMyUploadPage",getOtherUser:e+"/user/getOthersCentreInfo",getSearchList:e+"/search/content/byCondition"},normalFileDetail:{addComment:d+"/fileSync/addComment",reportContent:d+"/fileSync/addFeedback",isStore:d+"/fileSync/getFileCollect",collect:d+"/fileSync/collect",filePreDownLoad:e+"/content/getPreFileDownUrl",fileDownLoad:d+"/action/downloadUrl",getFileDownLoadUrl:e+"/content/getFileDownUrl",appraise:d+"/fileSync/appraise",getPrePageInfo:d+"/fileSync/prePageInfo",hasDownLoad:d+"/fileSync/isDownload"},officeFileDetail:{},search:{byPosition:d+"/operating/byPosition",specialTopic:e+"/search/specialTopic/lisPage"},sms:{getCaptcha:d+"/usermanage/getSmsYzCode",sendCorpusDownloadMail:e+"/content/fileSendEmail/sendCorpusDownloadMail"},pay:{successBuyDownLoad:d+"/action/downloadNow",bindUser:d+"/order/bindUser",scanOrderInfo:e+"/order/scan/orderInfo"},coupon:{rightsSaleVouchers:e+"/rights/sale/vouchers",rightsSaleQueryPersonal:e+"/rights/sale/queryPersonal",querySeniority:e+"/rights/sale/querySeniority",queryUsing:e+"/rights/sale/queryUsing",getMemberPointRecord:e+"/rights/vip/getMemberPointRecord",getBuyRecord:e+"/rights/vip/getBuyRecord"},order:{bindOrderByOrderNo:d+"/order/bindOrderByOrderNo",unloginOrderDown:d+"/order/unloginOrderDown",createOrderInfo:e+"/order/create/orderInfo",rightsVipGetUserMember:e+"/rights/vip/getUserMember",getOrderStatus:e+"/order/get/orderStatus",queryOrderlistByCondition:e+"/order/query/listByCondition",getOrderInfo:e+"/order/get/orderInfo"},getHotSearch:d+"/search/getHotSearch",special:{fileSaveOrupdate:e+"/comment/collect/fileSaveOrupdate",getCollectState:e+"/comment/zc/getUserFileZcState",setCollect:e+"/content/collect/file"},upload:{getCategory:e+"/content/category/getSimplenessInfo",createFolder:e+"/content/saveUserFolder",getFolder:e+"/content/getUserFolders",saveUploadFile:e+"/content/webUploadFile",batchDeleteUserFile:e+"/content/batchDeleteUserFile"},recommend:{recommendConfigInfo:e+"/recommend/config/info",recommendConfigRuleInfo:e+"/recommend/config/ruleInfo"},reportBrowse:{fileBrowseReportBrowse:e+"/content/fileBrowse/reportBrowse"}}}),define("dist/application/login",["dist/cmd-lib/jqueryMd5","dist/application/iframe/iframe-parent","dist/application/iframe/messenger","dist/common/bilog","base64","dist/cmd-lib/util","dist/application/method","dist/report/config","dist/application/api","dist/cmd-lib/myDialog","dist/cmd-lib/toast","dist/common/bindphone"],function(a,b,c){function d(){$(".common-bgMask").hide(),$(".detail-bg-mask").hide(),$("#dialog-box").hide(),clearInterval(w)}function e(a,b,c,d,e){$.ajax({url:B.user.getLoginQrcode,type:"POST",data:JSON.stringify({cid:a||"",site:"1",fid:b||"",sceneId:s,domain:encodeURIComponent(document.domain)}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){"0"==a.code?(f(!1),x=a.data&&a.data.expires_in,s=a.data&&a.data.sceneId,g(),d||c?($(".tourist-login #login-qr").attr("src",a.data.url),z=e):$("#dialog-box #login-qr").attr("src",a.data.url),w=setInterval(function(){h()},4e3)):(clearInterval(w),$.toast({text:a.msg,delay:3e3}))},error:function(a){$.toast({text:a.msg||"生成二维码接口错误",delay:3e3})}})}function f(a){a?($(".login-qrContent .login-qr").hide(),$(".login-qrContent .login-qr-invalidtip").show()):($(".login-qrContent .login-qr-invalidtip").hide(),$(".login-qrContent .login-qr").show())}function g(){0>=x?(clearTimeout(v),f(!0)):(x--,v=setTimeout(g,1e3))}function h(a,b){$.ajax({url:B.user.loginByWeChat,type:"POST",data:JSON.stringify({sceneId:s,site:"1",site:"1",cid:a,fid:b||"1816",domain:encodeURIComponent(document.domain)}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){"0"==a.code?(clearInterval(w),C.setCookieWithExpPath("cuk",a.data.access_token,1e3*a.data.expires_in,"/"),p.send(a.data.access_token,a.data.expires_in),d(),y&&y(),z&&z()):"411046"!=a.code&&(clearInterval(w),$.toast({text:a.msg,delay:3e3}))},error:function(a){$.toast({text:a.msg||"公众号登录二维码",delay:3e3})}})}function i(a){var b=a,c=1,d="http://ishare.iask.sina.com.cn/node/redirectionURL.html?clientCode="+b,e="http://ishare.iask.sina.com.cn"+B.user.thirdCodelogin+"?clientCode="+b+"&channel="+c+"&terminal=pc&businessSys=ishare&location="+encodeURIComponent(d);j(e)}function j(a){var b=585,c=525,d=(window.screen.availHeight-30-c)/2,e=(window.screen.availWidth-10-b)/2,f="height="+c+",width="+b+",top="+d+",left="+e+",toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes";r=window.open(a,"",f)}function k(a,b,c){$.ajax({url:B.user.thirdLoginRedirect,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({terminal:"0",thirdType:c,code:a,businessSys:"ishare"}),dataType:"json",success:function(a){"0"==a.code?(C.setCookieWithExpPath("cuk",a.data&&a.data.access_token,1e3*a.data.expires_in,"/"),p.send(a.data.access_token,a.data.expires_in),d(),y&&y(),z&&z(),r.close()):($.toast({text:a.msg,delay:3e3}),r.close())},error:function(a){r.close(),$.toast({text:a.msg,delay:3e3})}})}function l(a,b,c,d){$.ajax({url:B.user.sendSms,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({mobile:t,nationCode:86,businessCode:u,terminal:"pc",appId:a,randstr:b,ticket:c,onOff:d}),dataType:"json",success:function(a){if("0"==a.code){q=a.data.smsId;var b=$("#dialog-box .getVerificationCode");b.attr("data-authenticationCodeType",1);var c=null,d=60;!function e(){0>=d?(clearTimeout(c),b.text("重新获取验证码"),b.css({"font-size":"13px",color:"#fff","border-color":"#eee"}),b.attr("data-authenticationCodeType",2)):(b.text(d--),b.css({color:"#fff","border-color":"#eee"}),c=setTimeout(e,1e3))}()}else"411015"==a.code?D(l):"411033"==a.code?$.toast({text:"图形验证码错误",delay:3e3}):$.toast({text:a.msg,delay:3e3})},error:function(a){$.toast({text:a.msg||"获取验证码错误",delay:3e3})}})}function m(a,b,c,e,f,g){$.ajax({url:B.user.loginByPsodOrVerCode,type:"POST",data:JSON.stringify({loginType:a,terminal:"pc",mobile:b,nationCode:c,smsId:e,checkCode:f,password:$.md5(g)}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){"0"==a.code?(C.setCookieWithExpPath("cuk",a.data.access_token,1e3*a.data.expires_in,"/"),p.send(a.data.access_token,a.data.expires_in),d(),y&&y(),z&&z()):$.toast({text:a.msg,delay:3e3})},error:function(a){$.toast({text:a.msg||"验证码或密码登录错误",delay:3e3})}})}function n(a,b){y=b;var c=$("#login-dialog");A("loginResult"),$("#dialog-box").dialog({html:c.html(),closeOnClickModal:!1}).open(e(a.clsId,a.fid))}function o(a){z=a;var b=$("#tourist-purchase-dialog");$("#dialog-box").dialog({html:b.html(),closeOnClickModal:!1}).open(function(){e()})}a("dist/cmd-lib/jqueryMd5");var p=a("dist/application/iframe/iframe-parent");r="";var q="",r="",s="",t="",u="",v=null,w=null,x="",y=null,z=null,A=a("dist/common/bilog").normalPageView;window.loginType={type:"0",values:{0:"wechat",1:"qq",2:"weibo",3:"phoneCode",4:"phonePw"}};var B=a("dist/application/api"),C=a("dist/application/method");a("dist/cmd-lib/myDialog"),a("dist/cmd-lib/toast");var D=a("dist/common/bindphone").showCaptcha;return $(document).on("click","#dialog-box .login-type-list .login-type-weixin .weixin-icon",function(a){$("#dialog-box .login-content .verificationCode-login").hide(),$("#dialog-box .login-content .password-login").hide(),$("#dialog-box .login-content .weixin-login").show(),window.loginType.type=window.loginType.values[0]}),$(document).on("click","#dialog-box .login-type-list .login-type-verificationCode",function(a){$("#dialog-box .login-content .password-login").hide(),$("#dialog-box .login-content .weixin-login").hide(),$("#dialog-box .login-content .verificationCode-login").show(),window.loginType.type=window.loginType.values[3]}),$(document).on("click","#dialog-box .login-type-list .login-type-password",function(a){$("#dialog-box .login-content .weixin-login").hide(),$("#dialog-box .login-content .verificationCode-login").hide(),$("#dialog-box .login-content .password-login").show(),window.loginType.type=window.loginType.values[4]}),$(document).on("click","#dialog-box .login-type-list .login-type",function(){var a=$(this).attr("data-logintype");a&&(i(a),"qq"==a&&(window.loginType.type=window.loginType.values[1]),"weibo"==a&&(window.loginType.type=window.loginType.values[2]))}),$(document).on("click","#dialog-box .login-btn",function(a){var b=$(this).attr("data-logintype");if("verificationCode"==b){var c=$("#dialog-box .verificationCode-login .phone-num").text().replace(/\+/,"").trim(),d=$("#dialog-box .verificationCode-login .verification-code").val(),e=$("#dialog-box .verificationCode-login .telphone").val().trim();return C.testPhone(e)?!d||d&&4!==d.length?void $("#dialog-box .verificationCode-login .code .verification-code-tip").show():($("#dialog-box .verificationCode-login .code .verification-code-tip").hide(),$("#dialog-box .verificationCode-login .input-mobile .mobile-errortip").hide(),void m("codeLogin",e,c,q,d,"")):void $("#dialog-box .verificationCode-login .input-mobile .mobile-errortip").show()}if("password"==b){var c=$("#dialog-box .password-login .phone-num").text().replace(/\+/,"").trim(),f=$("#dialog-box .password-login .password .login-password").val().trim(),e=$("#dialog-box .password-login .telphone").val().trim();
return C.testPhone(e)?void m("ppLogin",e,c,"","",f):void $("#dialog-box .password-login .input-mobile .mobile-errortip").show()}}),$(document).on("click",".qr-refresh",function(a){e("","",!0)}),$(document).on("click","#dialog-box .getVerificationCode",function(a){var b=$(this).attr("data-authenticationCodeType"),c=$("#dialog-box .verificationCode-login .input-mobile .telphone").val();return C.testPhone(c)?($("#dialog-box .verificationCode-login .input-mobile .mobile-errortip").hide(),void((0==b||2==b)&&(u=4,l()))):void $("#dialog-box .verificationCode-login .mobile .input-mobile .mobile-errortip").show()}),$(document).on("input","#dialog-box .verificationCode-login .telphone",function(a){t=$(this).val();var b=$("#dialog-box .verificationCode-login .verification-code").val();t.length>11&&$("#dialog-box .telphone").val(t.slice(0,11)),C.testPhone(t.slice(0,11))?($("#dialog-box .verificationCode-login .input-mobile .mobile-errortip").hide(),$("#dialog-box .getVerificationCode").addClass("getVerificationCode-active"),b>=4&&($("#dialog-box .verificationCode-login .login-btn").removeClass("login-btn-disable"),$("#dialog-box .verificationCode-login .login-btn").addClass("login-btn-active"))):(t&&t.length>=11&&$("#dialog-box .verificationCode-login .input-mobile .mobile-errortip").show(),$("#dialog-box .getVerificationCode").removeClass("getVerificationCode-active"),$("#dialog-box .verificationCode-login .login-btn").removeClass("login-btn-active"),$("#dialog-box .verificationCode-login .login-btn").addClass("login-btn-disable"))}),$(document).on("input","#dialog-box .verification-code",function(a){t=$("#dialog-box .verificationCode-login .telphone").val(),verificationCode=$(this).val(),verificationCode.length>4&&$("#dialog-box .verification-code").val(verificationCode.slice(0,4)),verificationCode&&verificationCode.length>=4&&$("#dialog-box .verificationCode-login .code .verification-code-tip").hide(),verificationCode&&verificationCode.length>=4&&C.testPhone(t)?($("#dialog-box .verificationCode-login .login-btn").removeClass("login-btn-disable"),$("#dialog-box .verificationCode-login .login-btn").addClass("login-btn-active")):($("#dialog-box .verificationCode-login .login-btn").removeClass("login-btn-active"),$("#dialog-box .verificationCode-login .login-btn").addClass("login-btn-disable"))}),$(document).on("input","#dialog-box .password-login .telphone",function(){if(t=$(this).val(),t.length>11&&$("#dialog-box .password-login .telphone").val(t.slice(0,11)),C.testPhone(t.slice(0,11))){$("#dialog-box .password-login .input-mobile .mobile-errortip").hide();$("#dialog-box .password-login .password .login-password").val()}else t&&t.length>=11&&$("#dialog-box .password-login .input-mobile .mobile-errortip").show(),$("#dialog-box .password-login .login-btn").removeClass("login-btn-active"),$("#dialog-box .password-login .login-btn").addClass("login-btn-disable")}),$(document).on("input","#dialog-box .password-login .login-password",function(){var a=$(this).val(),b=$("#dialog-box .password-login .telphone").val();a&&a.length>0?$("#dialog-box .password-login .password .close-eye").show():$("#dialog-box .password-login .password .close-eye").hide(),C.testPhone(b)?($("#dialog-box .password-login .login-btn").removeClass("login-btn-disable"),$("#dialog-box .password-login .login-btn").addClass("login-btn-active")):($("#dialog-box .password-login .login-btn").removeClass("login-btn-active"),$("#dialog-box .password-login .login-btn").addClass("login-btn-disable"))}),$(document).on("click","#dialog-box .password-login .close-eye",function(){var a=$("#dialog-box .password-login .text-input");a.hide(),$("#dialog-box .password-login .password-input").val(a.val()),$("#dialog-box .password-login .password-input").show(),$("#dialog-box .password-login .password .close-eye").hide(),$("#dialog-box .password-login .password .eye").show()}),$(document).on("click","#dialog-box .password-login .eye",function(){var a=$("#dialog-box .password-login .password-input");a.hide(),$("#dialog-box .password-login .text-input").val(a.val()),$("#dialog-box .password-login .text-input").show(),$("#dialog-box .password-login .password .eye").hide(),$("#dialog-box .password-login .password .close-eye").show()}),$(document).on("click","#dialog-box  .close-btn",function(a){d()}),$(document).on("click","#dialog-box .tourist-purchase-dialog .tabs .tab",function(a){var b=$(this).attr("data-type");$("#dialog-box .tourist-purchase-dialog .tabs .tab").removeClass("tab-active"),$(this).addClass("tab-active"),"tourist-purchase"==b&&($("#dialog-box .tourist-purchase-dialog .login-content").hide(),$("#dialog-box .tourist-purchase-dialog .tourist-purchase-content").show()),"login-purchase"==b&&(A("loginResult"),$("#dialog-box .tourist-purchase-dialog .tourist-purchase-content").hide(),$("#dialog-box .tourist-purchase-dialog .login-content").show())}),$(document).on("click","#dialog-box .phone-choice",function(a){return $(this).addClass("phone-choice-show"),$("#dialog-box .phone-more").show(),!1}),$(document).on("click","#dialog-box .phone-more .phone-ele",function(a){var b=$(this).find(".number-con em").text();return $("#dialog-box .phone-choice .phone-num .add").text("+"+b),$("#dialog-box .phone-choice").removeClass("phone-choice-show"),$("#dialog-box .phone-more").hide(),!1}),$(document).on("click",".login-dialog",function(a){$("#dialog-box .phone-choice").removeClass("phone-choice-show"),$("#dialog-box .phone-more").hide()}),$(document).on("click",".login-content",function(a){$("#dialog-box .phone-choice").removeClass("phone-choice-show"),$("#dialog-box .phone-more").hide()}),window.thirdLoginRedirect=k,{showLoginDialog:n,showTouristPurchaseDialog:o,getLoginQrcode:e}}),define("dist/cmd-lib/jqueryMd5",[],function(a,b,c){!function(a){var b=function(a,b){return a<<b|a>>>32-b},c=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},d=function(a,b,c){return a&b|~a&c},e=function(a,b,c){return a&c|b&~c},f=function(a,b,c){return a^b^c},g=function(a,b,c){return b^(a|~c)},h=function(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)},i=function(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)},j=function(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)},k=function(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)},l=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},m=function(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},n=function(a){a=a.replace(/\x0d\x0a/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b};a.extend({md5:function(a){var b,d,e,f,g,o,p,q,r,s=Array(),t=7,u=12,v=17,w=22,x=5,y=9,z=14,A=20,B=4,C=11,D=16,E=23,F=6,G=10,H=15,I=21;for(a=n(a),s=l(a),o=1732584193,p=4023233417,q=2562383102,r=271733878,b=0;b<s.length;b+=16)d=o,e=p,f=q,g=r,o=h(o,p,q,r,s[b+0],t,3614090360),r=h(r,o,p,q,s[b+1],u,3905402710),q=h(q,r,o,p,s[b+2],v,606105819),p=h(p,q,r,o,s[b+3],w,3250441966),o=h(o,p,q,r,s[b+4],t,4118548399),r=h(r,o,p,q,s[b+5],u,1200080426),q=h(q,r,o,p,s[b+6],v,2821735955),p=h(p,q,r,o,s[b+7],w,4249261313),o=h(o,p,q,r,s[b+8],t,1770035416),r=h(r,o,p,q,s[b+9],u,2336552879),q=h(q,r,o,p,s[b+10],v,4294925233),p=h(p,q,r,o,s[b+11],w,2304563134),o=h(o,p,q,r,s[b+12],t,1804603682),r=h(r,o,p,q,s[b+13],u,4254626195),q=h(q,r,o,p,s[b+14],v,2792965006),p=h(p,q,r,o,s[b+15],w,1236535329),o=i(o,p,q,r,s[b+1],x,4129170786),r=i(r,o,p,q,s[b+6],y,3225465664),q=i(q,r,o,p,s[b+11],z,643717713),p=i(p,q,r,o,s[b+0],A,3921069994),o=i(o,p,q,r,s[b+5],x,3593408605),r=i(r,o,p,q,s[b+10],y,38016083),q=i(q,r,o,p,s[b+15],z,3634488961),p=i(p,q,r,o,s[b+4],A,3889429448),o=i(o,p,q,r,s[b+9],x,568446438),r=i(r,o,p,q,s[b+14],y,3275163606),q=i(q,r,o,p,s[b+3],z,4107603335),p=i(p,q,r,o,s[b+8],A,1163531501),o=i(o,p,q,r,s[b+13],x,2850285829),r=i(r,o,p,q,s[b+2],y,4243563512),q=i(q,r,o,p,s[b+7],z,1735328473),p=i(p,q,r,o,s[b+12],A,2368359562),o=j(o,p,q,r,s[b+5],B,4294588738),r=j(r,o,p,q,s[b+8],C,2272392833),q=j(q,r,o,p,s[b+11],D,1839030562),p=j(p,q,r,o,s[b+14],E,4259657740),o=j(o,p,q,r,s[b+1],B,2763975236),r=j(r,o,p,q,s[b+4],C,1272893353),q=j(q,r,o,p,s[b+7],D,4139469664),p=j(p,q,r,o,s[b+10],E,3200236656),o=j(o,p,q,r,s[b+13],B,681279174),r=j(r,o,p,q,s[b+0],C,3936430074),q=j(q,r,o,p,s[b+3],D,3572445317),p=j(p,q,r,o,s[b+6],E,76029189),o=j(o,p,q,r,s[b+9],B,3654602809),r=j(r,o,p,q,s[b+12],C,3873151461),q=j(q,r,o,p,s[b+15],D,530742520),p=j(p,q,r,o,s[b+2],E,3299628645),o=k(o,p,q,r,s[b+0],F,4096336452),r=k(r,o,p,q,s[b+7],G,1126891415),q=k(q,r,o,p,s[b+14],H,2878612391),p=k(p,q,r,o,s[b+5],I,4237533241),o=k(o,p,q,r,s[b+12],F,1700485571),r=k(r,o,p,q,s[b+3],G,2399980690),q=k(q,r,o,p,s[b+10],H,4293915773),p=k(p,q,r,o,s[b+1],I,2240044497),o=k(o,p,q,r,s[b+8],F,1873313359),r=k(r,o,p,q,s[b+15],G,4264355552),q=k(q,r,o,p,s[b+6],H,2734768916),p=k(p,q,r,o,s[b+13],I,1309151649),o=k(o,p,q,r,s[b+4],F,4149444226),r=k(r,o,p,q,s[b+11],G,3174756917),q=k(q,r,o,p,s[b+2],H,718787259),p=k(p,q,r,o,s[b+9],I,3951481745),o=c(o,d),p=c(p,e),q=c(q,f),r=c(r,g);var J=m(o)+m(p)+m(q)+m(r);return J.toLowerCase()}})}(jQuery)}),define("dist/application/iframe/iframe-parent",["dist/application/iframe/messenger"],function(a){function b(a){var b=this,d=this.getJsCode();this.messenger=new c(a.id,a.projectName),this.timeOut=864e5,this.id=a.id,this.ssoId=a.ssoId,this.addIframe(a.ssoUrl,a.ssoId),this.messenger.listen(function(a){var c=JSON.parse(a);console.log("parent-服务端sso传回数据",c,c.token),console.log("客户端本地数据",d),c&&c.token?d!==c.token&&(window.location.reload(),b.setJsCode(c.token,c.expires)):d&&(b.delJsCode(),window.location.reload())})}var c=a("dist/application/iframe/messenger");b.prototype.addIframe=function(a,b){var c=this,d=document.createElement("iframe");d.id=b,d.src=a,d.style.display="none";var e=document.getElementsByTagName("body")[0];e.appendChild(d),c.messenger.addTarget(d.contentWindow,b)},b.prototype.send=function(a,b){var c=this;this.messenger.targets[this.ssoId].send(JSON.stringify({id:c.id,token:a,expires:b}))},b.prototype.getJsCode=function(){return this.isEmpty(this.getCookie("cuk"))?null:this.getCookie("cuk")},b.prototype.setJsCode=function(a,b){if(this.isEmpty(a))throw new Error("缺少【jsCode】参数值");this.timeOut=this.isEmpty(b)?this.timeOut:b,this.setCookie("cuk",a,this.timeOut,"/")},b.prototype.delJsCode=function(){this.delCookie("cuk","/")},b.prototype.getCookie=function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},b.prototype.setCookie=function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},b.prototype.delCookie=function(a,b,c){var d=new Date;d.setTime(d.getTime()-1);var e=this.getCookie(a);null!=e&&(b&&c?document.cookie=a+"= '' ;domain="+c+";expires="+d.toGMTString()+";path="+b:b?document.cookie=a+"= '' ;expires="+d.toGMTString()+";path="+b:document.cookie=a+"="+e+";expires="+d.toGMTString())},b.prototype.isEmpty=function(a){return null==a||""==a||0==a.length||void 0==a||"undefined"==a?!0:!1};var d={local:"http://192.168.100.222:8085",dev:"http://dev-login-ishare.iask.com.cn",test:"http://test-login-ishare.iask.com.cn",pre:"http://pre-login-ishare.iask.com.cn",prod:"http://login-ishare.iask.com.cn"},e=d[env]||d.prod,f=new b({id:"PC_MAIN_I_SHARE",projectName:"I_SHARE",ssoId:"I_SHARE_SSO",ssoUrl:e});return f}),define("dist/application/iframe/messenger",[],function(){function a(a,b,c){var d="";if(arguments.length<2?d="target error - target and name are both required":"object"!=typeof a?d="target error - target itself must be window object":"string"!=typeof b&&(d="target error - target name must be string type"),d)throw new Error(d);this.target=a,this.name=b,this.prefix=c}function b(a,b){this.targets={},this.name=a,this.listenFunc=[],this.prefix=b||c,this.initListen()}var c="[PROJECT_NAME]",d="postMessage"in window;return d?a.prototype.send=function(a){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+a,"*")}:a.prototype.send=function(a){var b=window.navigator[this.prefix+this.name];if("function"!=typeof b)throw new Error("target callback function is not defined");b(this.prefix+a,window)},b.prototype.addTarget=function(b,c){var d=new a(b,c,this.prefix);this.targets[c]=d},b.prototype.initListen=function(){var a=this,b=function(b){if("object"==typeof b&&b.data&&(b=b.data),"string"==typeof b)for(var c=b.split("__Messenger__"),b=c[1],d=c[0].split("|"),e=d[0],f=d[1],g=0;g<a.listenFunc.length;g++)e+f===a.prefix+a.name&&a.listenFunc[g](b)};d?"addEventListener"in document?window.addEventListener("message",b,!1):"attachEvent"in document&&window.attachEvent("onmessage",b):window.navigator[this.prefix+this.name]=b},b.prototype.listen=function(a){for(var b=0,c=this.listenFunc.length,d=!1;c>b;b++)if(this.listenFunc[b]==a){d=!0;break}d||this.listenFunc.push(a)},b.prototype.clear=function(){this.listenFunc=[]},b.prototype.send=function(a){var b,c=this.targets;for(b in c)c.hasOwnProperty(b)&&c[b].send(a)},b}),define("dist/common/bilog",["base64","dist/cmd-lib/util","dist/application/method","dist/report/config"],function(a,b,c){function d(){sessionStorage.setItem("sessionID",A)}function e(a,b){if(b.visitID=v.getCookie("visitor_id"),!new RegExp("/f/").test(a)||new RegExp("referrer=").test(a)||new RegExp("/f/down").test(a))new RegExp("/pay/payConfirm.html").test(a)?(b.prePageID="PC-M-PAY-F-L",b.prePageName="支付页-付费资料-列表页"):new RegExp("/pay/payQr.html\\?type=2").test(a)?(b.prePageID="PC-M-PAY-F-QR",b.prePageName="支付页-付费资料-支付页"):new RegExp("/pay/vip.html").test(a)?(b.prePageID="PC-M-PAY-VIP-L",b.prePageName="支付页-VIP-套餐列表页"):new RegExp("/pay/payQr.html\\?type=0").test(a)?(b.prePageID="PC-M-PAY-VIP-QR",b.prePageName="支付页-VIP-支付页"):new RegExp("/pay/privilege.html").test(a)?(b.prePageID="PC-M-PAY-PRI-L",b.prePageName="支付页-下载特权-套餐列表页"):new RegExp("/pay/payQr.html\\?type=1").test(a)?(b.prePageID="PC-M-PAY-PRI-QR",b.prePageName="支付页-下载特权-支付页"):new RegExp("/pay/success").test(a)?(b.prePageID="PC-M-PAY-SUC",b.prePageName="支付成功页"):new RegExp("/pay/fail").test(a)?(b.prePageID="PC-M-PAY-FAIL",b.prePageName="支付失败页"):new RegExp("/node/f/downsucc.html").test(a)?/unloginFlag=1/.test(a)?(b.prePageID="PC-M-FDPAY-SUC",b.prePageName="免登购买成功页"):(b.prePageID="PC-M-DOWN-SUC",b.prePageName="下载成功页"):new RegExp("/node/f/downfail.html").test(a)?(b.prePageID="PC-M-DOWN-FAIL",b.prePageName="下载失败页"):new RegExp("/search/home.html").test(a)?(b.prePageID="PC-M-SR",b.prePageName="搜索关键词"):new RegExp("/node/404.html").test(a)?(b.prePageID="PC-M-404",b.prePageName="404错误页"):new RegExp("/node/503.html").test(a)?(b.prePageID="PC-M-500",b.prePageName="500错误页"):new RegExp("/node/personalCenter/home.html").test(a)?(b.prePageID="PC-M-USER",b.prePageName="个人中心-首页"):new RegExp("/node/personalCenter/myuploads.html").test(a)?(b.prePageID="PC-M-USER-MU",b.prePageName="个人中心-我的上传页"):new RegExp("/node/personalCenter/mycollection.html").test(a)?(b.prePageID="PC-M-USER-CL",b.prePageName="个人中心-我的收藏页"):new RegExp("/node/personalCenter/mydownloads.html").test(a)?(b.prePageID="PC-M-USER-MD",b.prePageName="个人中心-我的下载页"):new RegExp("/node/personalCenter/vip.html").test(a)?(b.prePageID="PC-M-USER-VIP",b.prePageName="个人中心-我的VIP"):new RegExp("/node/personalCenter/mycoupon.html").test(a)?(b.prePageID="PC-M-USER-MS",b.prePageName="个人中心-我的优惠券页"):new RegExp("/node/personalCenter/accountsecurity.html").test(a)?(b.prePageID="PC-M-USER-ATM",b.prePageName="个人中心-账号与安全页"):new RegExp("/node/personalCenter/personalinformation.html").test(a)?(b.prePageID="PC-M-USER-ATF",b.prePageName="个人中心-个人信息页"):new RegExp("/node/personalCenter/myorder.html").test(a)&&(b.prePageID="PC-M-USER-ORD",b.prePageName="个人中心-我的订单");else{var c=$(".ip-page-statusCode");"404"==c?(b.prePageID="PC-M-404",b.prePageName="资料被删除"):"302"==c?(b.prePageID="PC-M-FSM",b.prePageName="资料私有"):(b.prePageID="PC-M-FD",b.prePageName="资料详情页")}}function f(){$.getScript("//ipip.iask.cn/iplookup/search?format=js",function(a,b){"success"===b?(v.setCookieWithExp("ip",remote_ip_info.ip,3e5,"/"),D.ip=remote_ip_info.ip):console.error("ipip获取ip信息error")})}function g(){var a="";return-1!=window.navigator.userAgent.indexOf("Windows NT 10.0")?a="Windows 10":-1!=window.navigator.userAgent.indexOf("Windows NT 6.2")?a="Windows 8":-1!=window.navigator.userAgent.indexOf("Windows NT 6.1")?a="Windows 7":-1!=window.navigator.userAgent.indexOf("Windows NT 6.0")?a="Windows Vista":-1!=window.navigator.userAgent.indexOf("Windows NT 5.1")?a="Windows XP":-1!=window.navigator.userAgent.indexOf("Windows NT 5.0")?a="Windows 2000":-1!=window.navigator.userAgent.indexOf("Mac")?a="Mac/iOS":-1!=window.navigator.userAgent.indexOf("X11")?a="UNIX":-1!=window.navigator.userAgent.indexOf("Linux")&&(a="Linux"),a}function h(a){setTimeout(function(){console.log(a,"页面上报"),$.getJSON("https://dw.iask.com.cn/ishare/jsonp?data="+t.encode(JSON.stringify(a))+"&jsoncallback=?",function(a){console.log(a)})})}function i(a,b){var c=a;if(a&&b){for(var d in a)if("var"===d)for(var e in b)c["var"][e]=b[e];else b[d]&&(c[d]=b[d]);console.log("埋点参数:",c),h(c)}}function j(a){var b=JSON.parse(JSON.stringify(D));e(document.referrer,b);var c={channel:""},d=v.getCookie("bc");d&&(c.channel=d),b.eventType="page",b.eventID="NE001",b.eventName="normalPageView",a?(b.pageID="PLOGIN",b.pageName="登录页"):(b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||""),b.pageURL=window.location.href;var f=q(),g=r(f);$.extend(c,{source:g,searchEngine:f}),i(b,c)}function k(){var a={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePrice:window.pageConfig.params.moneyPrice,fileCouponCount:window.pageConfig.params.file_volume,filePayType:x[window.pageConfig.params.file_state],fileFormat:window.pageConfig.params.file_format,fileProduceType:window.pageConfig&&window.pageConfig.params?window.pageConfig.params.fsource:"",fileCooType:"",fileUploaderID:window.pageConfig.params.file_uid},b=window.pageConfig&&window.pageConfig.params?window.pageConfig.params.is360:"";/https?\:\/\/[^\s]*so.com.*$/g.test(document.referrer)&&!/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&"true"==b&&(a.fileCooType="360onebox",v.setCookieWithExp("bc","360onebox",18e5,"/")),/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&(a.fileCooType="360wenku",v.setCookieWithExp("bc","360wenku",18e5,"/")),/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&(a.fileCooType="360wenku",v.setCookieWithExp("bc","360wenku",18e5,"/"));var c=JSON.parse(JSON.stringify(D));e(document.referrer,c),c.eventType="page",c.eventID="SE002",c.eventName="fileDetailPageView",c.pageID=$("#ip-page-id").val()||"",c.pageName=$("#ip-page-name").val()||"",c.pageURL=window.location.href,v.setCookieWithExp("bf",JSON.stringify(a),18e5,"/"),i(c,a)}function l(a){var b=JSON.parse(JSON.stringify(D));e(document.referrer,b),b.eventType="page",b.eventID="SE014",b.eventName="downResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,i(b,a)}function m(a){var b=JSON.parse(JSON.stringify(D));b.eventType="page",b.eventID="SE015",b.eventName="searchPageView",e(document.referrer,b),b.pageID="PC-M-SR",b.pageName=$("#ip-page-name").val()||"",a.keyWords=$(".new-input").val()||$(".new-input").attr("placeholder"),b.pageURL=window.location.href,i(b,a)}function n(a,b){for(var c in b)a[c]&&(b[c]=a[c])}function o(a,b,c,d,f){var g=JSON.parse(JSON.stringify(D));e(document.referrer,g),g.eventType="click",g.eventID=a,g.eventName=b,g.pageID=$("#ip-page-id").val(),g.pageName=$("#ip-page-name").val(),g.pageURL=window.location.href,g.domID=c,g.domName=d,g.domURL=window.location.href,i(g,f)}function p(a,b,c,d){var e=$("#ip-page-type").val();if("pindex"==e){var f={fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:""},g=v.getCookie("bf");if(g&&n(JSON.parse(g),f),"fileDetailUpDown"==a||"fileDetailMiddleDown"==a||"fileDetailBottomDown"==a)f.downType="","fileDetailUpDown"==a?o("SE003","fileDetailDownClick","fileDetailUpDown","资料详情页顶部立即下载",f):"fileDetailMiddleDown"==a?o("SE003","fileDetailDownClick","fileDetailMiddleDown","资料详情页中部立即下载",f):"fileDetailBottomDown"==a&&o("SE003","fileDetailDownClick","fileDetailBottomDown","资料详情页底部立即下载",f),delete f.downType;else if("fileDetailUpBuy"==a)o("SE004","fileDetailBuyClick","fileDetailUpBuy","资料详情页顶部立即购买",f);else if("fileDetailMiddleBuy"==a)o("SE004","fileDetailBuyClick","fileDetailMiddleBuy","资料详情页中部立即购买",f);else if("fileDetailBottomBuy"==a)o("SE004","fileDetailBuyClick","fileDetailBottomBuy","资料详情页底部立即购买",f);else if("fileDetailMiddleOpenVip8"==a)o("SE005","fileDetailOpenVipClick","fileDetailMiddleOpenVip8","资料详情页中部开通vip，8折购买",f);else if("fileDetailBottomOpenVip8"==a)o("SE005","fileDetailOpenVipClick","fileDetailBottomOpenVip8","资料详情页底部开通vip，8折购买",f);else if("fileDetailMiddleOpenVipPr"==a)o("SE005","fileDetailOpenVipClick","fileDetailMiddleOpenVipPr","资料详情页中部开通vip，享更多特权",f);else if("fileDetailBottomOpenVipPr"==a)o("SE005","fileDetailOpenVipClick","fileDetailBottomOpenVipPr","资料详情页底部开通vip，享更多特权",f);else if("fileDetailComment"==a);else if("fileDetailScore"==a){var h=b.find(".on:last").text();f.fileScore=h?h:"",o("SE007","fileDetailScoreClick","fileDetailScore","资料详情页评分",f),delete f.fileScore}}if("payFile"==a){var f={orderID:v.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",filePrice:"",fileSalePrice:""},g=v.getCookie("bf");g&&n(JSON.parse(g),f),o("SE008","payFileClick","payFile","支付页-付费资料-立即支付",f)}else if("payVip"==a){var f={orderID:v.getParam("orderNo")||"",vipID:$(".ui-tab-nav-item.active").data("vid"),vipName:$(".ui-tab-nav-item.active p.vip-time").text()||"",vipPrice:$(".ui-tab-nav-item.active p.vip-price strong").text()||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||""};o("SE010","payVipClick","payVip","支付页-VIP-立即支付",f)}else if("payPrivilege"==a){var f={orderID:v.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",privilegeName:$(".ui-tab-nav-item.active p.privilege-price").text()||"",privilegePrice:$(".ui-tab-nav-item.active").data("activeprice")||"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:""},g=v.getCookie("bf");g&&n(JSON.parse(g),f),o("SE012","payPrivilegeClick","payPrivilege","支付页-下载特权-立即支付",f)}else if("searchResult"==a)f={fileID:b.attr("data-fileId"),fileName:b.attr("data-fileName"),keyWords:$(".new-input").val()||$(".new-input").attr("placeholder")},o("SE016","normalClick","searchResultClick","搜索结果页点击",f);else if("loginResult"==a){var f={pageID:"ishare",pageName:"PC-M-PLOGIN"};$.extend(f,{"var":d}),o("SE001","loginResult","PLOGIN","登录页",f)}var f={phone:$("#ip-mobile").val()||"",vipStatus:$("#ip-isVip").val()||"",channel:"",cashBalance:"",integralNumber:"",idolNumber:"",fileCategoryID:"",fileCategoryName:""};E&&(f.vipStatus=E.isVip||"",f.phone=E.tel||"");var i=v.getCookie("bc");i&&(f.channel=i),"paySuccessBacDown"==a?o("NE002","normalClick","paySuccessBacDown","支付成功页-返回下载",f):"paySuccessOpenVip"==a?o("NE002","normalClick","paySuccessOpenVip","支付成功页-开通VIP",f):"downSuccessOpenVip"==a?o("NE002","normalClick","downSuccessOpenVip","下载成功页-开通VIP",f):"downSuccessContinueVip"==a?o("NE002","normalClick","downSuccessContinueVip","下载成功页-续费VIP",f):"downSuccessBacDetail"==a?o("NE002","normalClick","downSuccessBacDetail","下载成功页-返回详情页",f):"downSuccessBindPhone"==a?o("NE002","normalClick","downSuccessBindPhone","下载成功页-立即绑定",f):"viewExposure"==a?(f.moduleID=c,o("NE006","modelView","","",f)):"similarFileClick"==a?(f={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePayType:x[window.pageConfig.params.file_state]},o("SE017","fileListNormalClick","similarFileClick","资料列表常规点击",f)):"underSimilarFileClick"==a?(f={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePayType:x[window.pageConfig.params.file_state]},o("SE017","fileListNormalClick","underSimilarFileClick","点击底部猜你喜欢内容时",f)):"downSucSimilarFileClick"==a?o("SE017","fileListNormalClick","downSucSimilarFileClick","下载成功页猜你喜欢内容时",f):"markFileClick"==a?(f={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePayType:x[window.pageConfig.params.file_state],markRusult:1},o("SE019","markClick","markFileClick","资料收藏点击",f)):"vipRights"==a?o("NE002","normalClick","vipRights","侧边栏-vip权益",f):"seen"==a?o("NE002","normalClick","seen","侧边栏-我看过的",f):"mark"==a?o("NE002","normalClick","mark","侧边栏-我的收藏",f):"customerService"==a?o("NE002","normalClick","customerService","侧边栏-联系客服",f):"downApp"==a?o("NE002","normalClick","downApp","侧边栏-下载APP",f):"follow"==a&&o("NE002","normalClick","follow","侧边栏-关注领奖",f)}function q(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*google.com.*$/g.test(a)?b="google":/https?\:\/\/[^\s]*bing.com.*$/g.test(a)&&(b="bing"),b}function r(a){var b=document.referrer,c=location.origin,d="";return d=a?"searchEngine":b&&-1!==b.indexOf(c)?"vist":"outLink"}function s(a){console.log("自有埋点上报结果",a),setTimeout(function(){$.getJSON("https://dw.iask.com.cn/ishare/jsonp?data="+t.encode(JSON.stringify(a))+"&jsoncallback=?",function(a){})})}var t=a("base64").Base64,u=a("dist/cmd-lib/util"),v=a("dist/application/method"),w=a("dist/report/config"),x=["","free","","online","vipOnly","cost"],y=v.getCookie("ip")||f(),z=v.getCookie("cid");z||(z=(new Date).getTime()+""+Math.random(),v.setCookieWithExp("cid",z,2592e6,"/"));var A=(new Date).getTime()+""+Math.random(),B=18e5,C=sessionStorage.getItem("sessionID")||"";C||d(),A-C>B&&d();var D={eventType:"",eventID:"",eventName:"",eventTime:String((new Date).getTime()),reportTime:String((new Date).getTime()),sdkVersion:"V1.0.3",terminalType:"0",loginStatus:v.getCookie("cuk")?1:0,visitID:v.getCookie("visitor_id")||"",userID:"",sessionID:sessionStorage.getItem("sessionID")||z||"",productName:"ishare",productCode:"0",productVer:"V4.5.0",pageID:"",pageName:"",pageURL:"",ip:y||"",resolution:document.documentElement.clientWidth+"*"+document.documentElement.clientHeight,browserVer:u.getBrowserInfo(navigator.userAgent),osType:g(),moduleID:"",moduleName:"",appChannel:"",prePageID:"",prePageName:"",prePageURL:document.referrer,domID:"",domName:"",domURL:"",location:"",deviceID:"",deviceBrand:"",deviceModel:"",deviceLanguage:navigator.language,mac:"",osVer:"",networkType:"",networkProvider:"","var":{}},E=v.getCookie("ui");E&&(E=JSON.parse(E),D.userID=E.uid||""),e(document.referrer,D),$(function(){setTimeout(function(){var a=$("#ip-page-id").val();"PC-M-FD"==a&&k(),"PC-O-SR"!=a&&j();var b=v.getCookie("bf"),c=(v.getCookie("br"),window.location.href,{downResult:1,fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:""});if("PC-M-DOWN-SUC"==a){var b=v.getCookie("bf");b&&n(JSON.parse(b),c),c.downResult=1,l(c)}else if("PC-M-DOWN-FAIL"==a){var b=v.getCookie("bf");b&&n(JSON.parse(b),c),c.downResult=0,l(c)}},1e3)}),$(document).delegate("."+w.EVENT_NAME,"click",function(a){var b=$(this),c=b.attr(w.BILOG_CONTENT_NAME);console.log("cnt:",c),c&&setTimeout(function(){p(c,b)})}),c.exports={normalPageView:function(a){j(a)},clickEvent:function(a){var b=a.attr(w.BILOG_CONTENT_NAME);console.log("cnt-导出的:",b),b&&setTimeout(function(){p(b,a)})},viewExposure:function(a,b){var c="viewExposure";c&&setTimeout(function(){p(c,a,b)})},loginResult:function(a,b,c){var d="loginResult";d&&setTimeout(function(){p(d,"",b,c)})},searchResult:m,getBilogCommonData:function(){return e(document.referrer,D),D},reportToBlack:s}}),define("dist/cmd-lib/util",[],function(a,b,c){var d={throttle:function(a,b){var c,d;return function(e){var f=this,g=arguments,h=+new Date;c&&c+b>h?(clearTimeout(d),d=setTimeout(function(){c=h,a.apply(f,g)},b)):(c=h,a.apply(f,g))}},debounce:function(a,b){var c=0,d=this;return function(e){c&&clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},isWeChatBrow:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("micromessenger");return b?!0:!1},getWebAppUA:function(){var a=0,b=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(b)?a=1:/android/.test(b)&&(a=0),a},validateIE8:function(){return!$.browser.msie||"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},validateIE9:function(){return!$.browser.msie||"9.0"!=$.browser.version&&"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},getReferrer:function(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},getPageRef:function(a){var b=this,c=0;return(b.is360cookie(a)||b.is360cookie("360"))&&(c=1),b.is360wkCookie()&&(c=3),c},is360cookie:function(a){var b=this,c=b.getCookie("_r_so");if(c)for(var d=c.split("_"),e=0;e<d.length;e++)if(d[e]==a)return!0;return!1},add360wkCookie:function(){this.setCookieWithExpPath("_360hz","1",18e5,"/")},is360wkCookie:function(){return null==getCookie("_360hz")?!1:!0},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},findRefer:function(){var a=document.referrer,b="other";return/https?\:\/\/[^\s]*\/f\/.*$/g.test(a)?b="pindex":/https?\:\/\/[^\s]*\/d\/.*$/g.test(a)?b="landing":/https?\:\/\/[^\s]*\/c\/.*$/g.test(a)?b="pcat":/https?\:\/\/[^\s]*\/search\/.*$/g.test(a)?b="psearch":/https?\:\/\/[^\s]*\/t\/.*$/g.test(a)?b="ptag":/https?\:\/\/[^\s]*\/[u|n]\/.*$/g.test(a)?b="popenuser":/https?\:\/\/[^\s]*\/ucenter\/.*$/g.test(a)?b="puser":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.$/g.test(a)?b="ishareindex":/https?\:\/\/[^\s]*\/theme\/.*$/g.test(a)?b="theme":/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),
b},showAlertDialog:function(a,b,c){var d=$(".common-bgMask"),e=$(".common-dialog");e.find("h2[name='title']").text(a),e.find("span[name='content']").html(b),e.find("a.close,a.btn-dialog").unbind("click").click(function(){d.hide(),e.hide(),c&&!$(this).hasClass("close")&&c()}),d.show(),e.show()},browserVersion:function(a){var b=a.indexOf("Opera")>-1,c=a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b,d=a.indexOf("Edge")>-1,e=a.indexOf("Firefox")>-1,f=a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome"),g=a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1;if(c){var h=new RegExp("MSIE (\\d+\\.\\d+);");h.test(a);var i=parseFloat(RegExp.$1);return 7===i?"IE7":8===i?"IE8":9===i?"IE9":10===i?"IE10":11===i?"IE11":12===i?"IE12":"IE"}return b?"Opera":d?"Edge":e?"Firefox":f?"Safari":g?"Chrome":"unKnow"},getBrowserInfo:function(a){var b={},c=a.toLowerCase(),d=/(msie|firefox|chrome|opera|version|trident).*?([\d.]+)/,e=c.match(d);return e&&e.length>=2?(b.browser=e[1].replace(/version/,"'safari")||"unknow",b.ver=e[2]||"1.0.0"):(b.browser="unknow",b.ver="1.0.0"),b.browser+"/"+b.ver},timeFormat:function(a,b){if(!b)return"";var c=new Date(b),d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate(),g=c.getHours(),h=c.getMinutes(),i=c.getSeconds();return 10>e&&(e+="0"),10>f&&(f+="0"),10>g&&(g+="0"),10>h&&(h+="0"),10>i&&(i+="0"),"yyyy-mm-dd"===a?d+"-"+e+"-"+f:d+"-"+e+"-"+f+" "+g+":"+h+":"+i}};c.exports=d}),define("dist/report/config",[],function(a,b,c){return{COOKIE_FLAG:"_dplf",COOKIE_CIDE:"_dpcid",COOKIE_CUK:"cuk",COOKIE_TIMEOUT:3e6,SERVER_URL:"/",UACTION_URL:"/uAction",EVENT_NAME:"pc_click",CONTENT_NAME:"pcTrackContent",BILOG_CONTENT_NAME:"bilogContent",ishareTrackEvent:"_ishareTrackEvent",eventCookieFlag:"_eventCookieFlag",EVENT_REPORT:!1,AUTO_PV:!1}}),define("dist/cmd-lib/toast",[],function(a,b,c){!function(a,b,c){function d(b){this.options={text:"我是toast提示",icon:"",delay:3e3,callback:!1},b&&a.isPlainObject(b)&&a.extend(!0,this.options,b),this.init()}d.prototype.init=function(){var b=this;b.body=a("body"),b.toastWrap=a('<div class="ui-toast" style="position:fixed;min-width:200px;padding:0 10px;height:60px;line-height:60px;text-align:center;background:#000;opacity:0.8;filter:alpha(opacity=80);top:40%;left:50%;margin-left:-100px;margin-top:-30px;border-radius:4px;z-index:99999999">'),b.toastIcon=a('<i class="icon"></i>'),b.toastText=a('<span class="ui-toast-text" style="color:#fff">'+b.options.text+"</span>"),b._creatDom(),b.show(),b.hide()},d.prototype._creatDom=function(){var a=this;a.options.icon&&a.toastWrap.append(a.toastIcon.addClass(a.options.icon)),a.toastWrap.append(a.toastText),a.body.append(a.toastWrap)},d.prototype.show=function(){var a=this;setTimeout(function(){a.toastWrap.removeClass("hide").addClass("show")},50)},d.prototype.hide=function(){var a=this;setTimeout(function(){a.toastWrap.removeClass("show").addClass("hide"),a.toastWrap.remove(),a.options.callback&&a.options.callback()},a.options.delay)},a.toast=function(a){return new d(a)}}($,window,document)}),define("dist/common/bindphone",["dist/application/api"],function(a,b,c){function d(a){var b=a.replace(/\D/g,"").substring(0,11),c=b.length;return c>3&&8>c?b=b.replace(/^(...)/g,"$1 "):c>=8&&(b=b.replace(/^(...)(....)/g,"$1 $2 ")),b}function e(a){if("1"==a){var b=$("#mobile").val();$(".carding-error").hide(),b?($("#mobile").val(d(b)),$(".btn-binding-code").removeClass("btn-code-no")):$(".btn-binding-code").addClass("btn-code-no")}}var f=a("dist/application/api");$(function(){var a=$(".phone-choice"),b=($("#ip-page-type").val(),$("#ip-checkCode")),c=$("#mobile"),d=($(".login-input-item.img-code-item"),$(".carding-error span"));a.find(".phone-num").click(function(a){a.stopPropagation(),$(this).siblings(".phone-more").is(":hidden")?($(this).parent().addClass("phone-choice-show"),$(this).siblings(".phone-more").show()):($(this).parent().removeClass("phone-choice-show"),$(this).siblings(".phone-more").hide())}),$(".phone-more").find("a").click(function(){var b=$(this).find(".number-con").find("em").text();a.find(".phone-num").find("em").text(b),a.removeClass("phone-choice-show"),a.find(".phone-more").hide()}),$(document).on("keyup","#mobile",function(){e(1)}),$(document).keyup(function(a){13==a.keyCode&&$(".btn-phone-login").trigger("click")}),$(".btn-bind").click(function(){if(!$(this).hasClass("btn-code-no")){var a=c.val().replace(/\s/g,""),e=b.val(),f=$(".phone-num em").text();if(/^\s*$/g.test(a))return void d.text("请输入手机号码!").parent().show();if(/^\s*$/g.test(e))return void d.text("请输入验证码!").parent().show();var g={nationCode:f,mobile:a,smsId:b.attr("smsId"),checkCode:e};$.post("/pay/bindMobile",g,function(a){a&&("0"==a.code?($(".binging-main").hide(),$(".binging-success").show()):(d.text(a.msg).parent().show(),$(".carding-error").show()))},"json")}});var g=function(a,e,i,j){var k=$(".binging-main .yz-link");if(!$(k).hasClass("btn-code-no")){var l=c.val().replace(/\s/g,"");if(/^\s*$/g.test(l))return void d.text("请输入手机号码!").parent().show();d.parent().hide();var m=JSON.stringify({phoneNo:l,businessCode:$(k).siblings('input[name="businessCode"]').val(),appId:a,randstr:e,ticket:i,onOff:j});$.ajax({type:"POST",url:f.sms.getCaptcha,contentType:"application/json;charset=utf-8",dataType:"json",data:m,success:function(a){if(a)if("0"==a.code){b.removeAttr("smsId"),b.attr("smsId",a.data.smsId);var c=$(k).siblings(".yz-time");c.addClass("btn-code-no"),c.show(),$(k).hide(),$(".btn-none-bind").hide(),$(".btn-bind").show(),function e(){var a=c.text().replace(/秒后重发$/g,"");return a=/^\d+$/g.test(a)?Number(a):60,a&&a>=0&&c.text(--a+"秒后重发"),0>=a?(c.text("60秒后重发").hide(),void $(k).text("重获验证码").show()):void setTimeout(e,1e3)}()}else"2112"==a.code?h(g):"226"==a.code?d.text("图形验证码错误").parent().show():d.text(a.msg).parent().show();else d.text("发送短信失败").parent().show()}})}};$(".binging-main").delegate(".yz-link","click",function(){g("","","","")})});var g,h=function(a){var b="2071307690";g||(g=new TencentCaptcha(b,i,{bizState:a})),g.show()},i=function(a){0===a.ret&&a.bizState(a.appid,a.randstr,a.ticket,1)};return{showCaptcha:h}});var _hmt=_hmt||[];define("dist/common/baidu-statistics",["dist/application/method"],function(a,b,c){function d(a){if(a)try{!function(){var b=document.createElement("script");b.src="https://hm.baidu.com/hm.js?"+a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}()}catch(b){console.error(a,b)}}function e(a,b){var c=h[a];"fileDetailPageView"==a&&(b=c),"payFileResult"==a&&(b=$.extend(c,{payresult:b.payresult,orderid:b.orderNo,orderpaytype:b.orderpaytype})),"payVipResult"==a&&(b=$.extend(c,{payresult:b.payresult,orderid:b.orderNo,orderpaytype:b.orderpaytype})),"loginResult"==a&&(b=$.extend(c,{loginType:b.loginType,userid:b.userid,loginResult:b.loginResult})),_hmt.push(["_trackCustomEvent",a,b]),console.log("百度统计:",a,b)}var f=a("dist/application/method"),g=window.pageConfig&&window.pageConfig.params,h={fileDetailPageView:{loginstatus:f.getCookie("cuk")?1:0,userid:window.pageConfig&&window.pageConfig.userId||"",pageid:"PC-M-FD",fileid:g&&g.g_fileId,filecategoryname:g&&g.classidName1+"||"+g&&g.classidName2+"||"+g&&g.classidName3,filepaytype:g&&g.productType||"",filecootype:"",fileformat:g&&g.file_format||""},payFileResult:{loginstatus:f.getCookie("cuk")?1:0,userid:window.pageConfig&&window.pageConfig.userId||"",pageid:"PC-M-FD",pagename:"",payresult:"",orderid:"",orderpaytype:"",orderpayprice:"",fileid:"",filename:"",fileprice:"",filecategoryname:"",fileformat:"",filecootype:"",fileuploaderid:""},payVipResult:{loginstatus:f.getCookie("cuk")?1:0,userid:"",pageid:"PC-M-FD",pagename:"",payresult:"",orderid:"",orderpaytype:"",orderpayprice:"",fileid:"",filename:"",fileprice:"",filecategoryname:"",fileformat:"",filecootype:"",fileuploaderid:""},loginResult:{pagename:$("#ip-page-id").val(),pageid:$("#ip-page-name").val(),loginType:"",userid:"",loginResult:""}};return{initBaiduStatistics:d,handleBaiduStatisticsPush:e}}),define("dist/application/effect",["dist/application/checkLogin","dist/application/api","dist/application/method","dist/application/login","dist/cmd-lib/jqueryMd5","dist/application/iframe/iframe-parent","dist/application/iframe/messenger","dist/common/bilog","base64","dist/cmd-lib/util","dist/report/config","dist/cmd-lib/myDialog","dist/cmd-lib/toast","dist/common/bindphone","dist/common/baidu-statistics","dist/application/method"],function(a,b,c){function d(a,b,c){!f.getCookie("cuk")&&b?e.notifyLoginInterface(function(b){a&&a(b),c&&c(b),i(b)}):f.getCookie("cuk")&&e.getLoginData(function(b){a&&a(b),i(b)})}var e=a("dist/application/checkLogin"),f=a("dist/application/method");$("#unLogin").on("click",function(){e.notifyLoginInterface(function(a){i(a)})}),$(".btn-exit").on("click",function(){e.ishareLogout()}),$(".top-user-more .js-buy-open").click(function(){"vip"==$(this).attr("data-type")&&(location.href="/pay/vip.html")}),$(".vip-join-con").click(function(){f.compatibleIESkip("/node/rights/vip.html",!0)}),$(".btn-new-search").click(function(){if(new RegExp("/search/home.html").test(location.href)){var a=window.location.href.substring(0,window.location.href.indexOf("?"))+"?ft=all",b=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder");window.location.href=f.changeURLPar(a,"cond",encodeURIComponent(encodeURIComponent(b)))}else{var b=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder");b&&f.compatibleIESkip("/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(b)),!0)}}),$(".new-input").on("keydown",function(a){if(new RegExp("/search/home.html").test(location.href)&&13===a.keyCode){var b=window.location.href.substring(0,window.location.href.indexOf("?"))+"?ft=all",c=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder");window.location.href=f.changeURLPar(b,"cond",encodeURIComponent(encodeURIComponent(c)))}else if(13===a.keyCode){var c=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder");c&&f.compatibleIESkip("/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(c)),!0)}});var g=$(".new-detail-header"),h=g.height();$(window).scroll(function(){var a=$(this).scrollTop();a-h>=0?g.addClass("new-detail-header-fix"):g.removeClass("new-detail-header-fix")});var i=function(a){var b=$("#unLogin"),c=$("#haveLogin"),d=$(".btn-user-more"),e=$(".vip-status"),g=($(".icon-iShare"),$(".top-user-more"));d.text(1==a.isVip?"续费":"开通");var h=null;"6"===f.getCookie("file_state")&&$(".vip-title").eq(0).show(),1==a.isVip?(h=e.find('p[data-type="2"]'),h.find(".expire_time").html(a.expireTime),h.show().siblings().hide(),g.addClass("top-vip-more"),$(".isVip-show").find("span").html(a.expireTime),$(".isVip-show").removeClass("hide"),$(".vip-privilege-btn").html("立即续费")):1==a.userType?(h=e.find('p[data-type="3"]'),c.removeClass("user-con-vip"),h.show().siblings().hide()):0==a.isVip?c.removeClass("user-con-vip"):2==a.isVip&&$(".vip-title").hide(),b.hide(),c.find(".user-link .user-name").html(a.nickName),c.find(".user-link img").attr("src",a.photoPicURL),c.find(".top-user-more .name").html(a.nickName),c.find(".top-user-more img").attr("src",a.photoPicURL),c.show(),window.pageConfig.params&&(window.pageConfig.params.isVip=a.isVip);var i=a.fileDiscount;i?i/=100:i=.8,window.pageConfig.params&&(window.pageConfig.params.fileDiscount=i),$("#ip-uid").val(a.userId),$("#ip-isVip").val(a.isVip),$("#ip-mobile").val(a.mobile)};return{refreshTopBar:i,isLogin:d}}),define("dist/common/recommendConfigInfo",[],function(a,b,c){return{search:{descs:[{desc:"搜索页顶部banner",pageId:"PC_M_SR_ub",list:[]},{desc:"搜索页右侧banner",pageId:"PC_M_SR_rb",list:[]},{desc:"搜索页底部banner",pageId:"PC_M_SR_downb",list:[]}],pageIds:["PC_M_SR_ub","PC_M_SR_rb","PC_M_SR_downb"]},paySuccess:{descs:[{desc:"支付成功页面banner",pageId:"PC_M_PAY_SUC_banner",list:[]}],pageIds:["PC_M_PAY_SUC_banner"]},downSuccess:{descs:[{desc:"下载成功页面banner",pageId:"PC_M_DOWN_SUC_banner",list:[]}],pageIds:["PC_M_DOWN_SUC_banner"]},personalCenterHome:{descs:[{desc:"个人中心首页,bannber",pageId:"PC_M_USER_banner",list:[]}],pageIds:["PC_M_USER_banner"]},myVipRightsBanner:{descs:[{desc:"个人中心我的vip,bannber",pageId:"PC_M_USER_VIP_banner",list:[]}],pageIds:["PC_M_USER_VIP_banner"]},myVipRightsList:{descs:[{desc:"个人中心首页/我的VIP页的VIP权益缩略图",pageId:"PC_M_USER_vip",list:[]}],pageIds:["PC_M_USER_vip"]}}}),define("dist/common/template/swiper_tmp.html",[],'<!--轮播图-->\n    <div class="swiper-container {{className}}">\n         <div class="swiper-wrapper">\n         {{each topBanner}}\n            <div class="swiper-slide" >\n               <a href={{ topBanner[$index].linkUrl}} target="_blank">\n                 <img class="swiper-slide-img" src={{ topBanner[$index].imagUrl}}>\n               </a>\n            </div>\n            {{/each}} \n         </div>\n         {{if hasDeleteIcon}}\n        <span class="icon close-swiper"><span>\n        {{/if}}\n         \n    </div>            \n'),define("dist/common/coupon/couponIssue",["dist/cmd-lib/toast","dist/application/method","dist/cmd-lib/util","dist/cmd-lib/loading","dist/application/checkLogin","dist/application/api","dist/application/login","dist/cmd-lib/jqueryMd5","dist/application/iframe/iframe-parent","dist/application/iframe/messenger","dist/common/bilog","base64","dist/report/config","dist/cmd-lib/myDialog","dist/common/bindphone","dist/common/baidu-statistics"],function(a,b,c){a("dist/cmd-lib/toast");var d=a("dist/application/method"),e=a("dist/cmd-lib/util"),f=d.getParam("fid");a("dist/cmd-lib/loading");var g=a("dist/application/checkLogin"),h=a("dist/common/coupon/template/couponCard.html"),i=a("dist/application/api"),j={_index:0,pageType:1,type:4,isFirstCashBuy:2,isFirstVipBuy:2,dowStatus:2,isVip:0,isFreeFile:0,userId:"",pageUrl:"",initial:function(){var a=location.pathname.split("/");j.pageUrl=a[a.length-1];var b=d.getQueryString("unloginFlag");(1==j.pageType||2==j.pageType)&&(b||g.getUserData(function(a){j.isVip=a.isVip,j.isFirstCashBuy=a.isFirstCashBuy,j.isFirstVipBuy=a.isFirstVipBuy,j.dowStatus=a.dowStatus,j.userId=a.userId,j.confirmCouponType(),4!=j.type&&"downsucc.html"!=j.pageUrl&&j.getCouponList()}))},domChange:function(){1==j.type&&1==j.isFirstCashBuy&&($(".couponContainer").show(),$(".previousContainer").hide(),0==j.isVip?($(".bottom-privilege").removeClass("hide"),$(".down-succ-btn[data-type=default]").show().css("display","block").siblings("a").hide(),$(".give-coupon-wrap").css("border-bottom","none!important"),$(".couponContainer .carding-er-code").hide()):($(".bottom-privilege").addClass("hide"),$(".down-succ-btn[data-type=default]").show().css("display","hide"),$(".couponContainer .carding-er-code").show())),2==j.type&&1==j.isFirstVipBuy&&($(".couponContainer").show(),$(".previousContainer").hide(),$(".bottom-privilege").hide(),$(".couponContainer .carding-er-code").show()),3==j.type&&($(".couponContainer").show(),$(".previousContainer").hide(),0==j.isVip?$(".downSucc-privi").removeClass("hide"):$(".downSucc-privi").addClass("hide"),$(".carding-er-code").show(),$(".down-succ-btn[data-type=default]").addClass("hide").hide(),$(".give-coupon-wrap").css("border-bottom","none!important"))},confirmCouponType:function(){var a=0,b=Number($("#ip-type").val());"downsucc.html"==j.pageUrl?(j.getFileType(f),a=1,1==j.dowStatus&&1==j.isFreeFile&&1!=localStorage.getItem("FirstDown")&&(j.type=3)):"success.html"==j.pageUrl&&(a=2,2==b&&1==j.isFirstCashBuy&&d.getCookie("FirstCashBuy")!=j.userId?j.type=1:0==b&&1==j.isFirstVipBuy&&d.getCookie("FirstVipBuy")!=j.userId&&(j.type=2)),j.pageType=a},getCouponList:function(){var a="/node/coupon/issueCoupon?type="+j.type;$.get(a,function(a){if(0==a.code&&a.data&&a.data.list.length>0){var b=template.compile(h)({data:a.data});$(".give-title").text(a.data.prompt),$(".give-coupon-list").html(b),j.domChange(),j.bringCouponClick(),$(".down-carding-main").addClass("coupon-carding-item"),$(".carding-vip-main").addClass("coupon-carding-item"),1==j.type?d.setCookieWithExpPath("FirstCashBuy",j.userId,2592e6,"/"):2==j.type?d.setCookieWithExpPath("FirstVipBuy",j.userId,2592e6,"/"):3==j.type&&d.setCookieWithExpPath("FirstDown",j.userId,2592e6,"/")}})},bringCouponClick:function(){$(".btn-receive").click(function(){j.receiveCoupon(j.type,1)})},closeTipByClick:function(){$(".coupon-info-top").on("click",".btn-no-user",function(){$(".coupon-info-top").hide()})},showTips:function(a){setTimeout(function(){0==a?$(".dialog-coupon.dialog-coupon-success").show():$(".dialog-coupon.dialog-coupon-fail").show()},1500)},receiveCoupon:function(a,b){var c={source:b,type:a};c=JSON.stringify(c),$("body").loading({name:"download",title:"请求中"}),$.ajax({type:"POST",url:i.coupon.rightsSaleVouchers,contentType:"application/json;charset=utf-8",dataType:"json",data:c,success:function(a){0==a.code?a.data&&(a.data.list.length>0?e.showAlertDialog("温馨提示","领取成功！"):e.showAlertDialog("温馨提示",a.msg)):e.showAlertDialog("温馨提示",a.msg)},complete:function(){$("body").closeLoading("download")}})},getFileType:function(a){var b={id:a};$.get("/node/confirmType",b,function(a){0==a.code&&"free"==a.fileType&&(j.isFreeFile=1,1==j.dowStatus&&1!=localStorage.getItem("FirstDown")&&(j.type=3,j.getCouponList()))})}};setTimeout(function(){j.initial()},2e3)}),define("dist/cmd-lib/loading",[],function(a,b,c){!function(a,b,c){a.fn.loading=function(b){var c=a(this),d=this;return this.each(function(){var e="",f={direction:"column",animateIn:"fadeInNoTransform",title:"提交中...",name:"loadingName",type:"origin",discription:"",titleColor:"rgba(255,255,255,0.7)",discColor:"rgba(255,255,255,0.7)",loadingWidth:100,loadingBg:"rgba(0, 0, 0, 0.6)",borderRadius:6,loadingMaskBg:"rgba(0,0,0,0.6)",zIndex:1000001,originDivWidth:10,originDivHeight:10,originWidth:4,originHeight:4,originBg:"#fefefe",smallLoading:!1,imgSrc:"",imgDivWidth:80,imgDivHeight:80,flexCenter:!1,flexDirection:"row",mustRelative:!1,delay:2e3,isClose:!0},g=a.extend(f,b||{});"body"==c.selector?(a("body,html").css({overflow:"hidden"}),e="fixed"):g.mustRelative?(c.css({position:"relative"}),e="absolute"):e="absolute",f._showOriginLoading=function(){var b=g.smallLoading?0:"-10px";"row"==g.direction&&(b="-6px"),d.cpt_loading_mask=a('<div class="cpt-loading-mask animated '+g.animateIn+" "+g.direction+'" data-name="'+g.name+'"></div>').css({background:g.loadingMaskBg,"z-index":g.zIndex,position:e}).appendTo(c),d.div_loading=a('<div class="div-loading"></div>').css({background:g.loadingBg,width:g.loadingWidth,height:g.loadingHeight,"-webkit-border-radius":g.borderRadius,"-moz-border-radius":g.borderRadius,"border-radius":g.borderRadius}).appendTo(d.cpt_loading_mask),g.flexCenter&&d.div_loading.css({display:"-webkit-flex",display:"flex","-webkit-flex-direction":g.flexDirection,"flex-direction":g.flexDirection,"-webkit-align-items":"center","align-items":"center","-webkit-justify-content":"center","justify-content":"center"}),d.loading_title=a('<p class="loading-title txt-textOneRow"></p>').css({color:g.titleColor}).html(g.title).appendTo(d.div_loading),d.loading=a('<div class="loading '+g.type+'"></div>').css({width:g.originDivWidth,height:g.originDivHeight}).appendTo(d.div_loading),d.loading_discription=a('<p class="loading-discription txt-textOneRow"></p>').css({color:g.discColor}).html(g.discription).appendTo(d.div_loading),"origin"==g.type&&(d.loadingOrigin=a('<div class="div-loadingOrigin"><span></span></div><div class="div-loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div>').appendTo(d.loading),d.loadingOrigin.children().css({"margin-top":b,"margin-left":b,width:g.originWidth,height:g.originHeight,background:g.originBg})),"pic"==g.type&&(d.loadingPic=a('<img src="'+g.imgSrc+'" alt="loading" />').appendTo(d.loading)),d.cpt_loading_mask.on("touchstart touchend touchmove click",function(a){a.stopPropagation(),a.preventDefault()})},f._createLoading=function(){a(".cpt-loading-mask[data-name="+g.name+"]").length>0||f._showOriginLoading()},f._createLoading(),f.close=function(){a(".cpt-loading-mask[data-name="+g.name+"]").remove()}})},a.extend(a.fn,{closeLoading:function(b){var b=b||"";if(a("body,html").css({overflow:"auto"}),""==b)a(".cpt-loading-mask").remove();else{var c=b||"loadingName";a(".cpt-loading-mask[data-name="+c+"]").remove()}}})}(jQuery,window,document)}),define("dist/common/coupon/template/couponCard.html",[],'\n{{each data.list as v i}}\n<li class="coupon-li">\n    <div class="coupon-item">\n        <i class="bg-coupon"></i>\n        <div class="price-wrap fl">\n            <p>{{if v.type==1}}¥{{/if}} <strong class="price">{{v.discount?v.discount:v.couponAmount}}</strong>{{if v.type==2}}折{{/if}}</p>\n        </div>\n        <div class="coupon-info-con">\n            <p class="coupon-text">{{v.content}}</p>\n            <p class="coupon-time">{{if v.dateNumber}}{{v.dateNumber}}天内有效{{else}}{{v.timeval}}{{/if}}</p>\n        </div>\n    </div>\n</li>\n{{/each}}\n');