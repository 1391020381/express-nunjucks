/*! ishare_pc_website
*author:Jersey */
define("dist/detail/success",["../application/method","../application/checkLogin","../application/api","../cmd-lib/util","../common/bindphone","../common/coupon/couponIssue","../cmd-lib/toast","../cmd-lib/loading","../common/coupon/template/couponCard.html","../common/bilog","base64","../report/config"],function(a,b,c){function d(){m.getCookie("cuk")&&n.getLoginData(function(a){s=a,t.isVip=parseInt(a.isVip,10),j(a),i(a)}),m.getCookie("cuk")||s||n.notifyLoginInterface(function(a){s=a,t.isVip=parseInt(a.isVip,10),j(a),i(a)})}function e(a,b){var c=m.getCookie("visitorId");$.get("/pay/bindUnlogin?ts="+(new Date).getTime(),{visitorId:c,userId:a,nickName:b},function(a){$.toast({text:a.msg,callback:function(){location.reload()}})})}function f(){$(".previousContainer").hide(),$(".unloginStatus").show(),$(".carding-share").hide(),$(".down-carding-main").addClass("coupon-carding-item"),$(".carding-success-item").css("padding-bottom","60px"),$(".xbsd i").addClass("ico-data ico-"+r),setTimeout(function(){h()},200)}function g(){var a=m.getCookie("visitorId");l&&(a=l);var b=m.getQueryString("fid");$.post("/pay/paperDown",{vuk:a,fid:b},function(a){0==a.code?location.href=a.data.dowUrl:41003==a.code?$.toast({text:a.msg}):$.toast({text:a.msg})})}function h(){var a=window.pageConfig&&window.pageConfig.params?window.pageConfig.params:null,b=a&&a.classid1?a.classid1+"":"",c=a&&a.classid2?"-"+a.classid2:"",d=a&&a.classid3?"-"+a.classid3:"",e=b+c+d,f=a?a.g_fileId||"":"",g=$.loginPop("login_wx_code",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:"ishare",popup:"hidden",clsId:e,fid:f}),h='<iframe src="'+g+'" style="width:100%;height:480px" name="iframe_a"  frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="yes"></iframe>';$(".carding-info-bottom.unloginStatus .qrWrap").html(h)}function i(a){if(a.mobile?$(".carding-info-bottom").addClass("carding-binding-ok"):$(".carding-binding").show(),"1"==a.isVip){var b=m.compareTime(new Date,new Date(a.expireTime));5>=b?($(".down-succ-title").html("您的VIP将于"+a.expireTime+"到期").show(),$(".down-succ-btn[data-type=vip]").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").show()):a.privilege<=5?($(".down-succ-title").html("您的VIP下载特权仅剩"+a.privilege+"次！").show(),$(".down-succ-btn[data-type=privilege]").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").show()):($(".btn-carding-back").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").hide())}else $(".down-succ-btn[data-type=default]").show().css("display","block").siblings("a").hide(),$(".new-success-item .bottom-privilege").removeClass("hide")}function j(a){var b=$("#unLogin"),c=$("#haveLogin"),d=$(".top-user-more"),e=$(".icon-iShare-text"),f=$(".btn-user-more"),g=$(".vip-status"),h=$(".btn-join-vip"),i=$(".icon-iShare");e.html("1"===a.isVip?"续费VIP":"开通VIP"),f.text("1"===a.isVip?"续费":"开通"),"0"==a.isVip?$(".open-vip").show().siblings("a").hide():$(".xf-open-vip").show().siblings("a").hide();var j=null;if(1==a.isVip?(j=g.find('p[data-type="2"]'),j.find(".expire_time").html(a.expireTime),j.show().siblings().hide(),d.addClass("top-vip-more")):1==a.userType?(j=g.find('p[data-type="3"]'),j.show().siblings().hide()):0==a.isVip&&i.removeClass("icon-vip"),b.hide(),c.find(".icon-detail").html(a.nickName),c.find("img").attr("src",a.weiboImage),d.find("img").attr("src",a.weiboImage),d.find("#userName").html(a.nickName),c.show(),$(".user-avatar img").attr("src",a.weiboImage),$(".name-wrap .name-text").html(a.nickName),"1"==a.isVip){var k="您的VIP将于"+a.expireTime+"到期,剩余"+a.privilege+"次下载特权";$(".detail-right-normal-wel").html(k),$(".detail-right-vip-wel").html("会员尊享权益"),$(".btn-mui").hide(),$("#memProfit").html("VIP权益"),$(".expire-time").show().find("span").html(a.expireTime),h.find('p[data-type="2"]').show().siblings("a").hide(),$(".vip-expire-time").show().find("span").html(a.expireTime),a.privilege&&a.privilege<0&&h.find('p[data-type="3"]').show().siblings("a").hide()}else $(".mui-privilege-list li").removeClass("hide"),h.find('p[data-type="1"]').show().siblings("a").hide()}function k(){var a=$(".more-nav"),b=$("#search-detail-input"),c=$(".detail-lately");a.on("mouseover",function(){var a=$(this);a.hasClass("hover")||$(this).addClass("hover")}),a.on("mouseleave",function(){var a=$(this);a.hasClass("hover")&&$(this).removeClass("hover")}),b.on("keyup",function(a){var b=a.keyCode;$(this).val()&&v($(this).val()),13===b&&w($(this).val())}),b.on("focus",function(){var a=$(".lately-list"),b=a.find("li").length;return b>0?c.show():c.hide(),!0}),$(".btn-new-search").on("click",function(){var a=$("#search-detail-input").val();a&&w(a)}),$(document).on("click",":not(.new-search)",function(a){var b=$(a.target);b.hasClass("new-input")||c.hide()}),c.on("click",function(a){a.stopPropagation()}),$(".user-login,.login-open-vip").on("click",function(){m.getCookie("cuk")||n.notifyLoginInterface(function(a){j(a)})}),$(".btn-exit").on("click",function(){n.ishareLogout()})}var l,m=a("../application/method"),n=a("../application/checkLogin"),o=a("../cmd-lib/util"),p=m.getParam("fid"),q=m.getParam("name"),r=m.getParam("format");a("../common/bindphone"),a("../common/coupon/couponIssue"),a("../common/bilog");var s=null,t={};k();var u=m.getQueryString("unloginFlag");u?($("#filename").text(q||""),r&&$(".xbsd i").addClass("ico-data ico-"+r),$(".pay-ok-text").hide(),$(".unloginTop").show(),$(".carding-data-pay-con").hide(),m.getCookie("cuk")?($(".carding-info-bottom.unloginStatus").remove(),n.getLoginData(function(a){s=a,l=a.userId,t.isVip=parseInt(a.isVip,10),j(a),i(a)})):(f(),n.listenLoginStatus(function(a){t.isVip=parseInt(a.isVip,10),s=a,e(a.userId,a.nickName)}),setTimeout(function(){g()},1e3))):d(),$(".unloginStatus .quick-down-a").click(function(){g()}),$(".btn-carding-back").on("click",function(){window.location.href="/f/"+p+".html"}),$(".js-buy-open").click(function(){var a=["","免费","下载券","现金","仅供在线阅读","VIP免费","VIP专享"],b=a[m.getCookie("file_state")],c=1==m.getCookie("isVip")?"续费":"充值",d=$(this).data("type"),e=o.getPageRef(p),f="?fid="+p+"&ref="+e;"vip"===d||"default"===d?(__pc__.gioTrack("vipRechargeEntryClick",{entryName_var:b,entryType_var:c}),m.compatibleIESkip("/pay/vip.html"+f,!0)):"privilege"===d&&m.compatibleIESkip("/pay/privilege.html"+f,!0)});var v=function(a){$.getScript("//sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd="+encodeURIComponent(a)+"&p=3&cb=window.baidu_searchsug&t="+(new Date).getTime())};window.baidu_searchsug=function(a){var b=$("#search-detail-input").val();if(b=b?b.replace(/^\s+|\s+$/gm,""):"",b.length>0&&a&&a.s){var c=a.s||[];if(c.length>0){for(var d=Math.min(c.length,10),e=[],f=0;d>f;f++){var g="/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(c[f]));e.push('<li><a href="'+g+'"  data-html="'+c[f]+'" >'+c[f].replace(new RegExp("("+b+")","gm"),"<span class='search-font'>$1</span>")+"</a></li>")}$(".lately-list").html(e.join("")).parent(".detail-lately").show()}}};var w=function(a){var b=a?a.replace(/^\s+|\s+$/gm,""):"";window.location.href="/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(b))}}),define("dist/application/method",[],function(require,exports,module){return{keyMap:{ishare_detail_access:"ISHARE_DETAIL_ACCESS",ishare_office_detail_access:"ISHARE_OFFICE_DETAIL_ACCESS"},async:function(a,b,c,d,e){$.ajax(a,{type:d||"post",data:e,async:!1,dataType:"json",headers:{"cache-control":"no-cache",Pragma:"no-cache"}}).done(function(a){b&&b(a)}).fail(function(a){console.log("error==="+c)})},get:function(a,b,c){$.ajaxSetup({cache:!1}),this.async(a,b,c,"get")},post:function(a,b,c,d,e){this.async(a,b,c,d,e)},postd:function(a,b,c){this.async(a,b,!1,!1,c)},random:function(a,b){return Math.floor(Math.random()*(b-a))+a},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},setCookieWithExp:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),d?document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString():document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},delCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1);var e=this.getCookie(a);null!=e&&(b&&c?document.cookie=a+"= '' ;domain="+c+";expires="+d.toGMTString()+";path="+b:b?document.cookie=a+"= '' ;expires="+d.toGMTString()+";path="+b:document.cookie=a+"="+e+";expires="+d.toGMTString())},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},url2Obj:function(a){for(var b={},c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b},getParam:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},getLocalData:function(a){try{if(localStorage&&localStorage.getItem){var b=localStorage.getItem(a);return null===b?null:JSON.parse(b)}return console.log("浏览器不支持html localStorage getItem"),null}catch(c){return null}},setLocalData:function(a,b){localStorage&&localStorage.setItem?(localStorage.removeItem(a),localStorage.setItem(a,JSON.stringify(b))):console.log("浏览器不支持html localStorage setItem")},browserType:function(){var a=navigator.userAgent,b=a.indexOf("Opera")>-1;return b?"Opera":a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b?"IE":a.indexOf("Edge")>-1?"Edge":a.indexOf("Firefox")>-1?"Firefox":a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome")?"Safari":a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1?"Chrome":void 0},validateIE9:function(){return!(!$.browser.msie||"9.0"!==$.browser.version&&"8.0"!==$.browser.version&&"7.0"!==$.browser.version&&"6.0"!==$.browser.version)},compareTime:function(a,b){return a&&b?Math.abs((b-a)/1e3/60/60/24):""},changeURLPar:function(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText)}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},getUrlAllParams:function(a){if("undefined"==typeof a)var b=decodeURI(location.search);else var b="?"+a.split("?")[1];var c=new Object;if(-1!=b.indexOf("?"))for(var d=b.substr(1),e=d.split("&"),f=0;f<e.length;f++)c[e[f].split("=")[0]]=decodeURI(e[f].split("=")[1]);return c},compatibleIESkip:function(a,b){var c=document.createElement("a");c.href=a,c.style.display="none",b&&(c.target="_blank"),document.body.appendChild(c),c.click()}}}),define("dist/application/checkLogin",["dist/application/method","dist/application/api"],function(a,b,c){var d=a("dist/application/method"),e=a("dist/application/api");c.exports={getIds:function(){var a=window.pageConfig&&window.pageConfig.params?window.pageConfig.params:null,b=window.pageConfig&&window.pageConfig.access?window.pageConfig.access:null,c=[];a&&(a.classid1&&c.push(a.classid1),a.classid2&&c.push(a.classid2),a.classid3&&c.push(a.classid3));var d=a&&c.length>0?c.join("-"):"",e=b?b.fileId||a.g_fileId||"":"",f=window.pageConfig&&window.pageConfig.classIds?window.pageConfig.classIds:"";return!d&&(d=f),{clsId:d,fid:e}},notifyLoginInterface:function(a){var b=this;if(!d.getCookie("cuk")){__pc__.push(["pcTrackContent","loginDialogLoad"]);var c=window.pageConfig&&window.pageConfig.page?window.pageConfig.page.ptype||"index":"index";$.loginPop("login",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:c,clsId:this.getIds().clsId,fid:this.getIds().fid},function(c){b.getLoginData(a)})}},listenLoginStatus:function(a){var b=this;$.loginPop("login_wx_code",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:"ishare",popup:"hidden",clsId:this.getIds().clsId,fid:this.getIds().fid},function(){b.getLoginData(a)})},notifyCheckInterface:function(){d.getCookie("cuk")&&$.loginPop("checkCode",{terminal:"PC",businessSys:"ishare",domain:document.domain,clsId:this.getIds().clsId,fid:this.getIds().fid},function(a){"0"==a.code&&d.get(e.user.getJessionId,function(a){},"")})},syncUserInfoInterface:function(a){var b=this;d.getCookie("cuk")&&d.get(e.user.getJessionId,function(c){0==c.code&&b.getLoginData(a)},"")},getUserData:function(a){d.getCookie("cuk")&&d.get(e.sale.querySeniority,function(b){b&&0==b.code&&a(b.data)},"")},getLoginData:function(a){var b=this;d.get(e.user.login,function(c){if(c&&0==c.code&&c.data){if(a&&"function"==typeof a){a(c.data);try{window.pageConfig.params.isVip=c.data.isVip,window.pageConfig.page.uid=c.data.userId}catch(e){}}try{var f={uid:c.data.userId,isVip:c.data.isVip,tel:c.data.mobile};d.setCookieWithExpPath("ui",JSON.stringify(f),18e5,"/")}catch(g){}}else c&&40001==c.code&&b.ishareLogout()})},ishareLogout:function(){d.delCookie("cuk","/",".sina.com.cn"),d.delCookie("cuk","/",".iask.com.cn"),d.delCookie("cuk","/",".iask.com"),d.delCookie("sid","/",".iask.sina.com.cn"),d.delCookie("sid","/",".iask.com.cn"),d.delCookie("sid","/",".sina.com.cn"),d.delCookie("sid","/",".ishare.iask.com.cn"),d.delCookie("sid","/",".office.iask.com"),d.delCookie("sid_ishare","/",".iask.sina.com.cn"),d.delCookie("sid_ishare","/",".iask.com.cn"),d.delCookie("sid_ishare","/",".sina.com.cn"),d.delCookie("sid_ishare","/",".ishare.iask.com.cn"),d.delCookie("_1st_l","/"),d.delCookie("ui","/"),$.post("/logout",function(){window.location.href=window.location.href})}}}),define("dist/application/api",[],function(a,b,c){var d="/gateway/pc",e="/gateway";c.exports={user:{login:d+"/usermanage/checkLogin",loginOut:"",collect:d+"/usermanage/collect",getJessionId:d+"/usermanage/getJessionId",getSessionInfo:d+"/usermanage/getSessionInfo"},sale:{querySeniority:d+"/sale/querySeniority"},normalFileDetail:{addComment:d+"/fileSync/addComment",reportContent:d+"/fileSync/addFeedback",isStore:d+"/fileSync/getFileCollect",collect:d+"/fileSync/collect",filePreDownLoad:d+"/action/downloadCheck",fileDownLoad:d+"/action/downloadUrl",appraise:d+"/fileSync/appraise",getPrePageInfo:d+"/fileSync/prePageInfo",hasDownLoad:d+"/fileSync/isDownload"},officeFileDetail:{},search:{byPosition:d+"/operating/byPosition"},sms:{getCaptcha:d+"/usermanage/getSmsYzCode"},pay:{successBuyDownLoad:d+"/action/downloadNow"},special:{fileSaveOrupdate:e+"/comment/collect/fileSaveOrupdate"}}}),define("dist/cmd-lib/util",[],function(a,b,c){var d={throttle:function(a,b){var c,d;return function(e){var f=this,g=arguments,h=+new Date;c&&c+b>h?(clearTimeout(d),d=setTimeout(function(){c=h,a.apply(f,g)},b)):(c=h,a.apply(f,g))}},debounce:function(a,b){var c=0,d=this;return function(e){c&&clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},isWeChatBrow:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("micromessenger");return b?!0:!1},getWebAppUA:function(){var a=0,b=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(b)?a=1:/android/.test(b)&&(a=0),a},validateIE8:function(){return!$.browser.msie||"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},validateIE9:function(){return!$.browser.msie||"9.0"!=$.browser.version&&"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},getReferrer:function(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},getPageRef:function(a){var b=this,c=0;return(b.is360cookie(a)||b.is360cookie("360"))&&(c=1),b.is360wkCookie()&&(c=3),c},is360cookie:function(a){var b=this,c=b.getCookie("_r_so");if(c)for(var d=c.split("_"),e=0;e<d.length;e++)if(d[e]==a)return!0;return!1},add360wkCookie:function(){this.setCookieWithExpPath("_360hz","1",18e5,"/")},is360wkCookie:function(){return null==getCookie("_360hz")?!1:!0},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},findRefer:function(){var a=document.referrer,b="other";return/https?\:\/\/[^\s]*\/f\/.*$/g.test(a)?b="pindex":/https?\:\/\/[^\s]*\/d\/.*$/g.test(a)?b="landing":/https?\:\/\/[^\s]*\/c\/.*$/g.test(a)?b="pcat":/https?\:\/\/[^\s]*\/search\/.*$/g.test(a)?b="psearch":/https?\:\/\/[^\s]*\/t\/.*$/g.test(a)?b="ptag":/https?\:\/\/[^\s]*\/[u|n]\/.*$/g.test(a)?b="popenuser":/https?\:\/\/[^\s]*\/ucenter\/.*$/g.test(a)?b="puser":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.$/g.test(a)?b="ishareindex":/https?\:\/\/[^\s]*\/theme\/.*$/g.test(a)?b="theme":/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},showAlertDialog:function(a,b,c){var d=$(".common-bgMask"),e=$(".common-dialog");e.find("h2[name='title']").text(a),e.find("span[name='content']").html(b),e.find("a.close,a.btn-dialog").unbind("click").click(function(){d.hide(),e.hide(),c&&!$(this).hasClass("close")&&c()}),d.show(),e.show()},browserVersion:function(a){var b=a.indexOf("Opera")>-1,c=a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b,d=a.indexOf("Edge")>-1,e=a.indexOf("Firefox")>-1,f=a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome"),g=a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1;if(c){var h=new RegExp("MSIE (\\d+\\.\\d+);");h.test(a);var i=parseFloat(RegExp.$1);return 7===i?"IE7":8===i?"IE8":9===i?"IE9":10===i?"IE10":11===i?"IE11":12===i?"IE12":"IE"}return b?"Opera":d?"Edge":e?"Firefox":f?"Safari":g?"Chrome":"unKnow"},getBrowserInfo:function(a){var b={},c=a.toLowerCase(),d=/(msie|firefox|chrome|opera|version|trident).*?([\d.]+)/,e=c.match(d);return e&&e.length>=2?(b.browser=e[1].replace(/version/,"'safari")||"unknow",b.ver=e[2]||"1.0.0"):(b.browser="unknow",b.ver="1.0.0"),b.browser+"/"+b.ver}};c.exports=d}),define("dist/common/bindphone",["dist/application/api"],function(a,b,c){function d(a){var b=a.replace(/\D/g,"").substring(0,11),c=b.length;return c>3&&8>c?b=b.replace(/^(...)/g,"$1 "):c>=8&&(b=b.replace(/^(...)(....)/g,"$1 $2 ")),b}function e(a){if("1"==a){var b=$("#mobile").val();$(".carding-error").hide(),b?($("#mobile").val(d(b)),$(".btn-binding-code").removeClass("btn-code-no")):$(".btn-binding-code").addClass("btn-code-no")}}var f=a("dist/application/api");$(function(){var a=$(".phone-choice"),b=($("#ip-page-type").val(),$("#ip-checkCode")),c=$("#mobile"),d=($(".login-input-item.img-code-item"),$(".carding-error span"));a.find(".phone-num").click(function(a){a.stopPropagation(),$(this).siblings(".phone-more").is(":hidden")?($(this).parent().addClass("phone-choice-show"),$(this).siblings(".phone-more").show()):($(this).parent().removeClass("phone-choice-show"),$(this).siblings(".phone-more").hide())}),$(".phone-more").find("a").click(function(){var b=$(this).find(".number-con").find("em").text();a.find(".phone-num").find("em").text(b),a.removeClass("phone-choice-show"),a.find(".phone-more").hide()}),$(document).on("keyup","#mobile",function(){e(1)}),$(document).keyup(function(a){13==a.keyCode&&$(".btn-phone-login").trigger("click")}),$(".btn-bind").click(function(){if(!$(this).hasClass("btn-code-no")){var a=c.val().replace(/\s/g,""),e=b.val(),f=$(".phone-num em").text();if(/^\s*$/g.test(a))return void d.text("请输入手机号码!").parent().show();if(/^\s*$/g.test(e))return void d.text("请输入验证码!").parent().show();var g={nationCode:f,mobile:a,smsId:b.attr("smsId"),checkCode:e};$.post("/pay/bindMobile",g,function(a){a&&("0"==a.code?($(".binging-main").hide(),$(".binging-success").show()):(d.text(a.msg).parent().show(),$(".carding-error").show()))},"json")}});var g=function(a,e,i,j){var k=$(".binging-main .yz-link");if(!$(k).hasClass("btn-code-no")){var l=c.val().replace(/\s/g,"");if(/^\s*$/g.test(l))return void d.text("请输入手机号码!").parent().show();d.parent().hide();var m=JSON.stringify({phoneNo:l,businessCode:$(k).siblings('input[name="businessCode"]').val(),appId:a,randstr:e,ticket:i,onOff:j});$.ajax({type:"POST",url:f.sms.getCaptcha,contentType:"application/json;charset=utf-8",dataType:"json",data:m,success:function(a){if(a)if("0"==a.code){b.removeAttr("smsId"),b.attr("smsId",a.data.smsId);var c=$(k).siblings(".yz-time");c.addClass("btn-code-no"),c.show(),$(k).hide(),$(".btn-none-bind").hide(),$(".btn-bind").show(),function e(){var a=c.text().replace(/秒后重发$/g,"");return a=/^\d+$/g.test(a)?Number(a):60,a&&a>=0&&c.text(--a+"秒后重发"),0>=a?(c.text("60秒后重发").hide(),void $(k).text("重获验证码").show()):void setTimeout(e,1e3)}()}else"2112"==a.code?h(g):"226"==a.code?d.text("图形验证码错误").parent().show():d.text(a.msg).parent().show();else d.text("发送短信失败").parent().show()}})}};$(".binging-main").delegate(".yz-link","click",function(){g("","","","")})});var g,h=function(a){var b="2071307690";g||(g=new TencentCaptcha(b,i,{bizState:a})),g.show()},i=function(a){0===a.ret&&a.bizState(a.appid,a.randstr,a.ticket,1)}}),define("dist/common/coupon/couponIssue",["dist/cmd-lib/toast","dist/application/method","dist/cmd-lib/util","dist/cmd-lib/loading","dist/application/checkLogin","dist/application/api"],function(a,b,c){a("dist/cmd-lib/toast");var d=a("dist/application/method"),e=a("dist/cmd-lib/util"),f=d.getParam("fid");a("dist/cmd-lib/loading");var g=a("dist/application/checkLogin"),h=a("dist/common/coupon/template/couponCard.html"),i={_index:0,pageType:1,type:4,isFirstCashBuy:2,isFirstVipBuy:2,dowStatus:2,isVip:0,isFreeFile:0,userId:"",pageUrl:"",initial:function(){var a=location.pathname.split("/");i.pageUrl=a[a.length-1];var b=d.getQueryString("unloginFlag");(1==i.pageType||2==i.pageType)&&(b||g.getUserData(function(a){i.isVip=a.isVip,i.isFirstCashBuy=a.isFirstCashBuy,i.isFirstVipBuy=a.isFirstVipBuy,i.dowStatus=a.dowStatus,i.userId=a.userId,i.confirmCouponType(),4!=i.type&&"downsucc.html"!=i.pageUrl&&i.getCouponList()}))},domChange:function(){1==i.type&&1==i.isFirstCashBuy&&($(".couponContainer").show(),$(".previousContainer").hide(),0==i.isVip?($(".bottom-privilege").removeClass("hide"),$(".down-succ-btn[data-type=default]").show().css("display","block").siblings("a").hide(),$(".give-coupon-wrap").css("border-bottom","none!important"),$(".couponContainer .carding-er-code").hide()):($(".bottom-privilege").addClass("hide"),$(".down-succ-btn[data-type=default]").show().css("display","hide"),$(".couponContainer .carding-er-code").show())),2==i.type&&1==i.isFirstVipBuy&&($(".couponContainer").show(),$(".previousContainer").hide(),$(".bottom-privilege").hide(),$(".couponContainer .carding-er-code").show()),3==i.type&&($(".couponContainer").show(),$(".previousContainer").hide(),0==i.isVip?$(".downSucc-privi").removeClass("hide"):$(".downSucc-privi").addClass("hide"),$(".carding-er-code").show(),$(".down-succ-btn[data-type=default]").addClass("hide").hide(),$(".give-coupon-wrap").css("border-bottom","none!important"))},confirmCouponType:function(){var a=0,b=Number($("#ip-type").val());"downsucc.html"==i.pageUrl?(i.getFileType(f),a=1,1==i.dowStatus&&1==i.isFreeFile&&1!=localStorage.getItem("FirstDown")&&(i.type=3)):"success.html"==i.pageUrl&&(a=2,2==b&&1==i.isFirstCashBuy&&d.getCookie("FirstCashBuy")!=i.userId?i.type=1:0==b&&1==i.isFirstVipBuy&&d.getCookie("FirstVipBuy")!=i.userId&&(i.type=2)),i.pageType=a},getCouponList:function(){var a="/node/coupon/issueCoupon?type="+i.type;$.get(a,function(a){if(0==a.code&&a.data&&a.data.list.length>0){var b=template.compile(h)({data:a.data});$(".give-title").text(a.data.prompt),$(".give-coupon-list").html(b),i.domChange(),i.bringCouponClick(),$(".down-carding-main").addClass("coupon-carding-item"),$(".carding-vip-main").addClass("coupon-carding-item"),1==i.type?d.setCookieWithExpPath("FirstCashBuy",i.userId,2592e6,"/"):2==i.type?d.setCookieWithExpPath("FirstVipBuy",i.userId,2592e6,"/"):3==i.type&&d.setCookieWithExpPath("FirstDown",i.userId,2592e6,"/")}})},bringCouponClick:function(){$(".btn-receive").click(function(){i.receiveCoupon(i.type,1)})},closeTipByClick:function(){$(".coupon-info-top").on("click",".btn-no-user",function(){$(".coupon-info-top").hide()})},showTips:function(a){setTimeout(function(){0==a?$(".dialog-coupon.dialog-coupon-success").show():$(".dialog-coupon.dialog-coupon-fail").show()},1500)},receiveCoupon:function(a,b){var c={source:b,type:a};c=JSON.stringify(c),$("body").loading({name:"download",title:"请求中"}),$.ajax({type:"POST",url:"/pc/sale/vouchers",contentType:"application/json;charset=utf-8",dataType:"json",data:c,success:function(a){0==a.code?a.data&&(a.data.list.length>0?e.showAlertDialog("温馨提示","领取成功！"):e.showAlertDialog("温馨提示",a.msg)):e.showAlertDialog("温馨提示",a.msg)},complete:function(){$("body").closeLoading("download")}})},getFileType:function(a){var b={id:a};$.get("/node/confirmType",b,function(a){0==a.code&&"free"==a.fileType&&(i.isFreeFile=1,1==i.dowStatus&&1!=localStorage.getItem("FirstDown")&&(i.type=3,i.getCouponList()))})}};setTimeout(function(){i.initial()},2e3)}),define("dist/cmd-lib/toast",[],function(a,b,c){!function(a,b,c){function d(b){this.options={text:"我是toast提示",icon:"",delay:3e3,callback:!1},b&&a.isPlainObject(b)&&a.extend(!0,this.options,b),this.init()}d.prototype.init=function(){var b=this;b.body=a("body"),b.toastWrap=a('<div class="ui-toast" style="position:fixed;width:200px;height:60px;line-height:60px;text-align:center;background:#000;opacity:0.8;filter:alpha(opacity=80);top:40%;left:50%;margin-left:-100px;margin-top:-30px;border-radius:4px">'),b.toastIcon=a('<i class="icon"></i>'),b.toastText=a('<span class="ui-toast-text" style="color:#fff">'+b.options.text+"</span>"),b._creatDom(),b.show(),b.hide()},d.prototype._creatDom=function(){var a=this;a.options.icon&&a.toastWrap.append(a.toastIcon.addClass(a.options.icon)),a.toastWrap.append(a.toastText),a.body.append(a.toastWrap)},d.prototype.show=function(){var a=this;setTimeout(function(){a.toastWrap.removeClass("hide").addClass("show")},50)},d.prototype.hide=function(){var a=this;setTimeout(function(){a.toastWrap.removeClass("show").addClass("hide"),a.toastWrap.remove(),a.options.callback&&a.options.callback()},a.options.delay)},a.toast=function(a){return new d(a)}}($,window,document)}),define("dist/cmd-lib/loading",[],function(a,b,c){!function(a,b,c){a.fn.loading=function(b){var c=a(this),d=this;return this.each(function(){var e="",f={direction:"column",animateIn:"fadeInNoTransform",title:"提交中...",name:"loadingName",type:"origin",discription:"",titleColor:"rgba(255,255,255,0.7)",discColor:"rgba(255,255,255,0.7)",loadingWidth:100,loadingBg:"rgba(0, 0, 0, 0.6)",borderRadius:6,loadingMaskBg:"rgba(0,0,0,0.6)",zIndex:1000001,originDivWidth:10,originDivHeight:10,originWidth:4,originHeight:4,originBg:"#fefefe",smallLoading:!1,imgSrc:"",imgDivWidth:80,imgDivHeight:80,flexCenter:!1,flexDirection:"row",mustRelative:!1,delay:2e3,isClose:!0},g=a.extend(f,b||{});"body"==c.selector?(a("body,html").css({overflow:"hidden"}),e="fixed"):g.mustRelative?(c.css({position:"relative"}),e="absolute"):e="absolute",f._showOriginLoading=function(){var b=g.smallLoading?0:"-10px";"row"==g.direction&&(b="-6px"),d.cpt_loading_mask=a('<div class="cpt-loading-mask animated '+g.animateIn+" "+g.direction+'" data-name="'+g.name+'"></div>').css({background:g.loadingMaskBg,"z-index":g.zIndex,position:e}).appendTo(c),d.div_loading=a('<div class="div-loading"></div>').css({background:g.loadingBg,width:g.loadingWidth,height:g.loadingHeight,"-webkit-border-radius":g.borderRadius,"-moz-border-radius":g.borderRadius,"border-radius":g.borderRadius}).appendTo(d.cpt_loading_mask),g.flexCenter&&d.div_loading.css({display:"-webkit-flex",display:"flex","-webkit-flex-direction":g.flexDirection,"flex-direction":g.flexDirection,"-webkit-align-items":"center","align-items":"center","-webkit-justify-content":"center","justify-content":"center"}),d.loading_title=a('<p class="loading-title txt-textOneRow"></p>').css({color:g.titleColor}).html(g.title).appendTo(d.div_loading),d.loading=a('<div class="loading '+g.type+'"></div>').css({width:g.originDivWidth,height:g.originDivHeight}).appendTo(d.div_loading),d.loading_discription=a('<p class="loading-discription txt-textOneRow"></p>').css({color:g.discColor}).html(g.discription).appendTo(d.div_loading),"origin"==g.type&&(d.loadingOrigin=a('<div class="div-loadingOrigin"><span></span></div><div class="div-loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div>').appendTo(d.loading),d.loadingOrigin.children().css({"margin-top":b,"margin-left":b,width:g.originWidth,height:g.originHeight,background:g.originBg})),"pic"==g.type&&(d.loadingPic=a('<img src="'+g.imgSrc+'" alt="loading" />').appendTo(d.loading)),d.cpt_loading_mask.on("touchstart touchend touchmove click",function(a){a.stopPropagation(),a.preventDefault()})},f._createLoading=function(){a(".cpt-loading-mask[data-name="+g.name+"]").length>0||f._showOriginLoading()},f._createLoading(),f.close=function(){a(".cpt-loading-mask[data-name="+g.name+"]").remove()}})},a.extend(a.fn,{closeLoading:function(b){var b=b||"";if(a("body,html").css({overflow:"auto"}),""==b)a(".cpt-loading-mask").remove();else{var c=b||"loadingName";a(".cpt-loading-mask[data-name="+c+"]").remove()}}})}(jQuery,window,document)}),define("dist/common/coupon/template/couponCard.html",[],'\n{{each data.list as v i}}\n<li class="coupon-li">\n    <div class="coupon-item">\n        <i class="bg-coupon"></i>\n        <div class="price-wrap fl">\n            <p>{{if v.type==1}}¥{{/if}} <strong class="price">{{v.discount?v.discount:v.couponAmount}}</strong>{{if v.type==2}}折{{/if}}</p>\n        </div>\n        <div class="coupon-info-con">\n            <p class="coupon-text">{{v.content}}</p>\n            <p class="coupon-time">{{if v.dateNumber}}{{v.dateNumber}}天内有效{{else}}{{v.timeval}}{{/if}}</p>\n        </div>\n    </div>\n</li>\n{{/each}}\n'),define("dist/common/bilog",["base64","dist/cmd-lib/util","dist/application/method","dist/report/config"],function(a,b,c){function d(){sessionStorage.setItem("sessionID",z)}function e(a,b){!new RegExp("/f/").test(a)||new RegExp("referrer=").test(a)||new RegExp("/f/down").test(a)?new RegExp("/pay/payConfirm.html").test(a)?(b.prePageID="PC-M-PAY-F-L",b.prePageName="支付页-付费资料-列表页"):new RegExp("/pay/payQr.html\\?type=2").test(a)?(b.prePageID="PC-M-PAY-F-QR",b.prePageName="支付页-付费资料-支付页"):new RegExp("/pay/vip.html").test(a)?(b.prePageID="PC-M-PAY-VIP-L",b.prePageName="支付页-VIP-套餐列表页"):new RegExp("/pay/payQr.html\\?type=0").test(a)?(b.prePageID="PC-M-PAY-VIP-QR",b.prePageName="支付页-VIP-支付页"):new RegExp("/pay/privilege.html").test(a)?(b.prePageID="PC-M-PAY-PRI-L",b.prePageName="支付页-下载特权-套餐列表页"):new RegExp("/pay/payQr.html\\?type=1").test(a)?(b.prePageID="PC-M-PAY-PRI-QR",b.prePageName="支付页-下载特权-支付页"):new RegExp("/pay/success").test(a)?(b.prePageID="PC-M-PAY-SUC",b.prePageName="支付成功页"):new RegExp("/pay/fail").test(a)?(b.prePageID="PC-M-PAY-FAIL",b.prePageName="支付失败页"):new RegExp("/node/f/downsucc.html").test(a)?(b.prePageID="PC-M-DOWN-SUC",b.prePageName="下载成功页"):new RegExp("/node/f/downfail.html").test(a)&&(b.prePageID="PC-M-DOWN-FAIL",b.prePageName="下载失败页"):(b.prePageID="PC-M-FD",b.prePageName="资料详情页")}function f(){$.getScript("//ipip.iask.cn/iplookup/search?format=js",function(a,b){"success"===b?(u.setCookieWithExp("ip",remote_ip_info.ip,3e5,"/"),C.ip=remote_ip_info.ip):console.error("ipip获取ip信息error")})}function g(){var a="";return-1!=window.navigator.userAgent.indexOf("Windows NT 10.0")?a="Windows 10":-1!=window.navigator.userAgent.indexOf("Windows NT 6.2")?a="Windows 8":-1!=window.navigator.userAgent.indexOf("Windows NT 6.1")?a="Windows 7":-1!=window.navigator.userAgent.indexOf("Windows NT 6.0")?a="Windows Vista":-1!=window.navigator.userAgent.indexOf("Windows NT 5.1")?a="Windows XP":-1!=window.navigator.userAgent.indexOf("Windows NT 5.0")?a="Windows 2000":-1!=window.navigator.userAgent.indexOf("Mac")?a="Mac/iOS":-1!=window.navigator.userAgent.indexOf("X11")?a="UNIX":-1!=window.navigator.userAgent.indexOf("Linux")&&(a="Linux"),
a}function h(a){setTimeout(function(){console.log(a),$.getJSON("https://dw.iask.com.cn/ishare/jsonp?data="+s.encode(JSON.stringify(a))+"&jsoncallback=?",function(a){console.log(a)})})}function i(a,b){var c=a;if(a&&b){for(var d in a)if("var"===d)for(var e in b)c["var"][e]=b[e];else b[d]&&(c[d]=b[d]);h(c)}}function j(){var a=JSON.parse(JSON.stringify(C));e(document.referrer,a);var b={channel:""},c=u.getCookie("bc");c&&(b.channel=c),a.eventType="page",a.eventID="NE001",a.eventName="normalPageView",a.pageID=$("#ip-page-id").val()||"",a.pageName=$("#ip-page-name").val()||"",a.pageURL=window.location.href,i(a,b)}function k(){var a={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePrice:window.pageConfig.params.moneyPrice,fileCouponCount:window.pageConfig.params.file_volume,filePayType:w[window.pageConfig.params.file_state],fileFormat:window.pageConfig.params.file_format,fileProduceType:window.pageConfig&&window.pageConfig.params?window.pageConfig.params.fsource:"",fileCooType:"",fileUploaderID:window.pageConfig.params.file_uid},b=window.pageConfig&&window.pageConfig.params?window.pageConfig.params.is360:"";/https?\:\/\/[^\s]*so.com.*$/g.test(document.referrer)&&!/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&"true"==b&&(a.fileCooType="360onebox",u.setCookieWithExp("bc","360onebox",18e5,"/")),/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&(a.fileCooType="360wenku",u.setCookieWithExp("bc","360wenku",18e5,"/"));var c=JSON.parse(JSON.stringify(C));e(document.referrer,c),c.eventType="page",c.eventID="SE002",c.eventName="fileDetailPageView",c.pageID=$("#ip-page-id").val()||"",c.pageName=$("#ip-page-name").val()||"",c.pageURL=window.location.href,u.setCookieWithExp("bf",JSON.stringify(a),18e5,"/"),i(c,a)}function l(a){var b=JSON.parse(JSON.stringify(C));if(e(document.referrer,b),b.eventType="page",b.eventID="SE009",b.eventName="payFileResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,a.fileID||(a.fileID=u.getParam("fid")||$("#ip-page-fid").val()),!a.filePayType){var c=$("#ip-page-fstate").val()||1;a.filePayType=w[c]}i(b,a)}function m(a){var b=JSON.parse(JSON.stringify(C));e(document.referrer,b),b.eventType="page",b.eventID="SE011",b.eventName="payVipResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,a.orderID||(a.orderID=u.getParam("orderNo")||""),i(b,a)}function n(a){var b=JSON.parse(JSON.stringify(C));e(document.referrer,b),b.eventType="page",b.eventID="SE013",b.eventName="payPrivilegeResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,i(b,a)}function o(a){var b=JSON.parse(JSON.stringify(C));e(document.referrer,b),b.eventType="page",b.eventID="SE014",b.eventName="downResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,i(b,a)}function p(a,b){for(var c in b)a[c]&&(b[c]=a[c])}function q(a,b,c,d,f){var g=JSON.parse(JSON.stringify(C));e(document.referrer,g),g.eventType="click",g.eventID=a,g.eventName=b,g.pageID=$("#ip-page-id").val(),g.pageName=$("#ip-page-name").val(),g.pageURL=window.location.href,g.domID=c,g.domName=d,g.domURL=window.location.href,i(g,f)}function r(a,b){var c=$("#ip-page-type").val();if("pindex"==c){var d={fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:""},e=u.getCookie("bf");if(e&&p(JSON.parse(e),d),"fileDetailUpDown"==a||"fileDetailMiddleDown"==a||"fileDetailBottomDown"==a)d.downType="","fileDetailUpDown"==a?q("SE003","fileDetailDownClick","fileDetailUpDown","资料详情页顶部立即下载",d):"fileDetailMiddleDown"==a?q("SE003","fileDetailDownClick","fileDetailMiddleDown","资料详情页中部立即下载",d):"fileDetailBottomDown"==a&&q("SE003","fileDetailDownClick","fileDetailBottomDown","资料详情页底部立即下载",d),delete d.downType;else if("fileDetailUpBuy"==a)q("SE004","fileDetailBuyClick","fileDetailUpBuy","资料详情页顶部立即购买",d);else if("fileDetailMiddleBuy"==a)q("SE004","fileDetailBuyClick","fileDetailMiddleBuy","资料详情页中部立即购买",d);else if("fileDetailBottomBuy"==a)q("SE004","fileDetailBuyClick","fileDetailBottomBuy","资料详情页底部立即购买",d);else if("fileDetailMiddleOpenVip8"==a)q("SE005","fileDetailOpenVipClick","fileDetailMiddleOpenVip8","资料详情页中部开通vip，8折购买",d);else if("fileDetailBottomOpenVip8"==a)q("SE005","fileDetailOpenVipClick","fileDetailBottomOpenVip8","资料详情页底部开通vip，8折购买",d);else if("fileDetailMiddleOpenVipPr"==a)q("SE005","fileDetailOpenVipClick","fileDetailMiddleOpenVipPr","资料详情页中部开通vip，享更多特权",d);else if("fileDetailBottomOpenVipPr"==a)q("SE005","fileDetailOpenVipClick","fileDetailBottomOpenVipPr","资料详情页底部开通vip，享更多特权",d);else if("fileDetailComment"==a)q("SE006","fileDetailCommentClick","fileDetailComment","资料详情页评论",d);else if("fileDetailScore"==a){var f=b.find(".on:last").text();d.fileScore=f?f:"",q("SE007","fileDetailScoreClick","fileDetailScore","资料详情页评分",d),delete d.fileScore}}if("payFile"==a){var d={orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",filePrice:"",fileSalePrice:""},e=u.getCookie("bf");e&&p(JSON.parse(e),d),q("SE008","payFileClick","payFile","支付页-付费资料-立即支付",d)}else if("payVip"==a){var d={orderID:u.getParam("orderNo")||"",vipID:$(".ui-tab-nav-item.active").data("vid"),vipName:$(".ui-tab-nav-item.active p.vip-time").text()||"",vipPrice:$(".ui-tab-nav-item.active p.vip-price strong").text()||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||""};q("SE010","payVipClick","payVip","支付页-VIP-立即支付",d)}else if("payPrivilege"==a){var d={orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",privilegeName:$(".ui-tab-nav-item.active p.privilege-price").text()||"",privilegePrice:$(".ui-tab-nav-item.active").data("activeprice")||"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:""},e=u.getCookie("bf");e&&p(JSON.parse(e),d),q("SE012","payPrivilegeClick","payPrivilege","支付页-下载特权-立即支付",d)}var d={phone:$("#ip-mobile").val()||"",vipStatus:$("#ip-isVip").val()||"",channel:"",cashBalance:"",integralNumber:"",idolNumber:"",fileCategoryID:"",fileCategoryName:""};D&&(d.vipStatus=D.isVip||"",d.phone=D.tel||"");var g=u.getCookie("bc");g&&(d.channel=g),"paySuccessBacDown"==a?q("NE002","normalClick","paySuccessBacDown","支付成功页-返回下载",d):"paySuccessOpenVip"==a?q("NE002","normalClick","paySuccessOpenVip","支付成功页-开通VIP",d):"downSuccessOpenVip"==a?q("NE002","normalClick","downSuccessOpenVip","下载成功页-开通VIP",d):"downSuccessContinueVip"==a?q("NE002","normalClick","downSuccessContinueVip","下载成功页-续费VIP",d):"downSuccessBacDetail"==a?q("NE002","normalClick","downSuccessBacDetail","下载成功页-返回详情页",d):"downSuccessBindPhone"==a&&q("NE002","normalClick","downSuccessBindPhone","下载成功页-立即绑定",d)}var s=a("base64").Base64,t=a("dist/cmd-lib/util"),u=a("dist/application/method"),v=a("dist/report/config"),w=["","free","down","cost","online","vipFree","vipOnly"],x=u.getCookie("ip")||f(),y=u.getCookie("cid");y||(y=(new Date).getTime()+""+Math.random(),u.setCookieWithExp("cid",y,2592e6,"/"));var z=(new Date).getTime()+""+Math.random(),A=18e5,B=sessionStorage.getItem("sessionID")||"";B||d(),z-B>A&&d();var C={eventType:"",eventID:"",eventName:"",eventTime:String((new Date).getTime()),reportTime:String((new Date).getTime()),sdkVersion:"V1.0.3",terminalType:"0",loginStatus:u.getCookie("cuk")?1:0,visitID:u.getCookie("gr_user_id")||"",userID:"",sessionID:sessionStorage.getItem("sessionID")||y||"",productName:"ishare",productCode:"0",productVer:"V4.5.0",pageID:"",pageName:"",pageURL:"",ip:x||"",resolution:document.documentElement.clientWidth+"*"+document.documentElement.clientHeight,browserVer:t.getBrowserInfo(navigator.userAgent),osType:g(),moduleID:"",moduleName:"",appChannel:"",prePageID:"",prePageName:"",prePageURL:document.referrer,domID:"",domName:"",domURL:"",location:"",deviceID:"",deviceBrand:"",deviceModel:"",deviceLanguage:navigator.language,mac:"",osVer:"",networkType:"",networkProvider:"","var":{}},D=u.getCookie("ui");D&&(D=JSON.parse(D),C.userID=D.uid||""),e(document.referrer,C),$(function(){setTimeout(function(){var a=$("#ip-page-id").val();"PC-M-FD"==a&&k(),"PC-O-SR"!=a&&j();var b={payResult:1,orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",vipID:"",vipName:"",vipPrice:""},c={payResult:1,orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",privilegeID:"",privilegeName:"",privilegePrice:""},d={payResult:1,orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",filePrice:"",fileSalePrice:""},e=u.getCookie("bf"),f=u.getCookie("br"),g=window.location.href;if("PC-M-PAY-SUC"==a||"PC-O-PAY-SUC"==a){if(g.indexOf("type=0")>-1)f&&p(JSON.parse(f),b),m(b);else if(g.indexOf("type=1")>-1)e&&p(JSON.parse(e),c),f&&p(JSON.parse(f),c),n(c);else if(g.indexOf("type=2")>-1){e&&p(JSON.parse(e),d);var f=u.getCookie("br");f&&p(JSON.parse(f),d),l(d)}}else("PC-M-PAY-FAIL"==a||"PC-O-PAY-FAIL"==a)&&(g.indexOf("type=0")>-1?(f&&p(JSON.parse(f),b),b.payResult=0,m(b)):g.indexOf("type=1")>-1?(e&&p(JSON.parse(e),c),f&&p(JSON.parse(f),c),c.payResult=0,n(c)):g.indexOf("type=2")>-1&&(e&&p(JSON.parse(e),d),f&&p(JSON.parse(f),d),d.payResult=0,l(d)));var h={downResult:1,fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:""};if("PC-M-DOWN-SUC"==a){var e=u.getCookie("bf");e&&p(JSON.parse(e),h),h.downResult=1,o(h)}else if("PC-M-DOWN-FAIL"==a){var e=u.getCookie("bf");e&&p(JSON.parse(e),h),h.downResult=0,o(h)}},1e3)}),$(document).delegate("."+v.EVENT_NAME,"click",function(a){var b=$(this),c=b.attr(v.BILOG_CONTENT_NAME);c&&setTimeout(function(){r(c,b)})})}),define("dist/report/config",[],function(a,b,c){return{COOKIE_FLAG:"_dplf",COOKIE_CIDE:"_dpcid",COOKIE_CUK:"cuk",COOKIE_TIMEOUT:3e6,SERVER_URL:"/dataReport",UACTION_URL:"/uAction",EVENT_NAME:"pc_click",CONTENT_NAME:"pcTrackContent",BILOG_CONTENT_NAME:"bilogContent",ishareTrackEvent:"_ishareTrackEvent",eventCookieFlag:"_eventCookieFlag",EVENT_REPORT:!1,AUTO_PV:!1}});