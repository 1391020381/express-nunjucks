/*! ishare_pc_website
*author:Jersey */
define("dist/queryOrder/init",["../queryOrder/query","../application/suspension","../application/method","../application/checkLogin","../application/api","../application/app","../application/element","../application/template","../application/extend","../report/init","../report/handler","../cmd-lib/util","../report/columns","../report/config","../application/helper","//static3.iask.cn/resource/js/plugins/pc.iask.login.min","../common/bilog","base64","../detail/common","../detail/template/pay_btn_tmp.html","../detail/template/pay_middle_tmp.html","../detail/template/pay_header.tmp.html","../common/coupon/couponIssue","../cmd-lib/toast","../cmd-lib/loading","../common/coupon/template/couponCard.html","../detail/template/head_tip.html","../queryOrder/success","../common/bindphone"],function(a,b,c){a("../queryOrder/query"),a("../queryOrder/success")}),define("dist/queryOrder/query",["dist/application/suspension","dist/application/method","dist/application/checkLogin","dist/application/api","dist/application/app","dist/application/element","dist/application/template","dist/application/extend","dist/report/init","dist/report/handler","dist/cmd-lib/util","dist/report/columns","dist/report/config","dist/application/helper","//static3.iask.cn/resource/js/plugins/pc.iask.login.min","dist/common/bilog","base64","dist/detail/common","dist/common/coupon/couponIssue","dist/cmd-lib/toast","dist/cmd-lib/loading"],function(a,b,c){function d(){l(),s(),e()}function e(){y.getCookie("cuk")&&y.get("/gateway/pc/usermanage/checkLogin",function(a){console.log(a,"用户信息"),F=0==a.code&&a.data?a.data:null})}function f(){A.notifyLoginInterface(function(a){B.afterLogin(a),e(),A.getUserData(function(a){1==a.loginStatus&&a&&y.getCookie("_1st_l")!=a.userId&&n(0,2,a.userIdres&&a.userIdres.userId)})})}function g(a){var b={orderNo:a,userId:F&&F.userId,nickName:F&&F.nickName};$.ajax({url:x.order.bindOrderByOrderNo,type:"POST",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){$(".before-search-words").css("display","none"),"0"==a.code?(G=a.data,h(),i(G)):($(".wrong-search-words").css("display","block"),$(".table-box-outside").css("display","none"),$.toast({text:a.msg}))}})}function h(){var a=new Date(G.orderTime),b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes(),g=(a.getSeconds(),b+"-");10>c&&(g+="0"),g+=c+"-",10>d&&(g+="0"),g+=d+" ",10>e&&(g+="0"),g+=e+":",10>f&&(g+="0"),g+=f;var h=g,i=G.orderTimeStr,j=i||h,k=G.payPrice>0?G.payPrice/100:0;$(".wrong-search-words").css("display","none"),$(".table-box-outside").css("display","block"),document.getElementsByClassName("file-name-value")[0].innerHTML=G.goodsName,document.getElementsByClassName("price-value")[0].innerHTML="￥ "+k,document.getElementsByClassName("time-value")[0].innerHTML=j}function i(a){j(),a.format.indexOf("doc")>-1?$(".file-doc-icon").css("display","block"):a.format.indexOf("xls")>-1?$(".file-excel-icon").css("display","block"):a.format.indexOf("ppt")>-1?$(".file-ppt-icon").css("display","block"):a.format.indexOf("txt")>-1?$(".file-text-icon").css("display","block"):a.format.indexOf("pdf")>-1&&$(".file-pdf-icon").css("display","block")}function j(){$(".file-doc-icon").css("display","none"),$(".file-excel-icon").css("display","none"),$(".file-pdf-icon").css("display","none"),$(".file-ppt-icon").css("display","none"),$(".file-text-icon").css("display","none")}function k(){var a=document.getElementById("scondition").value,b={orderNo:a,userId:F?F.userId||"":"",fid:G.fid};$.ajax({url:x.order.unloginOrderDown,type:"POST",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){if("0"==a.code){var b=a.data.downUrl;window.location=b}else $.toast({text:a.msg})}})}function l(){y.getCookie("cuk")?A.getLoginData(function(a){B.afterLogin(a),window.pageConfig.userId=a&&a.userId?a.userId:""}):f();var a="/feedAndComp/userFeedback?url="+encodeURIComponent(location.href);$(".user-feedback").attr("href",a);var b=$(".icon-detail-wrap");b.length&&$(window).on("scroll",function(){var a=$(this),c=a.scrollTop();c>=180?(b.addClass("icon-text-fixed"),$(".icon-text-fixed").css("left",$(".bd-wrap")[0].offsetLeft-6)):(b.removeClass("icon-text-fixed"),b.css("left","-6px"))}),setTimeout(function(){$(".detail-search-info").show()},3e4)}function m(){var a=$(".more-nav"),b=$("#search-detail-input"),c=$(".detail-lately"),d=$(".slider-control");a.on("mouseover",function(){var a=$(this);a.hasClass("hover")||$(this).addClass("hover")}),a.on("mouseleave",function(){var a=$(this);a.hasClass("hover")&&$(this).removeClass("hover")}),b.on("keyup",function(a){var b=a.keyCode;$(this).val()&&I($(this).val()),13===b&&J($(this).val())}),b.on("focus",function(){$(".detail-search-info").hide();var a=$(".lately-list"),b=a.find("li").length;return b>0?c.show():c.hide(),!0}),$(".btn-new-search").on("click",function(){var a=b.val();a&&J(a)}),$(document).on("click",":not(.new-search)",function(a){var b=$(a.target);b.hasClass("new-input")||c.hide()}),c.on("click",function(a){a.stopPropagation()}),$(".user-login,.login-open-vip").on("click",function(){y.getCookie("cuk")||A.notifyLoginInterface(function(a){B.afterLogin(a),e(),A.getUserData(function(a){1==a.loginStatus&&a&&y.getCookie("_1st_l")!=a.userId&&n(0,2,a&&a.userIdres&&a.userIdres.userId)})})}),y.getCookie("cuk")&&A.getUserData(function(a){1==a.loginStatus&&a&&y.getCookie("_1st_l")!=a.userId&&n(0,2,a.userId)}),$(".btn-exit").on("click",function(){A.ishareLogout()}),d.find(".btn-next").on("click",function(){$(".btn-prev").removeClass("btn-disable"),$(this).addClass("btn-disable"),u()}),d.find(".btn-prev").on("click",function(){$(".btn-next").removeClass("btn-disable"),$(this).addClass("btn-disable"),u()}),$("#commentTxt").on("focus",function(){y.getCookie("cuk")&&A.getLoginData(function(a){B.userData=a,a.mobile||A.notifyCheckInterface()})}),$("#search-detail-input").on("focus",function(){$(".detail-search-info").hide()}),$("#commentCheckbox").on("click",function(){$(this).find(".check-con").toggleClass("checked")}),$(".report-link").on("click",function(){$("#dialog-box").dialog({html:$("#report-file-box").html()}).open()}),$("#dialog-box").on("click",".report-as",function(){var a=$("input[name='radio1']:checked").val();if("1"===a)y.compatibleIESkip("/feedAndComp/tort?type=1&pageUrl="+window.location.href,!1);else if(y.getCookie("cuk")){var b=$("#report-content").val();y.post(x.normalFileDetail.reportContent,function(a){0==a.code&&$("#dialog-box").dialog({html:$("#tpl-down-text").html().replace(/\$msg/,"举报成功")}).open()},"","",{type:a,content:b,pageUrl:window.location.href})}else $("#bgMask").hide(),$("#dialog-box").hide(),A.notifyLoginInterface(null)}),$("#comment").on("click",function(){v()}),$("#btn-collect").on("click",function(){return y.getCookie("cuk")?void r($(this).hasClass("btn-collect-success")?4:3):void A.notifyLoginInterface(function(a){B.afterLogin(a)})}),$(".star-list").on("click",function(a){y.getCookie("cuk")?y.get(x.normalFileDetail.hasDownLoad+"?fid="+window.pageConfig.params.g_fileId,function(a){if(0==a.code)if(a.data){var b={fid:pageConfig.params.g_fileId,score:$(this).find("li.on").length};o(b)}else $("#dialog-box").dialog({html:$("#tpl-down-text").html().replace(/\$msg/,"您还未获取该资料,先要获取资料后才可以评分哦!")}).open()}):A.notifyLoginInterface(function(a){B.afterLogin(a)})}),$("#searchRes").on("click",function(){$("body,html").animate({scrollTop:$("#littleApp").offset().top-60},200),$("#dialog-box").dialog({html:$("#search-file-box").html().replace(/\$fileId/,window.pageConfig.params.g_fileId)}).open()}),$("body").on("click",".js-buy-open",function(a){var b=$(this).data("type");y.getCookie("cuk")?w(b):($(this).attr("loginOffer")&&y.setCookieWithExpPath("_loginOffer",$(this).attr("loginOffer"),36e5,"/"),y.setCookieWithExpPath("enevt_data",b,36e5,"/"),3==pageConfig.params.g_permin&&"file"==b||A.notifyLoginInterface(function(a){B.afterLogin(a),w(b)}))})}function n(b,c,d){var e={source:c,type:b};e=JSON.stringify(e),$("body").loading({name:"download",title:"请求中"}),$.ajax({type:"POST",url:x.vouchers,contentType:"application/json;charset=utf-8",dataType:"json",data:e,success:function(b){if(0==b.code){if(b.data.list)if(b.data.list.length>0){var c=a("dist/detail/template/head_tip.html"),e=template.compile(c)({data:b.data});$(".coupon-info-top").html(e),y.setCookieWithExpPath("_1st_l",d,2592e6,"/")}else z.showAlertDialog("温馨提示",b.msg)}else z.showAlertDialog("温馨提示",b.msg)},complete:function(){$("body").closeLoading("download")}})}function o(a){y.post(x.normalFileDetail.appraise,function(a){if(0==a.code){var b=$(".d-success");b.removeClass("hide"),setTimeout(function(){b.addClass("hide")},1500)}},"","post",a)}function p(a,b,c){$(a).focus(function(){$(this).parents(c).addClass(b)}),$(a).blur(function(){$(this).parents(c).removeClass(b)})}function q(a,b,c){$(a).hover(function(){$(this).addClass(c),$(b).fadeIn("slow")},function(){$(this).removeClass(c),$(b).fadeOut("slow")})}function r(a){y.post(x.normalFileDetail.collect,function(b){if(0==b.code){var c=$("#btn-collect");if(3===a){var d=$(".d-collect");d.removeClass("hide"),setTimeout(function(){d.addClass("hide")},2e3),c.addClass("btn-collect-success")}else c.removeClass("btn-collect-success")}else 40001==b.code&&setTimeout(function(){y.delCookie("cuk","/",".sina.com.cn")},0)},"","post",{fid:pageConfig.params.g_fileId,cond:a,flag:"y"})}function s(){var a=pageConfig.access,b=y.keyMap.ishare_detail_access;if(pageConfig&&a){var c=y.getLocalData(b);!c||c.length<1?(c=[],c.push(a),y.setLocalData(b,c)):(c=t(a.fileId,c),c.unshift({fileId:a.fileId,title:a.title,format:a.format,time:(new Date).getTime()}),y.setLocalData(b,c))}}function t(a,b){for(var c=0;c<b.length;c++)if(b[c].fileId===a){b.splice(c,1);break}return 50===b.length&&b.pop(),b}function u(){$(".related-data-list").find("li").each(function(){$(this).is(":hidden")?$(this).show():$(this).hide()})}function v(){y.getCookie("cuk")?y.getCookie("cuk")&&!B.userData?A.getLoginData(function(a){B.afterLogin(a),H()}):H():A.notifyLoginInterface(function(a){B.afterLogin(a)})}function w(a){var b=window.pageConfig.params.g_fileId,c=window.pageConfig.params.file_format,d=window.pageConfig.params.file_title,e="",f=z.getPageRef(b);if(y.setCookieWithExp("f",JSON.stringify({fid:b,title:d,format:c}),3e5,"/"),"file"===a)e="?orderNo="+b+"&referrer="+document.referrer,y.compatibleIESkip("/pay/payConfirm.html"+e,!1);else if("vip"===a){__pc__.gioTrack("vipRechargeEntryClick",{entryName_var:D,entryType_var:E});var e="?fid="+b+"&ft="+c+"&name="+encodeURIComponent(encodeURIComponent(d))+"&ref="+f;y.compatibleIESkip("/pay/vip.html"+e,!0)}else if("privilege"===a){var e="?fid="+b+"&ft="+c+"&name="+encodeURIComponent(encodeURIComponent(d))+"&ref="+f;y.compatibleIESkip("/pay/privilege.html"+e,!0)}}a("dist/application/suspension");var x=(a("dist/application/app"),a("dist/application/api")),y=a("dist/application/method"),z=a("dist/cmd-lib/util"),A=a("dist/application/checkLogin"),B=a("dist/detail/common");a("dist/common/coupon/couponIssue");var C=["","免费","下载券","现金","仅供在线阅读","VIP免费","VIP专享"],D=C[pageConfig.params.file_state],E=1==window.pageConfig.params.isVip?"续费":"充值",F=null,G={};d(),m(),$(".btn-search").on("click",function(){var a=document.getElementById("scondition").value;return a?void(y.getCookie("cuk")?g(a):f()):void $.toast({text:"订单号不可为空"})}),$(".down-btn").on("click",function(){k()}),$(function(){function a(){$(".pc-tui-coupon .btn-close").click(function(){$(".pc-tui-coupon").hide()})}function b(){$(".coupon-info-top").on("click",".btn-no-user",function(){$(".coupon-info-top").hide(),localStorage.setItem("firstCoupon",1)})}var c=$(".new-detail-header"),d=c.height(),e=c.find(".new-input");p(e,"new-search-focus",".new-search"),p(".evaluate-textarea textarea","evaluate-textarea-focus",".evaluate-textarea");var f=$("#fix-right");$(".detail-fixed-con"),c.height();if(f.length)var g=f.offset().top-d;$(window).scroll(function(){var b=$(this).scrollTop();b>d?(c.addClass("new-detail-header-fix"),$(".coupon-info-top").hide()):(c.removeClass("new-detail-header-fix"),!localStorage.getItem("firstCoupon")&&y.getCookie("cuk")&&$(".coupon-info-top").show()),b>g?f.css({position:"fixed",top:d,"z-index":"75"}):f.removeAttr("style"),$(".header-btn-con").css("display","none"),b>400&&!localStorage.getItem("loginCouponAd")&&!y.getCookie("cuk")&&($(".pc-tui-coupon").show(),localStorage.setItem("loginCouponAd",1),a())}),b(),$(".firstLoginHook").click(function(){$(".pc-tui-coupon").hide()}),q(c.find(".more-nav"),null,"hover")});var H=function(){var a=$("#commentTxt").val(),b=pageConfig.params.g_fileId,c="1",d=$("#commentCheckbox .check-con").hasClass("checked");return a.length<1||a.length>200?($(".error-info").text("评论内容长度必须在1~200个字符之间"),!1):void y.get(x.normalFileDetail.hasDownLoad+"?fid="+window.pageConfig.params.g_fileId,function(e){0==e.code&&(e.data?y.post(x.normalFileDetail.addComment,function(b){if(0==b.code)if(0===b.data){var c=B&&B.userData?B.userData.nickName||"":"",e=B&&B.userData?B.userData.userId||"":"",f=d?"匿名用户":c,g=d?'<a class="user-name-con">'+f+"</a>":'<a href="/n/'+e+'.html" class="user-name-con">'+f+"</a>";$(".evaluate-list").prepend('<li class="cf"><div class="user-img fl"><img src="'+B.userData.weiboImage+'" alt="头像"></div><div class="user-evaluate cf"><p class="evaluate-txt">'+g+a+"</p></div></li>"),$("#commentTxt").val("")}else 2===b.data?$(".error-info").text("一天最多评论15条"):3===b.data?$(".error-info").text("一分钟之内提交过于频繁"):5===b.data?$(".error-info").text("您经评论过"):4===b.data&&$(".error-info").text("*您的评论包含敏感词,请修改再发布!");else 40001==b.code?setTimeout(function(){y.delCookie("cuk","/",".sina.com.cn")},0):$(".error-info").text(b.msg)},"","",{content:a,fid:b,type:c,anonymous:d?1:0}):$("#dialog-box").dialog({html:$("#tpl-down-text").html().replace(/\$msg/,"您还未获取该资料,先要获取资料后才可以评论哦!")}).open())},"")},I=function(a){$.getScript("https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd="+encodeURIComponent(a)+"&p=3&cb=window.baidu_searchsug&t="+(new Date).getTime())};window.baidu_searchsug=function(a){var b=$("#search-detail-input").val();if(b=b?b.replace(/^\s+|\s+$/gm,""):"",b.length>0&&a&&a.s){var c=a.s;if(c.length>0){for(var d=Math.min(c.length,10),e=[],f=0;d>f;f++){var g="/search/home.html?cond="+encodeURIComponent(encodeURIComponent(c[f]));e.push('<li><a href="'+g+'"  data-html="'+c[f]+'" >'+c[f].replace(new RegExp("("+b+")","gm"),"<span class='search-font'>$1</span>")+"</a></li>")}$(".lately-list").html(e.join("")).parent(".detail-lately").show()}}};var J=function(a){var b=a?a.replace(/^\s+|\s+$/gm,""):"";y.compatibleIESkip("/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(b)),!1)}}),define("dist/application/suspension",["dist/application/method","dist/application/checkLogin","dist/application/api","dist/application/app","dist/application/element","dist/application/template","dist/application/extend","dist/report/init","dist/report/handler","dist/cmd-lib/util","dist/report/columns","dist/report/config","dist/application/helper","//static3.iask.cn/resource/js/plugins/pc.iask.login.min","dist/common/bilog","base64"],function(a,b,c){function d(){function a(a,b,c){b=b||0,!a||1!==b&&2!==b?g.animate({right:"-307px"},200):j.getCookie("cuk")?(f(b),g.animate({right:"61px"},500)):k.notifyLoginInterface(function(a){e(g,b,a)}),a&&0===b?j.getCookie("cuk")?window.open("/node/rights/vip.html","target"):k.notifyLoginInterface(function(a){e(null,b,a),window.open("/node/rights/vip.html","target")}):1===b?($(".mui-user-wrap").css("visibility","hidden"),$(".mui-sel-wrap").css("visibility","visible"),$(".mui-collect-wrap").css("visibility","hidden")):2===b?($(".mui-user-wrap").css("visibility","hidden"),$(".mui-sel-wrap").css("visibility","hidden"),$(".mui-collect-wrap").css("visibility","visible")):(4===b||6===b)&&g.animate({right:"-307px"},200)}function b(a){var b=$(window).height();b>=920?d.removeClass("fixed-min-height"):d.addClass("fixed-min-height")}var c=$(".fixed-op").find(".J_menu"),d=$(".fixed-right-full"),g=d.find(".fixed-detail-wrap");$(".btn-detail-back").on("click",function(){a(!1,$(this)),c.removeClass("active")}),$(document).on("click",function(){var b=$(this);a(!1,b),c.removeClass("active")}),d.on("click",".js-buy-open",function(){j.compatibleIESkip("/pay/vip.html",!0)}),$(".op-menu-wrap").click(function(a){a.stopPropagation()}),c.on("click",function(){var b=$(this).index();$(this).hasClass("active")?($(this).removeClass("active"),a(!1,$(this))):($(this).addClass("active").siblings().removeClass("active"),a(!0,b,$(this)))}),$(window).bind("resize ready",b)}function e(a,b,c){var d=$("#unLogin"),e=$("#haveLogin"),g=$(".top-user-more"),h=$(".icon-iShare-text"),i=$(".btn-user-more"),j=$(".vip-status");h.html("1"==c.isVip?"续费VIP":"开通VIP"),i.text("1"==c.isVip?"续费":"开通"),"0"==c.isVip?$(".open-vip").show().siblings("a").hide():$(".xf-open-vip").show().siblings("a").hide();var k=null;if("1"==c.isVip?(k=j.find('p[data-type="2"]'),k.find(".expire_time").html(c.expireTime),k.show().siblings().hide()):"1"==c.isVip&&"2"==c.userType&&(k=j.find('p[data-type="3"]'),k.show().siblings().hide()),d.hide(),e.find(".icon-detail").html(c.nickName),e.find("img").attr("src",c.weiboImage),g.find("img").attr("src",c.weiboImage),g.find("#userName").html(c.nickName),e.show(),$(".user-avatar img").attr("src",c.weiboImage),$(".name-wrap .name-text").html(c.nickName),"1"==c.isVip){var l="您的VIP将于"+c.expireTime+"到期,剩余"+c.privilege+"次下载特权";$(".detail-right-normal-wel").html(l),$(".detail-right-vip-wel").html("会员尊享权益"),$(".btn-mui").hide(),$("#memProfit").html("VIP权益")}else $(".mui-privilege-list li").removeClass("hide");f(b),a&&a.animate({right:"61px"},500)}function f(a){1===a?g():2===a&&h()}function g(){var a=j.keyMap.ishare_detail_access,b=j.getLocalData(a),c=$("#seenRecord"),d=[];if(b&&b.length){b=b.slice(0,20);for(var e=0;e<b.length;e++){var f=b[e],g='<li><i class="ico-data ico-'+f.format+'"></i><a target="_blank" href="/f/'+f.fileId+'.html">'+f.title+"</a></li>";d.push(g)}c.html(d.join(""))}else c.hide().siblings(".mui-data-null").show()}function h(){var a={pageNum:1,pageSize:20};$.ajax(l.user.collect,{type:"get",async:!1,data:a,dataType:"json"}).done(function(a){0==a.code&&i(a.data)}).fail(function(a){console.log("error==="+a)})}function i(a){var b=$("#myCollect"),c=[];if(a&&a.length){for(var d=a.slice(0,20),e=0;e<d.length;e++){var f=d[e],g='<li><i class="ico-data ico-'+f.format+'"></i><a target="_blank" href="/f/'+f.fileId+'.html">'+f.name+"</a></li>";c.push(g)}b.html(c.join("")),a.length>20&&b.siblings(".btn-mui-fix").removeClass("hide")}else b.siblings(".mui-data-null").removeClass("hide")}var j=a("dist/application/method"),k=a("dist/application/checkLogin"),l=(a("dist/application/app"),a("dist/application/api"));a("dist/common/bilog").clickEvent;d(),$(".op-feedback").on("click",function(){var a=window.location.href;j.compatibleIESkip("/feedAndComp/userFeedback?url="+encodeURIComponent(a),!0),j.compatibleIESkip("/node/feedback/feedback.html?url="+encodeURIComponent(a),!0)}),$("#go-back-top").on("click",function(){$("body,html").animate({scrollTop:0},200)});try{!function(a,b,c,d,e,f,g){a[d]=a[d]||function(){(a[d].a=a[d].a||[]).push(arguments)},f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=!0,f.charset="UTF-8",f.src="//static.meiqia.com/dist/meiqia.js?_=t",g.parentNode.insertBefore(f,g)}(window,document,"script","_MEIQIA"),_MEIQIA("entId","149498"),_MEIQIA("allSet",function(){_MEIQIA("showPanel")}),_MEIQIA("manualInit")}catch(m){}$(".btn-mui-contact").on("click",function(){_MEIQIA("init")}),c.exports={usermsg:function(a){if($(".user-avatar img").attr("src",a.weiboImage),$(".name-wrap .name-text").html(a.nickName),"1"==a.isVip){var b="您的VIP将于"+a.expireTime+"到期,剩余"+a.privilege+"次下载特权";$(".detail-right-normal-wel").html(b),$(".detail-right-vip-wel").html("会员尊享权益"),$(".btn-mui").hide(),$("#memProfit").html("VIP权益")}else $(".mui-privilege-list li").removeClass("hide")}}}),define("dist/application/method",[],function(require,exports,module){return{keyMap:{ishare_detail_access:"ISHARE_DETAIL_ACCESS",ishare_office_detail_access:"ISHARE_OFFICE_DETAIL_ACCESS"},async:function(a,b,c,d,e){$.ajax(a,{type:d||"post",data:e,async:!1,dataType:"json",headers:{"cache-control":"no-cache",Pragma:"no-cache"}}).done(function(a){b&&b(a)}).fail(function(a){console.log("error==="+c)})},get:function(a,b,c){$.ajaxSetup({cache:!1}),this.async(a,b,c,"get")},post:function(a,b,c,d,e){this.async(a,b,c,d,e)},postd:function(a,b,c){this.async(a,b,!1,!1,c)},random:function(a,b){return Math.floor(Math.random()*(b-a))+a},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},setCookieWithExp:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),d?document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString():document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},delCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1);var e=this.getCookie(a);null!=e&&(b&&c?document.cookie=a+"= '' ;domain="+c+";expires="+d.toGMTString()+";path="+b:b?document.cookie=a+"= '' ;expires="+d.toGMTString()+";path="+b:document.cookie=a+"="+e+";expires="+d.toGMTString())},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},url2Obj:function(a){for(var b={},c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b},getParam:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},getLocalData:function(a){try{if(localStorage&&localStorage.getItem){var b=localStorage.getItem(a);return null===b?null:JSON.parse(b)}return console.log("浏览器不支持html localStorage getItem"),null}catch(c){return null}},setLocalData:function(a,b){localStorage&&localStorage.setItem?(localStorage.removeItem(a),localStorage.setItem(a,JSON.stringify(b))):console.log("浏览器不支持html localStorage setItem")},browserType:function(){var a=navigator.userAgent,b=a.indexOf("Opera")>-1;return b?"Opera":a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b?"IE":a.indexOf("Edge")>-1?"Edge":a.indexOf("Firefox")>-1?"Firefox":a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome")?"Safari":a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1?"Chrome":void 0},validateIE9:function(){return!(!$.browser.msie||"9.0"!==$.browser.version&&"8.0"!==$.browser.version&&"7.0"!==$.browser.version&&"6.0"!==$.browser.version)},compareTime:function(a,b){return a&&b?Math.abs((b-a)/1e3/60/60/24):""},changeURLPar:function(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText)}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},getUrlAllParams:function(a){if("undefined"==typeof a)var b=decodeURI(location.search);else var b="?"+a.split("?")[1];var c=new Object;if(-1!=b.indexOf("?"))for(var d=b.substr(1),e=d.split("&"),f=0;f<e.length;f++)c[e[f].split("=")[0]]=decodeURI(e[f].split("=")[1]);return c},compatibleIESkip:function(a,b){var c=document.createElement("a");c.href=a,c.style.display="none",b&&(c.target="_blank"),document.body.appendChild(c),c.click()},testEmail:function(a){var b=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return b.test(a)?!0:!1},testPhone:function(a){return/^1(3|4|5|7|8)\d{9}$/.test(a)?!0:!1}}}),define("dist/application/checkLogin",["dist/application/method","dist/application/api"],function(a,b,c){var d=a("dist/application/method"),e=a("dist/application/api");c.exports={getIds:function(){var a=window.pageConfig&&window.pageConfig.params?window.pageConfig.params:null,b=window.pageConfig&&window.pageConfig.access?window.pageConfig.access:null,c=[];a&&(a.classid1&&c.push(a.classid1),a.classid2&&c.push(a.classid2),a.classid3&&c.push(a.classid3));var d=a&&c.length>0?c.join("-"):"",e=b?b.fileId||a.g_fileId||"":"",f=window.pageConfig&&window.pageConfig.classIds?window.pageConfig.classIds:"";return!d&&(d=f),{clsId:d,fid:e}},notifyLoginInterface:function(a){var b=this;if(!d.getCookie("cuk")){__pc__.push(["pcTrackContent","loginDialogLoad"]);var c=window.pageConfig&&window.pageConfig.page?window.pageConfig.page.ptype||"index":"index";$.loginPop("login",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:c,clsId:this.getIds().clsId,fid:this.getIds().fid},function(c){b.getLoginData(a)})}},listenLoginStatus:function(a){var b=this;$.loginPop("login_wx_code",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:"ishare",popup:"hidden",clsId:this.getIds().clsId,fid:this.getIds().fid},function(){b.getLoginData(a)})},notifyCheckInterface:function(){d.getCookie("cuk")&&$.loginPop("checkCode",{terminal:"PC",businessSys:"ishare",domain:document.domain,clsId:this.getIds().clsId,fid:this.getIds().fid},function(a){"0"==a.code&&d.get(e.user.getJessionId,function(a){},"")})},syncUserInfoInterface:function(a){var b=this;d.getCookie("cuk")&&d.get(e.user.getJessionId,function(c){0==c.code&&b.getLoginData(a)},"")},getUserData:function(a){d.getCookie("cuk")&&d.get(e.coupon.querySeniority,function(b){b&&0==b.code&&a(b.data)},"")},getLoginData:function(a){var b=this;try{d.get(e.user.login,function(c){if(0==c.code&&c.data){if(a&&"function"==typeof a){a(c.data);try{window.pageConfig.params.isVip=c.data.isVip,window.pageConfig.page.uid=c.data.userId}catch(e){}}try{var f={uid:c.data.userId,isVip:c.data.isVip,tel:c.data.mobile};d.setCookieWithExpPath("ui",JSON.stringify(f),18e5,"/")}catch(g){}}else 40001==c.code&&b.ishareLogout()})}catch(c){}},ishareLogout:function(){d.delCookie("cuk","/",".sina.com.cn"),d.delCookie("cuk","/",".iask.com.cn"),d.delCookie("cuk","/",".iask.com"),d.delCookie("sid","/",".iask.sina.com.cn"),d.delCookie("sid","/",".iask.com.cn"),d.delCookie("sid","/",".sina.com.cn"),d.delCookie("sid","/",".ishare.iask.com.cn"),d.delCookie("sid","/",".office.iask.com"),d.delCookie("sid_ishare","/",".iask.sina.com.cn"),d.delCookie("sid_ishare","/",".iask.com.cn"),d.delCookie("sid_ishare","/",".sina.com.cn"),d.delCookie("sid_ishare","/",".ishare.iask.com.cn"),d.delCookie("_1st_l","/"),d.delCookie("ui","/"),$.post("/logout",function(){window.location.href=window.location.href})}}}),define("dist/application/api",[],function(a,b,c){var d="/gateway/pc",e="/gateway";c.exports={user:{login:d+"/usermanage/checkLogin",loginOut:"",collect:d+"/usermanage/collect",getJessionId:d+"/usermanage/getJessionId",getSessionInfo:d+"/usermanage/getSessionInfo",addFeedback:e+"/feedback/addFeedback",getFeedbackType:e+"/feedback/getFeedbackType"},normalFileDetail:{addComment:d+"/fileSync/addComment",reportContent:d+"/fileSync/addFeedback",isStore:d+"/fileSync/getFileCollect",collect:d+"/fileSync/collect",filePreDownLoad:d+"/action/downloadCheck",fileDownLoad:d+"/action/downloadUrl",getFileDownLoadUrl:e+"/content/getFileDownUrl",appraise:d+"/fileSync/appraise",getPrePageInfo:d+"/fileSync/prePageInfo",hasDownLoad:d+"/fileSync/isDownload"},officeFileDetail:{},search:{byPosition:d+"/operating/byPosition"},sms:{getCaptcha:d+"/usermanage/getSmsYzCode",sendCorpusDownloadMail:e+"/content/fileSendEmail/sendCorpusDownloadMail"},pay:{successBuyDownLoad:d+"/action/downloadNow"},coupon:{rightsSaleVouchers:e+"/rights/sale/vouchers",rightsSaleQueryPersonal:e+"/rights/sale/queryPersonal",querySeniority:e+"/rights/sale/querySeniority"},vouchers:d+"/sale/vouchers",order:{bindOrderByOrderNo:d+"/order/bindOrderByOrderNo",unloginOrderDown:d+"/order/unloginOrderDown",createOrderInfo:e+"/order/create/orderInfo"},getHotSearch:d+"/search/getHotSearch",special:{fileSaveOrupdate:e+"/comment/collect/fileSaveOrupdate"},upload:{getCategory:e+"/content/category/getSimplenessInfo",createFolder:e+"/content/saveUserFolder",getFolder:e+"/content/getUserFolders",saveUploadFile:e+"/content/webUploadFile"},recommend:{recommendConfigInfo:e+"/recommend/config/info",recommendConfigRuleInfo:e+"/recommend/config/ruleInfo"}}}),define("dist/application/app",["dist/application/method","dist/application/element","dist/application/template","dist/application/extend","dist/report/init","dist/report/handler","dist/cmd-lib/util","dist/report/columns","dist/report/config","dist/application/helper","//static3.iask.cn/resource/js/plugins/pc.iask.login.min"],function(a,b,c){var d=a("dist/application/method");return a("dist/application/element"),a("dist/application/extend"),a("dist/report/init"),window.template=a("dist/application/template"),a("dist/application/helper"),a("//static3.iask.cn/resource/js/plugins/pc.iask.login.min.js"),window.getCookie=d.getCookie,{method:d,v:"1.0.1"}}),define("dist/application/element",["dist/application/method","dist/application/template"],function(a,b,c){a("dist/application/method"),a("dist/application/template");if(window.pageConfig&&window.pageConfig.hotData){JSON.parse(window.pageConfig.hotData)}var d=function(a){var b={ele:a,init:function(){return this.ele[0].addEventListener("click",function(){$("html, body").animate({scrollTop:0},120)},!1),window.addEventListener("scroll",this,!1),this},handleEvent:function(a){var b=$(document).scrollTop();$(window).height();return b>100?this.ele.show():this.ele.hide(),b>10?$(".m-header").addClass("header-fix"):$(".m-header").removeClass("header-fix"),this}};b.init().handleEvent()};$("#backToTop").length&&d&&d($("#backToTop"))}),!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(/^$|,+/)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'console.log(3316)';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(B){throw B.temp="function anonymous($data,$filename) {"+z+"}",B}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");
b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||"anonymous",j.name="Syntax Error",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g;e.openTag="{{",e.closeTag="}}";var y=function(a,b){var c=b.split(":"),d=c.shift(),e=c.join(":")||"";return e&&(e=", "+e),"$helpers."+d+"("+a+e+")"};e.parser=function(a,b){a=a.replace(/^\s/,"");var c=a.split(" "),e=c.shift(),f=c.join(" ");switch(e){case"if":a="if("+f+"){";break;case"else":c="if"===c.shift()?" if("+c.join(" ")+")":"",a="}else"+c+"{";break;case"/if":a="}";break;case"each":var g=c[0]||"$data",h=c[1]||"as",i=c[2]||"$value",j=c[3]||"$index",k=i+","+j;"as"!==h&&(g="[]"),a="$each("+g+",function("+k+"){";break;case"/each":a="});";break;case"echo":a="print("+f+");";break;case"print":case"include":a=e+"("+c.join(",")+");";break;default:if(-1!==f.indexOf("|")){var l=b.escape;0===a.indexOf("#")&&(a=a.substr(1),l=!1);for(var m=0,n=a.split("|"),o=n.length,p=l?"$escape":"$string",q=p+"("+n[m++]+")";o>m;m++)q=y(q,n[m]);a="=#"+q}else a=d.helpers[e]?"=#"+e+"("+c.join(",")+");":"="+a}return a},"function"==typeof define?define("dist/application/template",[],function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}(),define("dist/application/extend",[],function(a,b,c){String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")}),String.prototype.stripTags||(String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>/gi,"")})}),define("dist/report/init",["dist/report/handler","dist/cmd-lib/util","dist/report/columns","dist/report/config","dist/application/method"],function(a,b,c){a("dist/report/handler")}),define("dist/report/handler",["dist/cmd-lib/util","dist/report/columns","dist/report/config","dist/application/method"],function(a,b,c){function d(a,b){this.options=$.extend(!0,g,a),this.config=$.extend(!0,h,b),this.init()}var e,f=a("dist/cmd-lib/util"),g=a("dist/report/columns"),h=a("dist/report/config"),i=a("dist/application/method");d.prototype={init:function(){this.client(),this.send(0,this.format()),this.send(2,(new Date).getTime()),gio&&pageConfig.report&&gio("page.set",pageConfig.report)},client:function(){var a="";pageConfig.page&&(a=pageConfig.page.uid||""),!a&&i.getCookie(this.config.COOKIE_CUK)&&(a="logined"),this.options.uid=a,i.getCookie(this.config.COOKIE_CIDE)?e=i.getCookie(this.config.COOKIE_CIDE):(e=(new Date).getTime()+""+Math.random(),i.setCookieWithExpPath(this.options.cid,e,2592e6,"/")),this.options.usource=f.getReferrer(),this.options.cid=e,this.clickWatch()},getIpAddress:function(){var a=this;$.getScript("//ipip.iask.cn/iplookup/search?format=js",function(b,c){"success"===c?a.options=$.extend(!0,a.options,{city:remote_ip_info.cityCode,province:remote_ip_info.provinceCode,ip:remote_ip_info.ip}):console.error("ipip获取ip信息error")})},clickWatch:function(){var a=this;$(document).delegate("."+this.config.EVENT_NAME,"click",function(b){var c=$(this).attr(a.config.CONTENT_NAME);a.setCurrEventCon(c),($.browser.msie&&$.browser.version<=8&&a.mousePosition(b).x>=0||b.originalEvent&&b.originalEvent.isTrusted)&&c&&a.push([a.config.CONTENT_NAME,c]),$(this).trigger("init",b)})},gioTrack:function(a,b){gio&&b&&gio("track",a,b)},gioPage:function(a){gio&&a&&gio("page.set",a)},push:function(a,b){a instanceof Array&&a&&a.length>1&&(a.shift(),a.length>0&&a[0]==this.config.eventCookieFlag&&(a.shift(),this.handleCookieFlag(a.join("_"))),this.options.clickName=a[0]);var c=this.format();this.send(1,c),b&&b(c)},handleCookieFlag:function(a){try{var b=i.getCookie(this.config.COOKIE_FLAG);if(b){var c=JSON.parse(b);c.v=a,c.t=(new Date).getTime(),i.setCookieWithExpPath(this.config.COOKIE_FLAG,JSON.stringify(c),3e6,"/")}}catch(d){}},format:function(){try{var a=this.options,b=[a.cid,a.uid,a.ptype,a.usource,a.fsource,a.ftype,a.format,a.cate,a.cateName,a.cate1,a.cate2,a.ip,a.province,a.city,a.clickName,a.time,a.timestamp];return b.join("_")}catch(c){}},send:function(a,b){i.get(this.config.SERVER_URL+"?"+a+"_"+encodeURIComponent(b),function(){},"")},mousePosition:function(a){try{return a=a||window.event,a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}}catch(b){}},uActionReport:function(a){$.get(this.uActionUrl+"?"+encodeURIComponent(a)+"_"+(new Date).getTime(),function(a,b){})},setCurrEventCon:function(a){i.setCookieWithExpPath("_dpclkcnt",a,3e5,"/")}},window._dataReport=new d(window.pageConfig.report),window.__pc__=window._dataReport;try{!function(){var a=document.createElement("script");a.src="//hm.baidu.com/hm.js?adb0f091db00ed439bf000f2c5cbaee7";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}catch(j){}}),define("dist/cmd-lib/util",[],function(a,b,c){var d={throttle:function(a,b){var c,d;return function(e){var f=this,g=arguments,h=+new Date;c&&c+b>h?(clearTimeout(d),d=setTimeout(function(){c=h,a.apply(f,g)},b)):(c=h,a.apply(f,g))}},debounce:function(a,b){var c=0,d=this;return function(e){c&&clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},isWeChatBrow:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("micromessenger");return b?!0:!1},getWebAppUA:function(){var a=0,b=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(b)?a=1:/android/.test(b)&&(a=0),a},validateIE8:function(){return!$.browser.msie||"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},validateIE9:function(){return!$.browser.msie||"9.0"!=$.browser.version&&"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},getReferrer:function(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},getPageRef:function(a){var b=this,c=0;return(b.is360cookie(a)||b.is360cookie("360"))&&(c=1),b.is360wkCookie()&&(c=3),c},is360cookie:function(a){var b=this,c=b.getCookie("_r_so");if(c)for(var d=c.split("_"),e=0;e<d.length;e++)if(d[e]==a)return!0;return!1},add360wkCookie:function(){this.setCookieWithExpPath("_360hz","1",18e5,"/")},is360wkCookie:function(){return null==getCookie("_360hz")?!1:!0},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},findRefer:function(){var a=document.referrer,b="other";return/https?\:\/\/[^\s]*\/f\/.*$/g.test(a)?b="pindex":/https?\:\/\/[^\s]*\/d\/.*$/g.test(a)?b="landing":/https?\:\/\/[^\s]*\/c\/.*$/g.test(a)?b="pcat":/https?\:\/\/[^\s]*\/search\/.*$/g.test(a)?b="psearch":/https?\:\/\/[^\s]*\/t\/.*$/g.test(a)?b="ptag":/https?\:\/\/[^\s]*\/[u|n]\/.*$/g.test(a)?b="popenuser":/https?\:\/\/[^\s]*\/ucenter\/.*$/g.test(a)?b="puser":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.$/g.test(a)?b="ishareindex":/https?\:\/\/[^\s]*\/theme\/.*$/g.test(a)?b="theme":/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},showAlertDialog:function(a,b,c){var d=$(".common-bgMask"),e=$(".common-dialog");e.find("h2[name='title']").text(a),e.find("span[name='content']").html(b),e.find("a.close,a.btn-dialog").unbind("click").click(function(){d.hide(),e.hide(),c&&!$(this).hasClass("close")&&c()}),d.show(),e.show()},browserVersion:function(a){var b=a.indexOf("Opera")>-1,c=a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b,d=a.indexOf("Edge")>-1,e=a.indexOf("Firefox")>-1,f=a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome"),g=a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1;if(c){var h=new RegExp("MSIE (\\d+\\.\\d+);");h.test(a);var i=parseFloat(RegExp.$1);return 7===i?"IE7":8===i?"IE8":9===i?"IE9":10===i?"IE10":11===i?"IE11":12===i?"IE12":"IE"}return b?"Opera":d?"Edge":e?"Firefox":f?"Safari":g?"Chrome":"unKnow"},getBrowserInfo:function(a){var b={},c=a.toLowerCase(),d=/(msie|firefox|chrome|opera|version|trident).*?([\d.]+)/,e=c.match(d);return e&&e.length>=2?(b.browser=e[1].replace(/version/,"'safari")||"unknow",b.ver=e[2]||"1.0.0"):(b.browser="unknow",b.ver="1.0.0"),b.browser+"/"+b.ver}};c.exports=d}),define("dist/report/columns",[],function(a,b,c){return{cid:"",uid:"",ptype:"",usource:"",fsource:"",ftype:"",format:"",cate:"",cateName:"",cate1:"",cate2:"",ip:"",province:"",city:"",clickName:"",time:"",timestamp:""}}),define("dist/report/config",[],function(a,b,c){return{COOKIE_FLAG:"_dplf",COOKIE_CIDE:"_dpcid",COOKIE_CUK:"cuk",COOKIE_TIMEOUT:3e6,SERVER_URL:"/dataReport",UACTION_URL:"/uAction",EVENT_NAME:"pc_click",CONTENT_NAME:"pcTrackContent",BILOG_CONTENT_NAME:"bilogContent",ishareTrackEvent:"_ishareTrackEvent",eventCookieFlag:"_eventCookieFlag",EVENT_REPORT:!1,AUTO_PV:!1}}),define("dist/application/helper",[],function(a,b,c){template.helper("encodeValue",function(a){return encodeURIComponent(encodeURIComponent(a))})}),define("dist/common/bilog",["base64","dist/cmd-lib/util","dist/application/method","dist/report/config"],function(a,b,c){function d(){sessionStorage.setItem("sessionID",z)}function e(a,b){!new RegExp("/f/").test(a)||new RegExp("referrer=").test(a)||new RegExp("/f/down").test(a)?new RegExp("/pay/payConfirm.html").test(a)?(b.prePageID="PC-M-PAY-F-L",b.prePageName="支付页-付费资料-列表页"):new RegExp("/pay/payQr.html\\?type=2").test(a)?(b.prePageID="PC-M-PAY-F-QR",b.prePageName="支付页-付费资料-支付页"):new RegExp("/pay/vip.html").test(a)?(b.prePageID="PC-M-PAY-VIP-L",b.prePageName="支付页-VIP-套餐列表页"):new RegExp("/pay/payQr.html\\?type=0").test(a)?(b.prePageID="PC-M-PAY-VIP-QR",b.prePageName="支付页-VIP-支付页"):new RegExp("/pay/privilege.html").test(a)?(b.prePageID="PC-M-PAY-PRI-L",b.prePageName="支付页-下载特权-套餐列表页"):new RegExp("/pay/payQr.html\\?type=1").test(a)?(b.prePageID="PC-M-PAY-PRI-QR",b.prePageName="支付页-下载特权-支付页"):new RegExp("/pay/success").test(a)?(b.prePageID="PC-M-PAY-SUC",b.prePageName="支付成功页"):new RegExp("/pay/fail").test(a)?(b.prePageID="PC-M-PAY-FAIL",b.prePageName="支付失败页"):new RegExp("/node/f/downsucc.html").test(a)?/unloginFlag=1/.test(a)?(b.prePageID="PC-M-FDPAY-SUC",b.prePageName="免登购买成功页"):(b.prePageID="PC-M-DOWN-SUC",b.prePageName="下载成功页"):new RegExp("/node/f/downfail.html").test(a)?(b.prePageID="PC-M-DOWN-FAIL",b.prePageName="下载失败页"):new RegExp("/search/home.html").test(a)&&(b.prePageID="M-M-SR",b.prePageName="搜索结果页"):(b.prePageID="PC-M-FD",b.prePageName="资料详情页")}function f(){$.getScript("//ipip.iask.cn/iplookup/search?format=js",function(a,b){"success"===b?(u.setCookieWithExp("ip",remote_ip_info.ip,3e5,"/"),C.ip=remote_ip_info.ip):console.error("ipip获取ip信息error")})}function g(){var a="";return-1!=window.navigator.userAgent.indexOf("Windows NT 10.0")?a="Windows 10":-1!=window.navigator.userAgent.indexOf("Windows NT 6.2")?a="Windows 8":-1!=window.navigator.userAgent.indexOf("Windows NT 6.1")?a="Windows 7":-1!=window.navigator.userAgent.indexOf("Windows NT 6.0")?a="Windows Vista":-1!=window.navigator.userAgent.indexOf("Windows NT 5.1")?a="Windows XP":-1!=window.navigator.userAgent.indexOf("Windows NT 5.0")?a="Windows 2000":-1!=window.navigator.userAgent.indexOf("Mac")?a="Mac/iOS":-1!=window.navigator.userAgent.indexOf("X11")?a="UNIX":-1!=window.navigator.userAgent.indexOf("Linux")&&(a="Linux"),a}function h(a){setTimeout(function(){console.log(a),$.getJSON("https://dw.iask.com.cn/ishare/jsonp?data="+s.encode(JSON.stringify(a))+"&jsoncallback=?",function(a){console.log(a)})})}function i(a,b){var c=a;if(a&&b){for(var d in a)if("var"===d)for(var e in b)c["var"][e]=b[e];else b[d]&&(c[d]=b[d]);console.log("埋点参数:",c),h(c)}}function j(){var a=JSON.parse(JSON.stringify(C));e(document.referrer,a);var b={channel:""},c=u.getCookie("bc");c&&(b.channel=c),a.eventType="page",a.eventID="NE001",a.eventName="normalPageView",a.pageID=$("#ip-page-id").val()||"",a.pageName=$("#ip-page-name").val()||"",a.pageURL=window.location.href,i(a,b)}function k(){var a={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePrice:window.pageConfig.params.moneyPrice,fileCouponCount:window.pageConfig.params.file_volume,filePayType:w[window.pageConfig.params.file_state],fileFormat:window.pageConfig.params.file_format,fileProduceType:window.pageConfig&&window.pageConfig.params?window.pageConfig.params.fsource:"",fileCooType:"",fileUploaderID:window.pageConfig.params.file_uid},b=window.pageConfig&&window.pageConfig.params?window.pageConfig.params.is360:"";/https?\:\/\/[^\s]*so.com.*$/g.test(document.referrer)&&!/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&"true"==b&&(a.fileCooType="360onebox",u.setCookieWithExp("bc","360onebox",18e5,"/")),/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&(a.fileCooType="360wenku",u.setCookieWithExp("bc","360wenku",18e5,"/"));var c=JSON.parse(JSON.stringify(C));e(document.referrer,c),c.eventType="page",c.eventID="SE002",c.eventName="fileDetailPageView",c.pageID=$("#ip-page-id").val()||"",c.pageName=$("#ip-page-name").val()||"",c.pageURL=window.location.href,u.setCookieWithExp("bf",JSON.stringify(a),18e5,"/"),i(c,a)}function l(a){var b=JSON.parse(JSON.stringify(C));if(e(document.referrer,b),b.eventType="page",b.eventID="SE009",b.eventName="payFileResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,a.fileID||(a.fileID=u.getParam("fid")||$("#ip-page-fid").val()),!a.filePayType){var c=$("#ip-page-fstate").val()||1;a.filePayType=w[c]}i(b,a)}function m(a){var b=JSON.parse(JSON.stringify(C));e(document.referrer,b),b.eventType="page",b.eventID="SE011",b.eventName="payVipResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,a.orderID||(a.orderID=u.getParam("orderNo")||""),i(b,a)}function n(a){var b=JSON.parse(JSON.stringify(C));e(document.referrer,b),b.eventType="page",b.eventID="SE013",b.eventName="payPrivilegeResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,i(b,a)}function o(a){var b=JSON.parse(JSON.stringify(C));e(document.referrer,b),b.eventType="page",b.eventID="SE014",b.eventName="downResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,i(b,a)}function p(a,b){for(var c in b)a[c]&&(b[c]=a[c])}function q(a,b,c,d,f){var g=JSON.parse(JSON.stringify(C));e(document.referrer,g),g.eventType="click",g.eventID=a,g.eventName=b,g.pageID=$("#ip-page-id").val(),g.pageName=$("#ip-page-name").val(),g.pageURL=window.location.href,g.domID=c,g.domName=d,g.domURL=window.location.href,i(g,f)}function r(a,b,c){var d=$("#ip-page-type").val();if("pindex"==d){var e={fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:""},f=u.getCookie("bf");if(f&&p(JSON.parse(f),e),"fileDetailUpDown"==a||"fileDetailMiddleDown"==a||"fileDetailBottomDown"==a)e.downType="","fileDetailUpDown"==a?q("SE003","fileDetailDownClick","fileDetailUpDown","资料详情页顶部立即下载",e):"fileDetailMiddleDown"==a?q("SE003","fileDetailDownClick","fileDetailMiddleDown","资料详情页中部立即下载",e):"fileDetailBottomDown"==a&&q("SE003","fileDetailDownClick","fileDetailBottomDown","资料详情页底部立即下载",e),delete e.downType;else if("fileDetailUpBuy"==a)q("SE004","fileDetailBuyClick","fileDetailUpBuy","资料详情页顶部立即购买",e);else if("fileDetailMiddleBuy"==a)q("SE004","fileDetailBuyClick","fileDetailMiddleBuy","资料详情页中部立即购买",e);else if("fileDetailBottomBuy"==a)q("SE004","fileDetailBuyClick","fileDetailBottomBuy","资料详情页底部立即购买",e);else if("fileDetailMiddleOpenVip8"==a)q("SE005","fileDetailOpenVipClick","fileDetailMiddleOpenVip8","资料详情页中部开通vip，8折购买",e);else if("fileDetailBottomOpenVip8"==a)q("SE005","fileDetailOpenVipClick","fileDetailBottomOpenVip8","资料详情页底部开通vip，8折购买",e);else if("fileDetailMiddleOpenVipPr"==a)q("SE005","fileDetailOpenVipClick","fileDetailMiddleOpenVipPr","资料详情页中部开通vip，享更多特权",e);else if("fileDetailBottomOpenVipPr"==a)q("SE005","fileDetailOpenVipClick","fileDetailBottomOpenVipPr","资料详情页底部开通vip，享更多特权",e);else if("fileDetailComment"==a)q("SE006","fileDetailCommentClick","fileDetailComment","资料详情页评论",e);else if("fileDetailScore"==a){var g=b.find(".on:last").text();e.fileScore=g?g:"",q("SE007","fileDetailScoreClick","fileDetailScore","资料详情页评分",e),delete e.fileScore}}if("payFile"==a){var e={orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",filePrice:"",fileSalePrice:""},f=u.getCookie("bf");f&&p(JSON.parse(f),e),q("SE008","payFileClick","payFile","支付页-付费资料-立即支付",e)}else if("payVip"==a){var e={orderID:u.getParam("orderNo")||"",vipID:$(".ui-tab-nav-item.active").data("vid"),vipName:$(".ui-tab-nav-item.active p.vip-time").text()||"",vipPrice:$(".ui-tab-nav-item.active p.vip-price strong").text()||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||""};q("SE010","payVipClick","payVip","支付页-VIP-立即支付",e)}else if("payPrivilege"==a){var e={orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",privilegeName:$(".ui-tab-nav-item.active p.privilege-price").text()||"",privilegePrice:$(".ui-tab-nav-item.active").data("activeprice")||"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:""},f=u.getCookie("bf");f&&p(JSON.parse(f),e),q("SE012","payPrivilegeClick","payPrivilege","支付页-下载特权-立即支付",e)}var e={phone:$("#ip-mobile").val()||"",vipStatus:$("#ip-isVip").val()||"",channel:"",cashBalance:"",integralNumber:"",idolNumber:"",fileCategoryID:"",fileCategoryName:""};D&&(e.vipStatus=D.isVip||"",e.phone=D.tel||"");var h=u.getCookie("bc");h&&(e.channel=h),"paySuccessBacDown"==a?q("NE002","normalClick","paySuccessBacDown","支付成功页-返回下载",e):"paySuccessOpenVip"==a?q("NE002","normalClick","paySuccessOpenVip","支付成功页-开通VIP",e):"downSuccessOpenVip"==a?q("NE002","normalClick","downSuccessOpenVip","下载成功页-开通VIP",e):"downSuccessContinueVip"==a?q("NE002","normalClick","downSuccessContinueVip","下载成功页-续费VIP",e):"downSuccessBacDetail"==a?q("NE002","normalClick","downSuccessBacDetail","下载成功页-返回详情页",e):"downSuccessBindPhone"==a?q("NE002","normalClick","downSuccessBindPhone","下载成功页-立即绑定",e):"searchresult"==a?q("SE016","normalClick","searchResultClick","搜索结果页点击",e):"viewExposure"==a?(e.moduleID=c,q("SE006","modelView","","",e)):"similarFileClick"==a?q("SE017","fileListNormalClick","similarFileClick","资料列表常规点击",e):"underSimilarFileClick"==a?q("SE017","fileListNormalClick","underSimilarFileClick","点击底部猜你喜欢内容时",e):"downSucSimilarFileClick"==a?q("SE017","fileListNormalClick","downSucSimilarFileClick","下载成功页猜你喜欢内容时",e):"markFileClick"==a&&q("SE019","markClick","markFileClick","资料收藏点击",e)}var s=a("base64").Base64,t=a("dist/cmd-lib/util"),u=a("dist/application/method"),v=a("dist/report/config"),w=["","free","down","cost","online","vipFree","vipOnly"],x=u.getCookie("ip")||f(),y=u.getCookie("cid");y||(y=(new Date).getTime()+""+Math.random(),u.setCookieWithExp("cid",y,2592e6,"/"));var z=(new Date).getTime()+""+Math.random(),A=18e5,B=sessionStorage.getItem("sessionID")||"";B||d(),z-B>A&&d();var C={eventType:"",eventID:"",eventName:"",eventTime:String((new Date).getTime()),reportTime:String((new Date).getTime()),sdkVersion:"V1.0.3",terminalType:"0",loginStatus:u.getCookie("cuk")?1:0,visitID:u.getCookie("gr_user_id")||"",userID:"",sessionID:sessionStorage.getItem("sessionID")||y||"",productName:"ishare",productCode:"0",productVer:"V4.5.0",pageID:"",pageName:"",pageURL:"",ip:x||"",resolution:document.documentElement.clientWidth+"*"+document.documentElement.clientHeight,browserVer:t.getBrowserInfo(navigator.userAgent),osType:g(),moduleID:"",moduleName:"",appChannel:"",prePageID:"",prePageName:"",prePageURL:document.referrer,domID:"",domName:"",domURL:"",location:"",deviceID:"",deviceBrand:"",deviceModel:"",deviceLanguage:navigator.language,mac:"",osVer:"",networkType:"",networkProvider:"","var":{}},D=u.getCookie("ui");D&&(D=JSON.parse(D),C.userID=D.uid||""),e(document.referrer,C),$(function(){setTimeout(function(){var a=$("#ip-page-id").val();"PC-M-FD"==a&&k(),"PC-O-SR"!=a&&j();var b={payResult:1,orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",vipID:"",vipName:"",vipPrice:""},c={payResult:1,orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",privilegeID:"",privilegeName:"",privilegePrice:""},d={payResult:1,orderID:u.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",filePrice:"",fileSalePrice:""},e=u.getCookie("bf"),f=u.getCookie("br"),g=window.location.href;if("PC-M-PAY-SUC"==a||"PC-O-PAY-SUC"==a){if(g.indexOf("type=0")>-1)f&&p(JSON.parse(f),b),m(b);else if(g.indexOf("type=1")>-1)e&&p(JSON.parse(e),c),f&&p(JSON.parse(f),c),n(c);else if(g.indexOf("type=2")>-1){e&&p(JSON.parse(e),d);var f=u.getCookie("br");f&&p(JSON.parse(f),d),l(d)}}else("PC-M-PAY-FAIL"==a||"PC-O-PAY-FAIL"==a)&&(g.indexOf("type=0")>-1?(f&&p(JSON.parse(f),b),b.payResult=0,m(b)):g.indexOf("type=1")>-1?(e&&p(JSON.parse(e),c),f&&p(JSON.parse(f),c),c.payResult=0,n(c)):g.indexOf("type=2")>-1&&(e&&p(JSON.parse(e),d),f&&p(JSON.parse(f),d),d.payResult=0,l(d)));var h={downResult:1,fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:""};if("PC-M-DOWN-SUC"==a){var e=u.getCookie("bf");e&&p(JSON.parse(e),h),h.downResult=1,o(h)}else if("PC-M-DOWN-FAIL"==a){var e=u.getCookie("bf");e&&p(JSON.parse(e),h),h.downResult=0,o(h)}},1e3)}),$(document).delegate("."+v.EVENT_NAME,"click",function(a){var b=$(this),c=b.attr(v.BILOG_CONTENT_NAME);console.log("cnt:",c),c&&setTimeout(function(){r(c,b)})}),c.exports={clickEvent:function(a){var b=a.attr(v.BILOG_CONTENT_NAME);console.log("cnt-导出的:",b),b&&setTimeout(function(){r(b,a)})},viewExposure:function(a){var b="viewExposure";b&&setTimeout(function(){r(b,$this,a)})}}}),define("dist/detail/common",["dist/application/method","dist/application/api"],function(a,b,c){var d=a("dist/application/method"),e=a("dist/application/api"),f=a("dist/detail/template/pay_btn_tmp.html"),g=(a("dist/detail/template/pay_middle_tmp.html"),a("dist/detail/template/pay_header.tmp.html"),null),h={isDownload:window.pageConfig.page.isDownload,vipFreeFlag:window.pageConfig.params.vipFreeFlag,isVip:0,perMin:window.pageConfig.params.g_permin,vipDiscountFlag:window.pageConfig.params.vipDiscountFlag,ownVipDiscountFlag:window.pageConfig.params.ownVipDiscountFlag,volume:window.pageConfig.params.file_volume,moneyPrice:window.pageConfig.params.moneyPrice||window.pageConfig.params.productPrice,fid:window.pageConfig.params.g_fileId,title:window.pageConfig.page.fileName,format:window.pageConfig.params.file_format,cdnUrl:_head,productType:window.pageConfig.page.productType,productPrice:window.pageConfig.page.productPrice},i=function(a){var b=$("#unLogin"),c=$("#haveLogin"),d=$(".top-user-more"),e=$(".icon-iShare-text"),f=$(".btn-user-more"),g=$(".vip-status");$(".icon-iShare");$(".top-bar .news").removeClass("hide").find("#user-msg").text(a.msgCount),e.html("1"===a.isVip?"续费VIP":"开通VIP"),f.text("1"===a.isVip?"续费":"开通"),"0"===a.isVip?$(".open-vip").show().siblings("a").hide():$(".xf-open-vip").show().siblings("a").hide();var h=null;if(1==a.isVip?(h=g.find('p[data-type="2"]'),h.find(".expire_time").html(a.expireTime),h.show().siblings().hide(),d.addClass("top-vip-more")):1==a.userType&&(h=g.find('p[data-type="3"]'),h.show().siblings().hide()),b.hide(),c.find(".icon-detail").html(a.nickName),c.find("img").attr("src",a.weiboImage),d.find("img").attr("src",a.weiboImage),d.find("#userName").html(a.nickName),c.show(),$(".user-avatar img").attr("src",a.weiboImage),$(".name-wrap .name-text").html(a.nickName),"1"===a.isVip){var i="您的VIP将于"+a.expireTime+"到期,剩余"+a.privilege+"次下载特权";$(".detail-right-normal-wel").html(i),$(".detail-right-vip-wel").html("会员尊享权益"),$(".btn-mui").hide(),$("#memProfit").html("VIP权益")}else $(".mui-privilege-list li").removeClass("hide")},j=function(){$("#footer-btn").html(template.compile(f)({data:h}))},k=function(){var a=0;if(1==h.isVip&&h.vipDiscountFlag&&h.ownVipDiscountFlag){a=(1e3*h.moneyPrice/1250).toFixed(2),$(".js-original-price").html(a);var b=g.fileDiscount;b&&80!==b&&$(".vip-price").html("&yen;"+(h.moneyPrice*(b/100)).toFixed(2))}if("3"===h.perMin&&h.vipDiscountFlag&&h.ownVipDiscountFlag){a=(1e3*h.moneyPrice/1250).toFixed(2),$(".js-original-price").html(a);var c=(h.moneyPrice-a).toFixed(2);$("#vip-save-money").html(c)}},l=function(){var a=d.validateIE9()?1:0,b=window.pageConfig,c="?fid="+b.params.g_fileId+"&validateIE9="+a;d.get(e.normalFileDetail.getPrePageInfo+c,function(a){if(0==a.code){b.page.preRead=a.data.preRead||50;var c=d.getParam("page");if(c>0&&(b.page.is360page="true",b.page.initReadPage=Math.min(c,50)),b.page.status=h.status=a.data.status,"3"===b.params.file_state){var e=a.data.url||b.imgUrl[0],f=a.data.pinfo.bytes||{},g=[];for(var i in f){var l=f[i],m=l[0]+"-"+l[1],n=d.changeURLPar(e,"range",m);g.push(n)}b.imgUrl=g}d.getCookie("cuk")&&j(),k()}})};return{initData:h,userData:g,beforeLogin:function(){},afterLogin:function(a){g=a,h.isVip=parseInt(a.isVip,10),i(a),l()}}}),define("dist/detail/template/pay_btn_tmp.html",[],'<div class="bottom-fix qwe">\n        {{if data.isDownload === "n"}}\n            <!--仅在线阅读-->\n            {{if data.isVip == 1}}\n                <div class="data-item fl">\n                    <h2 class="data-title fl"><i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}</h2>\n                    <span class="online-read">仅供在线阅读</span>\n                </div>\n                <div class="integral-con fr">\n                    <a id="searchRes" class="btn-fix-vip fl" ><i class="icon-detail"></i>寻找资料</a>\n                </div>\n\n            {{else}}\n                <div class="data-item fl">\n                    <h2 class="data-title fl"><i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}</h2>\n                    <span class="online-read">仅供在线阅读</span>\n                </div>\n                <div class="integral-con fr">\n                    <a class="btn-fix-vip js-buy-open fl pc_click" pcTrackContent="joinVip-2" bilogContent="fileDetailBottomOpenVip8" data-type="vip">开通VIP，享更多特权</a>\n                </div>\n            {{/if}}\n        {{else}}\n            <!--VIP免费-->\n            {{if data.vipFreeFlag == 1}}\n                <div class="data-item fl">\n                    <h2 class="data-title fl"><i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}</h2>\n                </div>\n                <div class="integral-con fr">\n                    <a class="btn-fix-bottom fl pc_click" pcTrackContent="downloadBtn-3" bilogContent="fileDetailBottomDown" data-toggle="download">立即下载</a>\n                </div>\n            {{else}}\n                {{if data.perMin == "3"}}\n                    <!--现金文档 -->\n                    <!--专享8折 加入vip8折购买 立即下载 立即购买  && data.ownVipDiscountFlag == 1-->\n                      {{if data.isVip == 1 && data.vipDiscountFlag == 1 }}\n                        <div class="data-item fl">\n                            <h2 class="data-title fl">\n                                <i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}\n                            </h2>\n                        </div>\n                        <div class="integral-con fr">\n                            {{if data.status!=2}}\n                                <div class="price-con price-more fl">\n                                    {# <p class="price vip-price">¥{{(data.moneyPrice*1000/1250).toFixed(2)}}</p>\n                                    <p class="origin-price">原价&yen; {{data.moneyPrice}}</p> #}\n                                     <p class="price vip-price">¥{{data.productPrice}}</p>\n                                    <p class="origin-price">原价&yen; {{data.productPrice}}</p>\n                                </div>\n                                 <a class="btn-fix-bottom js-buy-open fl pc_click" pcTrackContent="buyBtn-3" bilogContent="fileDetailBottomBuy" data-type="file">立即下载</a>\n                            {{else}}\n                                 <a class="btn-fix-bottom fl pc_click" pcTrackContent="downloadBtn-3" bilogContent="fileDetailBottomDown" data-toggle="download">立即下载</a>\n                            {{/if}}\n                        </div>\n                      {{else if data.isVip == 0 && data.vipDiscountFlag == 1 && data.ownVipDiscountFlag== 1}}\n                        <div class="data-item fl">\n                            <h2 class="data-title fl"><i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}</h2>\n                        </div>\n                        <div class="integral-con fr">\n                            {{if data.status!=2}}\n                                <div class="price-con price-more fl">\n                                    <!--现金文档价格 -->\n                                    <p class="price" style="">&yen;{{data.productPrice}}</p>\n                                    <!--现金文档 有折扣 非vip会员 -->\n                                    {# <p class="vip-sale-price">会员价&yen;<span class="js-original-price">{{(data.productPrice*1000/1250).toFixed(2)}}</span>起</p> #}\n                                      <p class="vip-sale-price">会员价&yen;<span class="js-original-price">{{data.productPrice}}</span>起</p>\n                                </div>\n                                <a class="btn-fix-bottom btn-fix-border js-buy-open fl pc_click" pcTrackContent="buyBtn-3" bilogContent="fileDetailBottomBuy" data-type="file">立即下载</a>\n                                {# <a class="btn-vip-more js-buy-open fl pc_click" pcTrackContent="joinVip-2" bilogContent="fileDetailBottomOpenVip8" data-type="vip">\n                                    <p class="text">开通VIP</p>\n                                    <p class="sale-text">8折起</p>\n                                    <div class="vip-d-share">\n                                        <div class="vip-d-inter">\n                                            <i class="before"></i>\n                                            <i class="after"></i>\n                                            <p>开通VIP，本资料可享8折购买，立省<span id="vip-save-money"></span>元</p>\n                                        </div>\n                                    </div>\n                                </a> #}\n                            {{else}}\n                                 <a class="btn-fix-bottom fl pc_click" pcTrackContent="downloadBtn-3" bilogContent="fileDetailBottomDown" data-toggle="download">立即下载</a>\n                            {{/if}}\n                        </div>\n                      {{else}}\n                        <div class="data-item fl">\n                            <h2 class="data-title fl">\n                                <i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}\n                            </h2>\n                        </div>\n\n                        <div class="integral-con fr">\n                            {{if data.status!=2}}\n                                <div class="price-con fl">\n                                    <!--现金文档价格 -->\n                                    {# <p class="price" style="">¥{{data.moneyPrice}}</p> #}\n                                     <p class="price" style="">¥{{data.productPrice}}</p>\n                                </div>\n                                <a class="btn-fix-bottom js-buy-open  fl pc_click" pcTrackContent="buyBtn-3" bilogContent="fileDetailBottomBuy" loginOffer="buyBtn-2" data-type="file">立即购买</a>\n                            {{else}}\n                                <a class="btn-fix-bottom fl pc_click" pcTrackContent="downloadBtn-3" bilogContent="fileDetailBottomDown" data-toggle="download">立即下载</a>\n                            {{/if}}\n                        </div>\n                    {{/if}}\n                {{else}}\n                    <!--vip-->\n                    {{if data.isVip == 1}}\n                            <div class="data-item fl">\n                                <h2 class="data-title fl">\n                                    <i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}\n                                </h2>\n                            </div>\n                            <div class="integral-con fr">\n                                {{if data.volume > 0}}\n                                    <div class="price-con fl">\n                                        <p class="price">{{data.volume}}下载券</p>\n                                    </div>\n                                {{/if}}\n                                <a class="btn-fix-bottom  fl pc_click" pcTrackContent="downloadBtn-3" bilogContent="fileDetailBottomDown" data-toggle="download">立即下载</a>\n                            </div>\n                    {{else}}\n                        {{if data.volume > 0}}\n\n                            <div class="data-item fl">\n                                <h2 class="data-title fl">\n                                    <i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}\n                                </h2>\n                            </div>\n\n                            <div class="integral-con fr">\n                                <div class="price-con fl">\n                                    <p class="price" style="">{{data.volume}}下载券</p>\n                                </div>\n                                <a class="btn-fix-bottom  fl pc_click" pcTrackContent="downloadBtn-3" bilogContent="fileDetailBottomDown" data-toggle="download" >立即下载</a>\n                            </div>\n                        {{else}}\n                            <div class="data-item fl">\n                                <h2 class="data-title fl">\n                                    <i class="ico-big-data ico-big-{{data.format}}"></i>{{data.title}}\n                                </h2>\n                            </div>\n\n                            <div class="integral-con fr">\n                                <a class="btn-fix-bottom  fl pc_click" pcTrackContent="downloadBtn-3" bilogContent="fileDetailBottomDown" data-toggle="download" >立即下载</a>\n                            </div>\n                        {{/if}}\n                    {{/if}}\n                {{/if}}\n            {{/if}}\n        {{/if}}\n</div>\n'),
define("dist/detail/template/pay_middle_tmp.html",[],'{{if data.isDownload === "n"}}\n<!--仅在线阅读-->\n{{if data.isVip == 1}}\n<div class="detail-wx-wrap">\n    <p class="detail-wx-text">本资料仅支持在线阅读，VIP可扫码寻找。</p>\n    <div class="detail-wx-entry">\n        <div class="wx-entry-con">\n            <div class="wx-code-con">\n                <img src="//pic.iask.com.cn/mini/qrc_{{data.fid}}.png">\n                <p>资料小程序码</p>\n            </div>\n            <div class="entry-main">\n                <div class="wx-step-con">\n                    <p class="step-text" style="text-align: left;">使用微信“扫一扫”扫码寻找资料</p>\n                    <div class="wx-step-list cf">\n                        <div class="step-num">\n                            <p>1</p>\n                            <p class="step-num-text">打开微信</p>\n                        </div>\n                        <i class="step-arrow"></i>\n                        <div class="step-num">\n                            <p>2</p>\n                            <p class="step-num-text">扫描小程序码</p>\n                        </div>\n                        <i class="step-arrow"></i>\n                        <div class="step-num">\n                            <p>3</p>\n                            <p class="step-num-text">发布寻找信息</p>\n                        </div>\n                        <i class="step-arrow"></i>\n                        <div class="step-num">\n                            <p>4</p>\n                            <p class="step-num-text">等待寻找结果</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n{{else}}\n<div class="btn-data-con">\n    <p>仅供在线阅读</p>\n    <div class="btn-con mt18">\n        <a class="btn-detail-vip js-buy-open pc_click" pcTrackContent="joinVip-1" bilogContent="fileDetailMiddleOpenVipPr" loginOffer="joinVip-1" data-type="vip"><i class="icon-detail"></i>开通VIP，享更多特权</a>\n    </div>\n</div>\n{{/if}}\n{{else}}\n<div class="btn-data-con direct-dowonload-01">\n    <!--VIP免费-->\n    {{if data.vipFreeFlag == 1}}\n        <div class="btn-con mt18">\n            <a class="btn-state-red pc_click" pcTrackContent=\'downloadBtn-2\' bilogContent="fileDetailMiddleDown" data-toggle="download"><i class="icon-detail"></i>立即下载</a>\n        </div>\n    {{else}}\n    {{if data.perMin == "3"}}\n    <!--现金文档 -->\n    <!--专享8折 加入vip8折购买 立即下载 立即购买-->\n    {{if data.isVip == 1 && data.vipDiscountFlag ==1 && data.ownVipDiscountFlag ==1}}\n        {{if data.status!=2}}\n            <div class="price-item">\n                <p class="price-text vip-price">&yen; {{(data.moneyPrice*1000/1250).toFixed(2)}}</p>\n                <p class="origin-price">原价&yen; {{data.moneyPrice}}</p>\n            </div>\n            <div class="btn-con mt18">\n                <a class="btn-state-red btn-buy-solid js-buy-open  pc_click"  pcTrackContent="buyBtn-2" bilogContent="fileDetailMiddleBuy" data-type="file">立即购买</a>\n            </div>\n        {{else}}\n            <div class="btn-con mt18">\n                <a class="btn-state-red btn-buy-solid pc_click" pcTrackContent=\'downloadBtn-2\' data-toggle="download" loginOffer="downloadBtn-2">立即下载</a>\n            </div>\n        {{/if}}\n\n    {{else if data.isVip == 0 && data.vipDiscountFlag == 1 && data.ownVipDiscountFlag== 1}}\n\n        {{if data.status!=2}}\n            <div class="price-item">\n                <p class="price-text">¥{{data.moneyPrice}}</p>\n                <p class="vip-sale-price">会员价&yen;{{(data.moneyPrice*1000/1250).toFixed(2)}}起</p>\n            </div>\n            <div class="btn-con mt18">\n                <a class="btn-state-red btn-buy-solid btn-buy-border js-buy-open pc_click" pcTrackContent="buyBtn-2" bilogContent="fileDetailMiddleBuy" loginOffer="buyBtn-2" data-type="file">立即购买</a>\n                <a class="btn-detail-vip js-buy-open pc_click" pcTrackContent="joinVip-1" bilogContent="fileDetailMiddleOpenVip8" loginOffer="joinVip-1" data-type="vip"><i class="icon-detail"></i>开通VIP, 8折起</a>\n            </div>\n        {{else}}\n            <div class="btn-con mt18">\n                <a class="btn-state-red btn-buy-solid pc_click" pcTrackContent=\'downloadBtn-2\' data-toggle="download" loginOffer="downloadBtn-2">立即下载</a>\n            </div>\n        {{/if}}\n\n    {{else}}\n        {{if data.status!=2}}\n            <div class="price-item">\n                <div class="price-item">\n                    <p class="price-text">&yen;{{data.moneyPrice}}</p>\n                </div>\n            </div>\n            <div class="btn-con mt18">\n                <a class="btn-state-red btn-buy-solid js-buy-open pc_click" pcTrackContent="buyBtn-2" bilogContent="fileDetailMiddleBuy" loginOffer="buyBtn-2" data-type="file">立即购买</a>\n            </div>\n        {{else}}\n            <div class="btn-con mt18">\n                <a class="btn-state-red btn-buy-solid pc_click" pcTrackContent=\'downloadBtn-2\' data-toggle="download" loginOffer="downloadBtn-2">立即下载</a>\n            </div>\n        {{/if}}\n    {{/if}}\n    {{else}}\n    <!-- 下载券下载 -->\n        {{ if data.volume >0 }}\n            <p class="ticket-num"><i class="icon-detail"></i>{{data.volume}}下载券</p>\n        {{/if}}\n        <div class="btn-con mt18">\n            <a class="btn-state-red pc_click" pcTrackContent=\'downloadBtn-2\' bilogContent="fileDetailMiddleDown" data-toggle="download"><i class="icon-detail"></i>立即下载</a>\n        </div>\n    {{/if}}\n    {{/if}}\n</div>\n{{/if}}\n\n'),define("dist/detail/template/pay_header.tmp.html",[],'{{ if data.isDownload != \'n\' }}\n    {{if data.vipFreeFlag == 1}}\n           <a class="btn-data-new pc_click" pcTrackContent="downloadBtn-0" bilogContent="fileDetailUpDown" data-toggle="download" loginOffer="downloadBtn-0">立即下载</a>\n    {{else}}\n          {{ if data.perMin == "3"}}\n                {{if data.isVip == 1 && data.vipDiscountFlag == 1 && data.ownVipDiscountFlag == 1}}\n                            {{if data.status!=2}}\n                                <a class="btn-data-new js-buy-open pc_click" pcTrackContent="buyBtn-1" bilogContent="fileDetailUpBuy" data-type="file">立即购买</a>\n                                <div class="header-price-warp header-price-more">\n                                    <p class="price vip-price">&yen; {{(data.moneyPrice*1000/1250).toFixed(2)}}</p>\n                                    <p class="origin-price">原价&yen;{{data.moneyPrice}}</p>\n                                </div>\n                            {{else}}\n                                 <a class="btn-data-new pc_click" pcTrackContent="downloadBtn-0" bilogContent="fileDetailUpDown" data-toggle="download" loginOffer="downloadBtn-0">立即下载</a>\n                            {{/if}}\n                {{else if data.isVip == 0 && data.vipDiscountFlag == 1 && data.ownVipDiscountFlag== 1}}\n                            {{if data.status!=2}}\n                                <a class="btn-data-new js-buy-open pc_click" pcTrackContent="buyBtn-1" bilogContent="fileDetailUpBuy" data-type="file">立即购买</a>\n                                <div class="header-price-warp header-price-more">\n                                    <p class="price">&yen;{{data.moneyPrice}}</p>\n                                    <p class="vip-sale-price">会员价&yen;{{(data.moneyPrice*1000/1250).toFixed(2)}}起</p>\n                                </div>\n                            {{else}}\n                                 <a class="btn-data-new pc_click" pcTrackContent="downloadBtn-0" bilogContent="fileDetailUpDown" data-toggle="download" loginOffer="downloadBtn-0">立即下载</a>\n                            {{/if}}\n                {{else}}\n                            {{if data.status!=2}}\n                                <a class="btn-data-new js-buy-open pc_click" pcTrackContent="buyBtn-1" bilogContent="fileDetailUpBuy" data-type="file">立即购买</a>\n                                <div class="header-price-warp">\n                                    <p class="price">&yen;{{data.moneyPrice}}</p>\n                                </div>\n                            {{else}}\n                                <a class="btn-data-new pc_click" pcTrackContent="downloadBtn-0" bilogContent="fileDetailUpDown" data-toggle="download" loginOffer="downloadBtn-0">立即下载</a>\n                            {{/if}}\n\n                {{/if}}\n          {{else}}\n                {{ if data.volume >0 }}\n                                <a class="btn-data-new pc_click" pcTrackContent="downloadBtn-0" bilogContent="fileDetailUpDown" data-toggle="download" loginOffer="downloadBtn-0">立即下载</a>\n                                <p class="btn-text"><span>{{data.volume}}</span>下载券</p>\n                {{else}}\n                        <a class="btn-data-new pc_click" pcTrackContent="downloadBtn-0" bilogContent="fileDetailUpDown" data-toggle="download" loginOffer="downloadBtn-0">立即下载</a>\n                {{/if}}\n          {{/if}}\n    {{/if}}\n{{/if}}'),define("dist/common/coupon/couponIssue",["dist/cmd-lib/toast","dist/application/method","dist/cmd-lib/util","dist/cmd-lib/loading","dist/application/checkLogin","dist/application/api"],function(a,b,c){a("dist/cmd-lib/toast");var d=a("dist/application/method"),e=a("dist/cmd-lib/util"),f=d.getParam("fid");a("dist/cmd-lib/loading");var g=a("dist/application/checkLogin"),h=a("dist/common/coupon/template/couponCard.html"),i=a("dist/application/api"),j={_index:0,pageType:1,type:4,isFirstCashBuy:2,isFirstVipBuy:2,dowStatus:2,isVip:0,isFreeFile:0,userId:"",pageUrl:"",initial:function(){var a=location.pathname.split("/");j.pageUrl=a[a.length-1];var b=d.getQueryString("unloginFlag");(1==j.pageType||2==j.pageType)&&(b||g.getUserData(function(a){j.isVip=a.isVip,j.isFirstCashBuy=a.isFirstCashBuy,j.isFirstVipBuy=a.isFirstVipBuy,j.dowStatus=a.dowStatus,j.userId=a.userId,j.confirmCouponType(),4!=j.type&&"downsucc.html"!=j.pageUrl&&j.getCouponList()}))},domChange:function(){1==j.type&&1==j.isFirstCashBuy&&($(".couponContainer").show(),$(".previousContainer").hide(),0==j.isVip?($(".bottom-privilege").removeClass("hide"),$(".down-succ-btn[data-type=default]").show().css("display","block").siblings("a").hide(),$(".give-coupon-wrap").css("border-bottom","none!important"),$(".couponContainer .carding-er-code").hide()):($(".bottom-privilege").addClass("hide"),$(".down-succ-btn[data-type=default]").show().css("display","hide"),$(".couponContainer .carding-er-code").show())),2==j.type&&1==j.isFirstVipBuy&&($(".couponContainer").show(),$(".previousContainer").hide(),$(".bottom-privilege").hide(),$(".couponContainer .carding-er-code").show()),3==j.type&&($(".couponContainer").show(),$(".previousContainer").hide(),0==j.isVip?$(".downSucc-privi").removeClass("hide"):$(".downSucc-privi").addClass("hide"),$(".carding-er-code").show(),$(".down-succ-btn[data-type=default]").addClass("hide").hide(),$(".give-coupon-wrap").css("border-bottom","none!important"))},confirmCouponType:function(){var a=0,b=Number($("#ip-type").val());"downsucc.html"==j.pageUrl?(j.getFileType(f),a=1,1==j.dowStatus&&1==j.isFreeFile&&1!=localStorage.getItem("FirstDown")&&(j.type=3)):"success.html"==j.pageUrl&&(a=2,2==b&&1==j.isFirstCashBuy&&d.getCookie("FirstCashBuy")!=j.userId?j.type=1:0==b&&1==j.isFirstVipBuy&&d.getCookie("FirstVipBuy")!=j.userId&&(j.type=2)),j.pageType=a},getCouponList:function(){var a="/node/coupon/issueCoupon?type="+j.type;$.get(a,function(a){if(0==a.code&&a.data&&a.data.list.length>0){var b=template.compile(h)({data:a.data});$(".give-title").text(a.data.prompt),$(".give-coupon-list").html(b),j.domChange(),j.bringCouponClick(),$(".down-carding-main").addClass("coupon-carding-item"),$(".carding-vip-main").addClass("coupon-carding-item"),1==j.type?d.setCookieWithExpPath("FirstCashBuy",j.userId,2592e6,"/"):2==j.type?d.setCookieWithExpPath("FirstVipBuy",j.userId,2592e6,"/"):3==j.type&&d.setCookieWithExpPath("FirstDown",j.userId,2592e6,"/")}})},bringCouponClick:function(){$(".btn-receive").click(function(){j.receiveCoupon(j.type,1)})},closeTipByClick:function(){$(".coupon-info-top").on("click",".btn-no-user",function(){$(".coupon-info-top").hide()})},showTips:function(a){setTimeout(function(){0==a?$(".dialog-coupon.dialog-coupon-success").show():$(".dialog-coupon.dialog-coupon-fail").show()},1500)},receiveCoupon:function(a,b){var c={source:b,type:a};c=JSON.stringify(c),$("body").loading({name:"download",title:"请求中"}),$.ajax({type:"POST",url:i.vouchers,contentType:"application/json;charset=utf-8",dataType:"json",data:c,success:function(a){0==a.code?a.data&&(a.data.list.length>0?e.showAlertDialog("温馨提示","领取成功！"):e.showAlertDialog("温馨提示",a.msg)):e.showAlertDialog("温馨提示",a.msg)},complete:function(){$("body").closeLoading("download")}})},getFileType:function(a){var b={id:a};$.get("/node/confirmType",b,function(a){0==a.code&&"free"==a.fileType&&(j.isFreeFile=1,1==j.dowStatus&&1!=localStorage.getItem("FirstDown")&&(j.type=3,j.getCouponList()))})}};setTimeout(function(){j.initial()},2e3)}),define("dist/cmd-lib/toast",[],function(a,b,c){!function(a,b,c){function d(b){this.options={text:"我是toast提示",icon:"",delay:3e3,callback:!1},b&&a.isPlainObject(b)&&a.extend(!0,this.options,b),this.init()}d.prototype.init=function(){var b=this;b.body=a("body"),b.toastWrap=a('<div class="ui-toast" style="position:fixed;width:200px;height:60px;line-height:60px;text-align:center;background:#000;opacity:0.8;filter:alpha(opacity=80);top:40%;left:50%;margin-left:-100px;margin-top:-30px;border-radius:4px;z-index:10000">'),b.toastIcon=a('<i class="icon"></i>'),b.toastText=a('<span class="ui-toast-text" style="color:#fff">'+b.options.text+"</span>"),b._creatDom(),b.show(),b.hide()},d.prototype._creatDom=function(){var a=this;a.options.icon&&a.toastWrap.append(a.toastIcon.addClass(a.options.icon)),a.toastWrap.append(a.toastText),a.body.append(a.toastWrap)},d.prototype.show=function(){var a=this;setTimeout(function(){a.toastWrap.removeClass("hide").addClass("show")},50)},d.prototype.hide=function(){var a=this;setTimeout(function(){a.toastWrap.removeClass("show").addClass("hide"),a.toastWrap.remove(),a.options.callback&&a.options.callback()},a.options.delay)},a.toast=function(a){return new d(a)}}($,window,document)}),define("dist/cmd-lib/loading",[],function(a,b,c){!function(a,b,c){a.fn.loading=function(b){var c=a(this),d=this;return this.each(function(){var e="",f={direction:"column",animateIn:"fadeInNoTransform",title:"提交中...",name:"loadingName",type:"origin",discription:"",titleColor:"rgba(255,255,255,0.7)",discColor:"rgba(255,255,255,0.7)",loadingWidth:100,loadingBg:"rgba(0, 0, 0, 0.6)",borderRadius:6,loadingMaskBg:"rgba(0,0,0,0.6)",zIndex:1000001,originDivWidth:10,originDivHeight:10,originWidth:4,originHeight:4,originBg:"#fefefe",smallLoading:!1,imgSrc:"",imgDivWidth:80,imgDivHeight:80,flexCenter:!1,flexDirection:"row",mustRelative:!1,delay:2e3,isClose:!0},g=a.extend(f,b||{});"body"==c.selector?(a("body,html").css({overflow:"hidden"}),e="fixed"):g.mustRelative?(c.css({position:"relative"}),e="absolute"):e="absolute",f._showOriginLoading=function(){var b=g.smallLoading?0:"-10px";"row"==g.direction&&(b="-6px"),d.cpt_loading_mask=a('<div class="cpt-loading-mask animated '+g.animateIn+" "+g.direction+'" data-name="'+g.name+'"></div>').css({background:g.loadingMaskBg,"z-index":g.zIndex,position:e}).appendTo(c),d.div_loading=a('<div class="div-loading"></div>').css({background:g.loadingBg,width:g.loadingWidth,height:g.loadingHeight,"-webkit-border-radius":g.borderRadius,"-moz-border-radius":g.borderRadius,"border-radius":g.borderRadius}).appendTo(d.cpt_loading_mask),g.flexCenter&&d.div_loading.css({display:"-webkit-flex",display:"flex","-webkit-flex-direction":g.flexDirection,"flex-direction":g.flexDirection,"-webkit-align-items":"center","align-items":"center","-webkit-justify-content":"center","justify-content":"center"}),d.loading_title=a('<p class="loading-title txt-textOneRow"></p>').css({color:g.titleColor}).html(g.title).appendTo(d.div_loading),d.loading=a('<div class="loading '+g.type+'"></div>').css({width:g.originDivWidth,height:g.originDivHeight}).appendTo(d.div_loading),d.loading_discription=a('<p class="loading-discription txt-textOneRow"></p>').css({color:g.discColor}).html(g.discription).appendTo(d.div_loading),"origin"==g.type&&(d.loadingOrigin=a('<div class="div-loadingOrigin"><span></span></div><div class="div-loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div><div class="div_loadingOrigin"><span></span></div>').appendTo(d.loading),d.loadingOrigin.children().css({"margin-top":b,"margin-left":b,width:g.originWidth,height:g.originHeight,background:g.originBg})),"pic"==g.type&&(d.loadingPic=a('<img src="'+g.imgSrc+'" alt="loading" />').appendTo(d.loading)),d.cpt_loading_mask.on("touchstart touchend touchmove click",function(a){a.stopPropagation(),a.preventDefault()})},f._createLoading=function(){a(".cpt-loading-mask[data-name="+g.name+"]").length>0||f._showOriginLoading()},f._createLoading(),f.close=function(){a(".cpt-loading-mask[data-name="+g.name+"]").remove()}})},a.extend(a.fn,{closeLoading:function(b){var b=b||"";if(a("body,html").css({overflow:"auto"}),""==b)a(".cpt-loading-mask").remove();else{var c=b||"loadingName";a(".cpt-loading-mask[data-name="+c+"]").remove()}}})}(jQuery,window,document)}),define("dist/common/coupon/template/couponCard.html",[],'\n{{each data.list as v i}}\n<li class="coupon-li">\n    <div class="coupon-item">\n        <i class="bg-coupon"></i>\n        <div class="price-wrap fl">\n            <p>{{if v.type==1}}¥{{/if}} <strong class="price">{{v.discount?v.discount:v.couponAmount}}</strong>{{if v.type==2}}折{{/if}}</p>\n        </div>\n        <div class="coupon-info-con">\n            <p class="coupon-text">{{v.content}}</p>\n            <p class="coupon-time">{{if v.dateNumber}}{{v.dateNumber}}天内有效{{else}}{{v.timeval}}{{/if}}</p>\n        </div>\n    </div>\n</li>\n{{/each}}\n'),define("dist/detail/template/head_tip.html",[],'<div class="info-wrap">\n    <i class="before"></i>\n    <i class="after"></i>\n    <p>{{data.prompt}}</p>\n    <div class="btn-wrap">\n        <a href="../pay/vip.html" target="_blank" class="btn-user">立即使用</a>\n        <a class="btn-no-user">暂不使用</a>\n    </div>\n</div>'),define("dist/queryOrder/success",["dist/application/method","dist/application/checkLogin","dist/application/api","dist/cmd-lib/util","dist/common/bindphone","dist/common/coupon/couponIssue","dist/cmd-lib/toast","dist/cmd-lib/loading","dist/common/bilog","base64","dist/report/config"],function(a,b,c){function d(){m.getCookie("cuk")&&n.getLoginData(function(a){s=a,t.isVip=parseInt(a.isVip,10),j(a),i(a)})}function e(a,b){var c=m.getCookie("visitorId")||m.getParam("visitorId"),d={visitorId:c,userId:a,nickName:b};d=JSON.stringify(d),$.ajax({type:"post",url:"/pay/bindUnlogin?ts="+(new Date).getTime(),contentType:"application/json;charset=utf-8",data:d,success:function(a){a&&0==a.code?$.toast({text:a.msg,callback:function(){location.reload()}}):$.toast({text:a.msg})},complete:function(){}})}function f(){$(".previousContainer").hide(),$(".unloginStatus").show(),$(".carding-share").hide(),$(".down-carding-main").addClass("coupon-carding-item"),$(".carding-success-item").css("padding-bottom","60px"),$(".xbsd i").addClass("ico-data ico-"+r),setTimeout(function(){h()},200)}function g(){var a=m.getCookie("visitorId")||m.getParam("visitorId");l&&(a=l);var b=m.getQueryString("fid");$.post("/pay/paperDown",{vuk:a,fid:b},function(a){0==a.code?location.href=a.data.dowUrl:41003==a.code?$.toast({text:a.msg}):$.toast({text:a.msg})})}function h(){var a=window.pageConfig&&window.pageConfig.params?window.pageConfig.params:null,b=a&&a.classid1?a.classid1+"":"",c=a&&a.classid2?"-"+a.classid2:"",d=a&&a.classid3?"-"+a.classid3:"",e=b+c+d,f=a?a.g_fileId||"":"",g=$.loginPop("login_wx_code",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:"ishare",popup:"hidden",clsId:e,fid:f}),h='<iframe src="'+g+'" style="width:100%;height:480px" name="iframe_a"  frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="yes"></iframe>';$(".carding-info-bottom.unloginStatus .qrWrap").html(h)}function i(a){if(a.mobile?$(".carding-info-bottom").addClass("carding-binding-ok"):$(".carding-binding").show(),"1"==a.isVip){var b=m.compareTime(new Date,new Date(a.expireTime));5>=b?($(".down-succ-title").html("您的VIP将于"+a.expireTime+"到期").show(),$(".down-succ-btn[data-type=vip]").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").show()):a.privilege<=5?($(".down-succ-title").html("您的VIP下载特权仅剩"+a.privilege+"次！").show(),$(".down-succ-btn[data-type=privilege]").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").show()):($(".btn-carding-back").show().css("display","block").siblings("a").hide(),$(".bottom-privilege").hide())}else $(".down-succ-btn[data-type=default]").show().css("display","block").siblings("a").hide(),$(".new-success-item .bottom-privilege").removeClass("hide")}function j(a){var b=$("#unLogin"),c=$("#haveLogin"),d=$(".top-user-more"),e=$(".icon-iShare-text"),f=$(".btn-user-more"),g=$(".vip-status"),h=$(".btn-join-vip"),i=$(".icon-iShare");e.html("1"===a.isVip?"续费VIP":"开通VIP"),f.text("1"===a.isVip?"续费":"开通"),"0"==a.isVip?$(".open-vip").show().siblings("a").hide():$(".xf-open-vip").show().siblings("a").hide();var j=null;if(1==a.isVip?(j=g.find('p[data-type="2"]'),j.find(".expire_time").html(a.expireTime),j.show().siblings().hide(),d.addClass("top-vip-more")):1==a.userType?(j=g.find('p[data-type="3"]'),j.show().siblings().hide()):0==a.isVip&&i.removeClass("icon-vip"),b.hide(),c.find(".icon-detail").html(a.nickName),c.find("img").attr("src",a.weiboImage),d.find("img").attr("src",a.weiboImage),d.find("#userName").html(a.nickName),c.show(),$(".user-avatar img").attr("src",a.weiboImage),$(".name-wrap .name-text").html(a.nickName),"1"==a.isVip){var k="您的VIP将于"+a.expireTime+"到期,剩余"+a.privilege+"次下载特权";$(".detail-right-normal-wel").html(k),$(".detail-right-vip-wel").html("会员尊享权益"),$(".btn-mui").hide(),$("#memProfit").html("VIP权益"),$(".expire-time").show().find("span").html(a.expireTime),h.find('p[data-type="2"]').show().siblings("a").hide(),$(".vip-expire-time").show().find("span").html(a.expireTime),a.privilege&&a.privilege<0&&h.find('p[data-type="3"]').show().siblings("a").hide()}else $(".mui-privilege-list li").removeClass("hide"),h.find('p[data-type="1"]').show().siblings("a").hide()}function k(){var a=$(".more-nav"),b=$("#search-detail-input"),c=$(".detail-lately");a.on("mouseover",function(){var a=$(this);a.hasClass("hover")||$(this).addClass("hover")}),a.on("mouseleave",function(){var a=$(this);a.hasClass("hover")&&$(this).removeClass("hover")}),b.on("keyup",function(a){var b=a.keyCode;$(this).val()&&v($(this).val()),13===b&&w($(this).val())}),b.on("focus",function(){var a=$(".lately-list"),b=a.find("li").length;return b>0?c.show():c.hide(),!0}),$(".btn-new-search").on("click",function(){var a=$("#search-detail-input").val();a&&w(a)}),$(document).on("click",":not(.new-search)",function(a){var b=$(a.target);b.hasClass("new-input")||c.hide()}),c.on("click",function(a){a.stopPropagation()})}var l,m=a("dist/application/method"),n=a("dist/application/checkLogin"),o=a("dist/cmd-lib/util"),p=m.getParam("fid"),q=m.getParam("name"),r=m.getParam("format");a("dist/common/bindphone"),a("dist/common/coupon/couponIssue"),a("dist/common/bilog");var s=null,t={};k();var u=m.getQueryString("unloginFlag");u?($("#filename").text(q||""),r&&$(".xbsd i").addClass("ico-data ico-"+r),$(".pay-ok-text").hide(),$(".unloginTop").show(),$(".carding-data-pay-con").hide(),m.getCookie("cuk")?($(".carding-info-bottom.unloginStatus").remove(),n.getLoginData(function(a){s=a,l=a.userId,t.isVip=parseInt(a.isVip,10),j(a),i(a)})):(f(),n.listenLoginStatus(function(a){t.isVip=parseInt(a.isVip,10),s=a,e(a.userId,a.nickName)}),setTimeout(function(){g()},1e3))):d(),$(".unloginStatus .quick-down-a").click(function(){g()}),$(".btn-carding-back").on("click",function(){window.location.href="/f/"+p+".html"}),$(".js-buy-open").click(function(){var a=["","免费","下载券","现金","仅供在线阅读","VIP免费","VIP专享"],b=a[m.getCookie("file_state")],c=1==m.getCookie("isVip")?"续费":"充值",d=$(this).data("type");o.getPageRef(p);("vip"===d||"default"===d)&&__pc__.gioTrack("vipRechargeEntryClick",{entryName_var:b,entryType_var:c})});var v=function(a){$.getScript("https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd="+encodeURIComponent(a)+"&p=3&cb=window.baidu_searchsug&t="+(new Date).getTime())};window.baidu_searchsug=function(a){var b=$("#search-detail-input").val();if(b=b?b.replace(/^\s+|\s+$/gm,""):"",b.length>0&&a&&a.s){var c=a.s||[];if(c.length>0){for(var d=Math.min(c.length,10),e=[],f=0;d>f;f++){var g="/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(c[f]));e.push('<li><a href="'+g+'"  data-html="'+c[f]+'" >'+c[f].replace(new RegExp("("+b+")","gm"),"<span class='search-font'>$1</span>")+"</a></li>")}$(".lately-list").html(e.join("")).parent(".detail-lately").show()}}};var w=function(a){var b=a?a.replace(/^\s+|\s+$/gm,""):"";window.location.href="/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(b))}}),define("dist/common/bindphone",["dist/application/api"],function(a,b,c){function d(a){var b=a.replace(/\D/g,"").substring(0,11),c=b.length;return c>3&&8>c?b=b.replace(/^(...)/g,"$1 "):c>=8&&(b=b.replace(/^(...)(....)/g,"$1 $2 ")),b}function e(a){if("1"==a){var b=$("#mobile").val();$(".carding-error").hide(),b?($("#mobile").val(d(b)),$(".btn-binding-code").removeClass("btn-code-no")):$(".btn-binding-code").addClass("btn-code-no")}}var f=a("dist/application/api");$(function(){var a=$(".phone-choice"),b=($("#ip-page-type").val(),$("#ip-checkCode")),c=$("#mobile"),d=($(".login-input-item.img-code-item"),$(".carding-error span"));a.find(".phone-num").click(function(a){a.stopPropagation(),$(this).siblings(".phone-more").is(":hidden")?($(this).parent().addClass("phone-choice-show"),$(this).siblings(".phone-more").show()):($(this).parent().removeClass("phone-choice-show"),$(this).siblings(".phone-more").hide())}),$(".phone-more").find("a").click(function(){var b=$(this).find(".number-con").find("em").text();a.find(".phone-num").find("em").text(b),a.removeClass("phone-choice-show"),a.find(".phone-more").hide()}),$(document).on("keyup","#mobile",function(){e(1)}),$(document).keyup(function(a){13==a.keyCode&&$(".btn-phone-login").trigger("click")}),$(".btn-bind").click(function(){if(!$(this).hasClass("btn-code-no")){var a=c.val().replace(/\s/g,""),e=b.val(),f=$(".phone-num em").text();if(/^\s*$/g.test(a))return void d.text("请输入手机号码!").parent().show();if(/^\s*$/g.test(e))return void d.text("请输入验证码!").parent().show();var g={nationCode:f,mobile:a,smsId:b.attr("smsId"),checkCode:e};$.post("/pay/bindMobile",g,function(a){a&&("0"==a.code?($(".binging-main").hide(),$(".binging-success").show()):(d.text(a.msg).parent().show(),$(".carding-error").show()))},"json")}});var g=function(a,e,i,j){var k=$(".binging-main .yz-link");if(!$(k).hasClass("btn-code-no")){var l=c.val().replace(/\s/g,"");if(/^\s*$/g.test(l))return void d.text("请输入手机号码!").parent().show();d.parent().hide();var m=JSON.stringify({phoneNo:l,businessCode:$(k).siblings('input[name="businessCode"]').val(),appId:a,randstr:e,ticket:i,onOff:j});$.ajax({type:"POST",url:f.sms.getCaptcha,contentType:"application/json;charset=utf-8",dataType:"json",data:m,success:function(a){if(a)if("0"==a.code){b.removeAttr("smsId"),b.attr("smsId",a.data.smsId);var c=$(k).siblings(".yz-time");c.addClass("btn-code-no"),c.show(),$(k).hide(),$(".btn-none-bind").hide(),$(".btn-bind").show(),function e(){var a=c.text().replace(/秒后重发$/g,"");return a=/^\d+$/g.test(a)?Number(a):60,a&&a>=0&&c.text(--a+"秒后重发"),0>=a?(c.text("60秒后重发").hide(),void $(k).text("重获验证码").show()):void setTimeout(e,1e3)}()}else"2112"==a.code?h(g):"226"==a.code?d.text("图形验证码错误").parent().show():d.text(a.msg).parent().show();else d.text("发送短信失败").parent().show()}})}};$(".binging-main").delegate(".yz-link","click",function(){g("","","","")})});var g,h=function(a){var b="2071307690";g||(g=new TencentCaptcha(b,i,{bizState:a})),g.show()},i=function(a){0===a.ret&&a.bizState(a.appid,a.randstr,a.ticket,1)}});