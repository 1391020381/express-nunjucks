/*! ishare_pc_website
*author:Jersey */

define("dist/authentication/org",["../cmd-lib/upload/Q","../cmd-lib/upload/Q.Uploader","./fixedTopBar","./msgVer","../cmd-lib/toast","../application/api","../application/urlConfig","../cmd-lib/util","../application/method","../application/effect","../application/checkLogin","../application/login","../application/loginOperationLogic","../cmd-lib/jqueryMd5","../common/bindphone","../cmd-lib/myDialog","../application/iframe/iframe-messenger","../application/iframe/messenger","../common/baidu-statistics","../common/loginType","../common/associateWords","./template/bindPhone.html","./template/audit.html","./template/success.html","./template/error.html"],function(a,b,c){a("../cmd-lib/upload/Q"),a("../cmd-lib/upload/Q.Uploader"),a("./fixedTopBar"),a("./msgVer"),a("../cmd-lib/toast");var d=a("../application/api"),e=a("../application/urlConfig"),f=(a("../cmd-lib/util"),a("../application/method")),g=a("../application/effect").isLogin,h=!0,i=a("./template/bindPhone.html"),j=a("./template/audit.html"),k=a("./template/success.html"),l=a("./template/error.html"),m=$("#authentication-box"),n={nickName:"",validateFrom:/^1[3456789]\d{9}$/,emailForm:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,init:function(){this.selectBind(),this.eventBind(),this.delUploadImg(),this.checkedRules(),f.getCookie("cuk")&&this.queryCerinfo(),$(".js-submit").click(function(){f.getCookie("cuk")?n.submitData():g(null,h)}),$("body").click(function(){$(".jqTransformSelectWrapper ul").slideUp()}),setTimeout(function(){n.uploadfile()},800)},dialogAudit:function(){var a=template.compile(j)();m.html(a).show()},dialogSuccess:function(){var a=template.compile(k)();m.html(a).show()},dialogError:function(){var a=template.compile(l)();m.html(a).show()},queryCerinfo:function(){$.ajax(d.authentication.getInstitutions,{type:"get"}).done(function(a){if(a.data&&3!=a.data.auditStatus){0==a.data.auditStatus||1==a.data.auditStatus?($(".header-title").text("信息审核中，请耐心等候"),$(".header-process .process-item").eq(1).addClass("step-now").siblings().removeClass("step-now"),n.dialogAudit()):2==a.data.auditStatus&&($(".header-title").text("你已完成机构认证"),$(".header-process .process-item").eq(2).addClass("step-now").siblings().removeClass("step-now"),n.dialogSuccess()),$(".js-nickName").val(a.data.nickName).attr("disabled","disabled"),$(".js-realName").val(a.data.realName).attr("disabled","disabled");var b=[{val:0,title:"企业"},{val:1,title:"学校"},{val:2,title:"网络营销"},{val:3,title:"IT/互联网"},{val:4,title:"医学"}],c=[{val:0,title:"教育"},{val:1,title:"法律"},{val:2,title:"建筑/房地产"},{val:3,title:"制造加工"},{val:4,title:"通信电子"},{val:5,title:"农林牧渔"},{val:6,title:"健康/医学"},{val:7,title:"IT/互联网"},{val:8,title:"水利电力"},{val:9,title:"公关广告"},{val:10,title:"行业资讯"},{val:11,title:"金融"},{val:12,title:"石油化工"},{val:13,title:"人文艺术"},{val:14,title:"军事/航天/航空"},{val:15,title:"餐饮美食"},{val:16,title:"交通运输"},{val:17,title:"出版行业"},{val:18,title:"娱乐休闲"},{val:19,title:"生活科普"},{val:20,title:"学术/科研"},{val:21,title:"能源矿产"},{val:22,title:"文化传媒"},{val:23,title:"体育"},{val:24,title:"旅游"},{val:25,title:"政府"},{val:26,title:"其他"}];$(".js-organize span").text(b[a.data.organizeIndustryType].title),$(".js-organlist").remove(),a.data.industryType?$(".js-industry span").text(c[a.data.industryType].title):"",$(".js-industryTypeList").remove(),$(".js-organize-name").val(a.data.organizeName).attr("disabled","disabled"),$(".js-website").val(a.data.organizeWebsite).attr("disabled","disabled"),$(".js-brief").val(a.data.organizeProfile).attr("disabled","disabled"),$(".js-add").val(a.data.organizeAddress).attr("disabled","disabled"),$(".js-cer-code").val(a.data.socialCreditCode).attr("disabled","disabled"),$(".js-logoPic img").attr("src",a.data.logoPic),$("#upload-target").removeAttr("id"),$(".js-businessLicensePic img").attr("src",a.data.businessLicensePic),$("#upload-target2").removeAttr("id"),$(".js-phone").val(a.data.contactNumber).attr("disabled","disabled"),$(".js-qqNumber").val(a.data.qqNumber).attr("disabled","disabled"),$(".js-email").val(a.data.email).attr("disabled","disabled"),$(".js-msg").attr("disabled","disabled"),$(".js-edit").hide()}else a.data&&3==a.data.auditStatus&&userObj.dialogError()}).fail(function(a){console.log("error==="+a)})},eventBind:function(){$("#authentication-box").on("click",".modal-close",function(){console.log("关闭弹窗"),$(m).html("").hide()})},selectBind:function(){$(".js-select").click(function(a){$(this).siblings("ul").slideToggle(),a.stopPropagation()}),$(".jqTransformSelectWrapper ul").on("click","li a",function(){$(".jqTransformSelectWrapper ul").find("li a").removeClass("selected"),$(this).addClass("selected"),$(".jqTransformSelectWrapper ul").slideUp(),$(this).parents("ul").siblings(".js-select").find("span").text($(this).text()),$(this).parents("ul").siblings(".js-select").attr("authType",$(this).attr("index"))})},uploadfile:function(){var a="";$(".btn-rz-upload").on("click",function(){a=$(this)});var b=(Q.event,Q.Uploader);new b({url:e.upload+d.upload.picUploadCatalog,target:[document.getElementById("upload-target"),document.getElementById("upload-target2")],upName:"file",dataType:"application/json",multiple:!1,data:{fileCatalog:"ishare"},allows:".jpg,.jpeg,.gif,.png",maxSize:3145728,on:{add:function(b){switch(b.limited){case"ext":return $.toast({text:"不支持此格式上传"});case"size":return $.toast({text:"资料不能超过3M"})}if("upload-target"==a.attr("id")){var c=b.file,d=new FileReader;d.readAsDataURL(c),d.onload=function(a){var c=this.result,d=new Image;d.src=c,d.onload=function(){widthRadio=d.naturalWidth/d.naturalHeight,1!=widthRadio&&($.toast({text:"要求尺寸200*200像素"}),b.limited=!0)}}}},complete:function(b){if(console.log(b,"task"),b.limited)return!1;var c=JSON.parse(b.response);c.data&&c.data.picKey?(a.attr("val",c.data.picKey),a.siblings(".rz-upload-pic").find("img").attr("src",c.data.preUrl+c.data.picKey),a.siblings(".rz-upload-pic").find(".delete-ele").show()):$.toast({text:"上传失败，重新上传",icon:"",delay:2e3,callback:!1})}}})},delUploadImg:function(){$(".delete-ele").click(function(){$(this).hide(),"upload-target2"==$(this).parents(".rz-main-dd").find(".btn-rz-upload").attr("id")?$(this).siblings("img").attr("src","../../../images/auth/pic_zj.jpg"):$(this).siblings("img").attr("src","../../../images/auth/pic_sfz_z.jpg"),$(this).parents(".rz-main-dd").find(".btn-rz-upload").attr("val","")})},checkedRules:function(){$(".rz-label .check-con").click(function(){$(".rz-label .check-con").toggleClass("checked")})},submitData:function(){if(!$(".js-organize-name").val().trim())return $.toast({text:"请输入机构名称",icon:"",delay:2e3,callback:!1}),!1;if(!$(".js-brief").val().trim())return $.toast({text:"请输入机构简介",icon:"",delay:2e3,callback:!1}),!1;if(!$(".js-cer-code").val().trim())return $.toast({text:"请输入社会信用代码",icon:"",delay:2e3,callback:!1}),!1;if(!$("#upload-target").attr("val"))return $.toast({text:"请上传企业logo",icon:"",delay:2e3,callback:!1}),!1;if(!$("#upload-target2").attr("val"))return $.toast({text:"请上传营业执照",icon:"",delay:2e3,callback:!1}),!1;if(!n.validateFrom.test($(".js-phone").text()))return $.toast({text:"请输入正确的手机号码",icon:"",delay:2e3,callback:!1}),!1;if(!$(".js-msg-val").val().trim())return $.toast({text:"请输入短信验证码",icon:"",delay:2e3,callback:!1}),!1;if(!$(".js-qqNumber").val().trim())return $.toast({text:"请输入QQ号码",icon:"",delay:2e3,callback:!1}),!1;if(!n.emailForm.test($(".js-email").val().trim()))return $.toast({text:"请输入正确的邮箱地址",icon:"",delay:2e3,callback:!1}),!1;var a={nickName:$(".js-nickName").val().trim(),organizeIndustryType:$(".js-organize").attr("authtype"),industryType:$(".js-industry").attr("authtype"),organizeName:$(".js-organize-name").val().trim(),organizeWebsite:$(".js-website").val().trim(),organizeProfile:$(".js-brief").val().trim(),organizeAddress:$(".js-add").val().trim(),socialCreditCode:$(".js-cer-code").val().trim(),logoPic:$("#upload-target").attr("val"),businessLicensePic:$("#upload-target2").attr("val"),contactNumber:$(".js-phone").text(),qqNumber:$(".js-qqNumber").val().trim(),email:$(".js-email").val().trim(),smsId:$(".js-msg").attr("smsId"),checkCode:$(".js-msg-val").val().trim()};return $(".rz-label .check-con").hasClass("checked")?(a=JSON.stringify(a),void $.ajax(d.authentication.institutions,{type:"POST",data:a,contentType:"application/json"}).done(function(a){"0"==a.code?$.toast({text:"提交成功",icon:"",delay:3e3,callback:function(){location.reload()}}):$.toast({text:a.message,icon:"",delay:2e3})}).fail(function(a){console.log("error==="+a)})):($.toast({text:"请勾选用户认证协议",icon:"",delay:2e3,callback:!1}),!1)}};g(function(a){if(a.mobile)$(".js-phone").text(a.mobile),n.init();else{var b=template.compile(i)();m.html(b).show()}},h,function(){location.reload()})}),define("dist/cmd-lib/upload/Q",[],function(a,b,c){!function(a,b){"use strict";function c(a,c){return a!==b?a:c}function d(a){return"[object Function]"===A.call(a)}function e(a){return"number"==typeof a&&a>0&&a===Math.floor(a)}function f(a,b){return d(a)?a.apply(b,C.call(arguments,2)):void 0}function g(a,c,d){if(!a||!c)return a;for(var e in c)e!=b&&B.call(c,e)&&(d||a[e]===b)&&(a[e]=c[e]);return a}function h(a,b){if(b!==!1&&!/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))throw new Error("JSON SyntaxError");try{return new Function("return "+a)()}catch(c){}}function i(a,c){1>=c&&(c*=100),a.style.opacity!=b?a.style.opacity=c/100:a.style.filter!=b&&(a.style.filter="alpha(opacity="+parseInt(c)+")")}function j(a,b){var c=0,d=0,e=a.offsetWidth,f=a.offsetHeight;do c+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent;while(a&&a!=b);return{left:c,top:d,width:e,height:f}}function k(a,b,c,d){for(var e=a[c||b],f=[];e;){if(1==e.nodeType){if(!d)return e;f.push(e)}e=e[b]}return d?f:null}function l(a){return a.previousElementSibling||k(a,"previousSibling",null,!1)}function m(a){return a.nextElementSibling||k(a,"nextSibling",null,!1)}function n(a){return a.firstElementChild||k(a,"nextSibling","firstChild",!1)}function o(a){return a.lastElementChild||k(a,"previousSibling","lastChild",!1)}function p(a){return a.children||k(a,"nextSibling","firstChild",!0)}function q(a,b,c){var d=document.createElement(a);return b&&(d.className=b),c&&(d.innerHTML=c),d}function r(a,b){var c=q("div","",a);return b?c.childNodes:n(c)}function s(b){var c=b||a.event;return c.target||(c.target=c.srcElement),c}function t(a,b,c,d){var e=function(f){c.call(a,s(f)),d&&F(a,b,e)};return E(a,b,e),d?void 0:{stop:function(){F(a,b,e)}}}function u(a,b){if(d(a[b]))a[b]();else if(a.fireEvent)a.fireEvent("on"+b);else if(a.dispatchEvent){var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a.dispatchEvent(c)}}function v(a,b,c){var d=s(a);b!==!1&&(d.preventDefault?d.preventDefault():d.returnValue=!1),c!==!1&&(d.stopPropagation?d.stopPropagation():d.cancelBubble=!0)}function w(a){return G.test(a)}function x(a){if(!w(a))return!0;var c=RegExp.lastMatch.length,d=a.indexOf("/",c),e=a.slice(0,-1!=d?d:b);return e.toLowerCase()==(location.protocol+"//"+location.host).toLowerCase()}function y(a,b,c){a=+a,b=b||1024;for(var d=0,f="number"==typeof b,g=1,h=e(c)?c:f?100:b.length;a>=g&&h>d;)g*=f?b:b[d],d++;return d&&g>a&&(g/=f?b:b.last(),d--),{value:d?a/g:a,level:d}}function z(a,d){if(d=d===!0?{all:!0}:d||{},isNaN(a)||a==b||0>a){var e=d.error||"--";return d.all?{text:e}:e}var f=y(a,d.steps,d.limit),g=f.value,h=g.toFixed(c(d.digit,2));return d.trim!==!1&&-1!=h.lastIndexOf(".")&&(h=h.replace(/\.?0+$/,"")),f.text=h+(d.join||"")+(d.units||H)[f.level+(d.start||0)],d.all?f:f.text}var A=Object.prototype.toString,B=Object.prototype.hasOwnProperty,C=Array.prototype.slice;g(Object,{forEach:function(a,b,c){for(var d in a)B.call(a,d)&&b.call(c,d,a[d],a)}}),g(Array.prototype,{forEach:function(a,b){for(var c=this,d=0,e=c.length;e>d;d++)d in c&&a.call(b,c[d],d,c)}}),g(Date,{now:function(){return+new Date}});var D;(a.ActiveXObject||a.msIndexedDB)&&(D=document.documentMode||(a.XMLHttpRequest?7:6)),a.JSON||(a.JSON={}),JSON.parse||(JSON.parse=h);var E,F;document.addEventListener?(E=function(a,b,c){a.addEventListener(b,c,!1)},F=function(a,b,c){a.removeEventListener(b,c,!1)}):document.attachEvent&&(E=function(a,b,c){a.attachEvent("on"+b,c)},F=function(a,b,c){a.detachEvent("on"+b,c)});var G=/^https?:\/\//i,H=["B","KB","MB","GB","TB","PB","EB"],I={def:c,isFunc:d,isUInt:e,fire:f,extend:g,ie:D,setOpacity:i,getOffset:j,walk:k,getPrev:l,getNext:m,getFirst:n,getLast:o,getChilds:p,createEle:q,parseHTML:r,isHttpURL:w,isSameHost:x,parseLevel:y,formatSize:z};D&&(I["ie"+(6>D?6:D)]=!0),I.event={fix:s,stop:v,trigger:u,add:t},a.Q=I}(window)}),define("dist/cmd-lib/upload/Q.Uploader",[],function(a,b,c){!function(a,b){"use strict";function c(a){m(L,a,!0)}function d(a){var b=j.Lang;switch(a){case F:return b.status_ready;case G:return b.status_processing;case H:return b.status_complete;case I:return b.status_skip;case J:return b.status_cancel;case K:return b.status_error}return a}function e(){var b=a.XMLHttpRequest;b&&(new b).upload&&a.FormData&&(z=!0);var c=document.createElement("input");c.type="file",A=!!c.files,B=z}function f(a,b){var c=a.lastIndexOf(b);return-1!=c?a.slice(c):""}function g(a){if(a){for(var b=a.split(","),c={},d=0,e=b.length;e>d;d++)c[b[d]]=!0;return c}}function h(a,b){a.attachEvent?a.attachEvent("onload",b):a.addEventListener("load",b,!1)}function i(a,b,c){if(b&&!(0>=b)){var d,e=Date.now();if(c>=b)return d=e-a.startTime,d?a.avgSpeed=Math.min(Math.round(1e3*b/d),b):a.speed||(a.avgSpeed=a.speed=b),a.time=d||0,void(a.endTime=e);d=e-a.lastTime,200>d||(a.speed=Math.min(Math.round(1e3*(c-a.loaded)/d),a.total),a.lastTime=e)}}function j(a){var b=this,c=a||{};b.guid=c.guid||"uploader"+ ++C,b.list=[],b.map={},b.index=0,b.started=!1,b.set(c)._init()}var k=Q.def,l=Q.fire,m=Q.extend,n=Q.getFirst,o=Q.getLast,p=JSON.parse,q=Q.createEle,r=Q.parseHTML,s=Q.setOpacity,t=Q.getOffset,u=Q.md5File,v=Q.event,w=v.add,x=v.trigger,y=v.stop,z=!1,A=!1,B=!1,C=0,D=0,E=0,F=0,G=1,H=2,I=-1,J=-2,K=-3,L={};j.prototype={constructor:j,set:function(a){var c=this,d=m(a,c.ops);c.url=d.url,c.dataType=d.dataType||"json",c.data=d.data,c.targets=d.target||[],c.targets.forEach||(c.targets=[c.targets]),c.target=c.targets[0],c.html5=z&&!!k(d.html5,!0),c.multiple=A&&c.html5&&!!k(d.multiple,!0),c.clickTrigger=B&&!!k(d.clickTrigger,!0),c.workerThread=c.html5?d.workerThread||1:1,c.workerIdle=c.workerThread,c.auto=d.auto!==!1,c.upName=d.upName||"upfile",c.accept=d.accept||d.allows,c.isDir=d.isDir,c.allows=g(d.allows),c.disallows=g(d.disallows),c.maxSize=+d.maxSize||0,c.isSlice=!!d.isSlice,c.chunkSize=+d.chunkSize||2097152,c.isQueryState=!!k(d.isQueryState,c.isSlice),c.isMd5=!!k(d.isMd5,c.isSlice),c.isUploadAfterHash=d.isUploadAfterHash!==!1,c.sliceRetryCount=d.sliceRetryCount==b?2:+d.sliceRetryCount||0,c.container=d.container||document.body,d.getPos&&(c.getPos=d.getPos);var e=d.UI||{};return e.init&&(c.init=e.init),e.draw&&(c.draw=e.draw),e.update&&(c.update=e.update),e.over&&(c.over=e.over),c.fns=d.on||{},c.ops=d,c.accept&&!c.clickTrigger&&c.resetInput(),c},_init:function(){var a=this;if(!a._inited){a._inited=!0;var c=a.guid,d=a.container,e=q("div","upload-input "+c);if(d.appendChild(e),a.boxInput=e,!a.html5){var f="upload_iframe_"+c,g='<iframe class="u-iframe" name="'+f+'"></iframe><form class="u-form" action="" method="post" enctype="multipart/form-data" target="'+f+'"></form>',i=q("div","upload-html4 "+c,g);d.appendChild(i);var j=n(i),k=o(i);a.iframe=j,a.form=k,h(j,function(){if(0==a.workerIdle){var c;try{c=j.contentWindow.document.body.innerHTML}catch(d){}a.complete(b,H,c)}})}return a.targets.forEach(function(b){a.clickTrigger?w(b,"click",function(b){a.fire("select",b)!==!1&&(a.resetInput(),x(a.inputFile,"click"))}):w(b,"mouseover",function(b){a.target=this,a.updatePos()})}),a.clickTrigger||(w(e,"click",function(b){a.fire("select",b)===!1&&y(b)}),s(e,0),a.resetInput()),a.fire("init"),a.run("init")}},resetInput:function(){var a=this,b=a.boxInput;if(!b)return a;b.innerHTML='<input type="file" name="'+a.upName+'"'+(a.accept?'accept="'+a.accept+'"':"")+(a.isDir?'webkitdirectory=""':"")+' style="'+(a.clickTrigger?"visibility: hidden;":"font-size:100px;")+'"'+(a.multiple?' multiple="multiple"':"")+">";var c=n(b);return w(c,"change",function(b){a.add(this),a.html5||a.resetInput()}),a.inputFile=c,a.updatePos()},updatePos:function(a){var b=this;if(b.clickTrigger)return b;var c=b.getPos||t,d=b.boxInput,e=n(d),f=b.target,g=f.offsetWidth,h=f.offsetHeight,i=0==g?{left:-1e4,top:-1e4}:c(f);return d.style.width=e.style.width=g+"px",d.style.height=e.style.height=h+"px",d.style.left=i.left+"px",d.style.top=i.top+"px",a&&(d.style.zIndex=++E),b},fire:function(a,b,c){if(!c)return l(this.fns[a],this,b);var d=this.fns[a+"Async"];return d?l(d,this,b,c):void c(l(this.fns[a],this,b))},run:function(a,b){var c=this[a];return c&&l(c,this,b),this},addTask:function(a,b){if(a||b){var c,d;b?(c=b.webkitRelativePath||b.name||b.fileName,d=0===b.size?0:b.size||b.fileSize):(c=f(a.value,"\\").slice(1)||a.value,d=-1);var e,g=this,h=f(c,".").toLowerCase();g.disallows&&g.disallows[h]||g.allows&&!g.allows[h]?e="ext":-1!=d&&g.maxSize&&d>g.maxSize&&(e="size");var i={id:++D,name:c,ext:h,size:d,input:a,file:b,state:e?I:F};return e&&(i.limited=e,i.disabled=!0),g.fire("add",i,function(a){a===!1||i.disabled||i.limited||(i.index=g.list.length,g.list.push(i),g.map[i.id]=i,g.run("draw",i),g.auto&&g.start())}),i}},add:function(a){var c=this;if("INPUT"==a.tagName){var d=a.files;if(d)for(var e=0,f=d.length;f>e;e++)c.addTask(a,d[e]);else c.addTask(a)}else c.addTask(b,a)},addList:function(a){for(var b=0,c=a.length;c>b;b++)this.add(a[b])},get:function(a){return a!=b?this.map[a]:void 0},cancel:function(a,b){var c=this,d=c.get(a);if(d){var e=d.state;if(e!=F&&e!=G)return c;if(e==G){var f=d.xhr;if(f)return f.abort(),c;c.iframe.contentWindow.location="about:blank"}return b?c:c.complete(d,J)}},remove:function(a){var b=this.get(a);b&&(b.state==G&&this.cancel(a),b.deleted=!0,this.fire("remove",b))},start:function(){var a=this,b=a.workerIdle,c=a.list,d=a.index,e=c.length;if(a.started||(a.started=!0),0>=e||d>=e||0>=b)return a;var f=c[d];return a.index++,a.upload(f)},upload:function(a){var b=this;return!a||a.state!=F||a.skip||a.deleted?b.start():(a.url=b.url,b.workerIdle--,b.fire("upload",a,function(c){return c===!1?b.complete(a,I):void(b.html5&&a.file?b._upload_html5_ready(a):a.input?b._upload_html4(a):b.complete(a,I))}),b)},_process_xhr_headers:function(a){var b=this.ops,c=function(b,c){a.setRequestHeader(b,c)};L.headers&&Object.forEach(L.headers,c),b.headers&&Object.forEach(b.headers,c)},queryState:function(a,c){var d=this,e=d.url,f=new XMLHttpRequest,g=["action=query","hash="+(a.hash||encodeURIComponent(a.name)),"fileName="+encodeURIComponent(a.name)];return-1!=a.size&&g.push("fileSize="+a.size),d._process_params(a,function(a,c){g.push(encodeURIComponent(a)+"="+(c!=b?encodeURIComponent(c):""))},"dataQuery"),a.queryUrl=e+(-1==e.indexOf("?")?"?":"&")+g.join("&"),d.fire("sliceQuery",a),f.open("GET",a.queryUrl),d._process_xhr_headers(f),f.onreadystatechange=function(){if(4==f.readyState){var b,e;if(f.status>=200&&f.status<400)if(b=f.responseText,"ok"===b?e={ret:1}:b&&(e=p(b)),e&&"number"!=typeof e||(e={ret:0,start:e}),a.response=b,a.json=e,1==e.ret)a.queryOK=!0,d.cancel(a.id,!0).complete(a,H);else{var g=+e.start||0;g!=Math.floor(g)&&(g=0),a.sliceStart=g}l(c,d,f)}},f.onerror=function(){l(c,d,f)},f.send(null),d},_upload_html5_ready:function(a){var b=this,c=function(){a.state!=H&&(b.isSlice?b._upload_slice(a):b._upload_html5(a))},d=function(c){b.fire("hash",a,function(){a.hash&&b.isQueryState&&a.state!=H?b.queryState(a,c):c()})},e=function(c){if(b.isMd5&&u){var e=b.fns.hashProgress;u(a.file,function(b,e){a.hash=b,a.timeHash=e,d(c)},function(c){l(e,b,a,c)})}else d(c)};return b.isUploadAfterHash?e(c):(c(),e()),b},_process_params:function(a,b,c){c=c||"data",L.data&&Object.forEach(L.data,b),this.data&&Object.forEach(this.data,b),a&&a[c]&&Object.forEach(a[c],b)},_upload_html5:function(a){var b=this,c=new XMLHttpRequest;a.xhr=c,c.upload.addEventListener("progress",function(c){b.progress(a,c.total,c.loaded)},!1),c.addEventListener("load",function(c){b.complete(a,H,c.target.responseText)},!1),c.addEventListener("error",function(){b.complete(a,K)},!1),c.addEventListener("abort",function(){b.complete(a,J)},!1);var d=new FormData;b._process_params(a,function(a,b){d.append(a,b)}),d.append(b.upName,a.blob||a.file,a.name),c.open("POST",a.url),b._process_xhr_headers(c),b.fire("send",a,function(e){return e===!1?b.complete(a,I):(c.send(d),void b._afterSend(a))})},_upload_html4:function(a){var b=this,c=b.form,d=a.input;return d._uploaded?b.complete(a,H):(d._uploaded=!0,d.name=b.upName,c.innerHTML="",c.appendChild(d),c.action=a.url,b._process_params(a,function(a,b){c.appendChild(r('<input type="hidden" name="'+a+'" value="'+b+'">'))}),void b.fire("send",a,function(d){return d===!1?b.complete(a,I):(c.submit(),void b._afterSend(a))}))},_afterSend:function(a){a.lastTime=a.startTime=Date.now(),a.state=G,this._lastTask=a,this.progress(a)},progress:function(a,b,c){b||(b=a.size),(!c||0>c)&&(c=0);var d=a.state||F;c>b&&(c=b),c>0&&d==F&&(a.state=d=G);var e=d==H;e&&(b=c=a.size),i(a,b,c),a.total=b,a.loaded=c,this.fire("progress",a),this.run("update",a)},_process_response:function(a,b){a.response=b,b&&"json"==this.dataType&&(a.json=p(b))},complete:function(a,c,d){var e=this;return a||1!=e.workerThread||(a=e._lastTask),a&&(c!=b&&(a.state=c),(a.state==G||c==H)&&(a.state=H,e.progress(a,a.size,a.size)),d!==b&&e._process_response(a,d)),e.run("update",a).run("over",a),c==J&&e.fire("cancel",a),e.fire("complete",a),e.workerIdle++,e.started&&e.start(),e}},j.extend=function(a,b){m(j.prototype,a,b)},e(),m(j,{support:{html5:z,multiple:A},READY:F,PROCESSING:G,COMPLETE:H,SKIP:I,CANCEL:J,ERROR:K,UI:{},Lang:{status_ready:"准备中",status_processing:"上传中",status_complete:"已完成",status_skip:"已跳过",status_cancel:"已取消",status_error:"已失败"},setup:c,getStatusText:d}),Q.Uploader=j}(window)}),define("dist/authentication/fixedTopBar",[],function(a,b,c){var d=$(".new-detail-header"),e=d.height();$(window).scroll(function(){var a=$(this).scrollTop();a-e>=0?d.addClass("new-detail-header-fix"):d.removeClass("new-detail-header-fix")})}),define("dist/authentication/msgVer",["dist/cmd-lib/toast","dist/application/api","dist/application/urlConfig"],function(a,b,c){a("dist/cmd-lib/toast");var d=a("dist/application/api"),e={validateFrom:/^1[3456789]\d{9}$/,phone:"",textCode:"",downCountNum:60,isDisableMsg:!1,avaliPhone:!1,smsId:"",valiPhone:function(){return console.log(this.phone),this.validateFrom.test(this.phone)},initial:function(){$(".js-submit").click(this.sendData),$(".js-msg").click(this.getTextCode)},getTextCode:function(){e.phone=$(".js-phone").text(),e.valiPhone()?e.avaliPhone=!0:$.toast({text:"请输入正确的手机号码",icon:"",delay:2e3,callback:!1}),!e.isDisableMsg&&e.avaliPhone&&e.pictureVerify()},downCountLimt:function(){var a=this.downCountNum,b=this;e.isDisableMsg=!0,$(".js-msg").addClass("btn-send-code-no");var c=setInterval(function(){a--,$(".js-msg").text(a+"秒"),1>a&&(clearInterval(c),b.isDisableMsg=!1,$(".js-msg").removeClass("btn-send-code-no"),$(".js-msg").text("获取验证码"))},1e3)},pictureVerify:function(a,b,c,f){var g={mobile:e.phone,nationCode:"86",businessCode:"6",terminal:"pc",appId:a,randstr:b,ticket:c,onOff:f};g=JSON.stringify(g),$.ajax(d.user.sendSms,{type:"POST",data:g,contentType:"application/json"}).done(function(a){"0"==a.code?(e.smsId=a.data.smsId,$(".js-msg").attr("smsId",a.data.smsId),e.downCountLimt(),$.toast({text:"短信发送成功",icon:"",delay:2e3,callback:!1})):"411015"==a.code?e.showCaptchaProcess(e.pictureVerify):$.toast({text:a.message,icon:"",delay:2e3,callback:!1})}).fail(function(a){console.log("error==="+a)})},showCaptchaProcess:function(a){e.showCaptcha(a)},showCaptcha:function(a){var b,c="2071307690";b||(b=new TencentCaptcha(c,e.captCallback,{bizState:a})),b.show()},captCallback:function(a){0===a.ret&&a.bizState(a.appid,a.randstr,a.ticket,1)}};e.initial()}),define("dist/cmd-lib/toast",[],function(a,b,c){!function(a,b,c){function d(b){this.options={text:"我是toast提示",icon:"",delay:3e3,callback:!1},b&&a.isPlainObject(b)&&a.extend(!0,this.options,b),this.init()}d.prototype.init=function(){var b=this;b.body=a("body"),b.toastWrap=a('<div class="ui-toast" style="position:fixed;min-width:200px;padding:0 10px;height:60px;line-height:60px;text-align:center;background:#000;opacity:0.8;filter:alpha(opacity=80);top:40%;left:50%;margin-left:-100px;margin-top:-30px;border-radius:4px;z-index:99999999">'),b.toastIcon=a('<i class="icon"></i>'),b.toastText=a('<span class="ui-toast-text" style="color:#fff">'+b.options.text+"</span>"),b._creatDom(),b.show(),b.hide()},d.prototype._creatDom=function(){var a=this;a.options.icon&&a.toastWrap.append(a.toastIcon.addClass(a.options.icon)),a.toastWrap.append(a.toastText),a.body.append(a.toastWrap)},d.prototype.show=function(){var a=this;setTimeout(function(){a.toastWrap.removeClass("hide").addClass("show")},50)},d.prototype.hide=function(){var a=this;setTimeout(function(){a.toastWrap.removeClass("show").addClass("hide"),a.toastWrap.remove(),a.options.callback&&a.options.callback()},a.options.delay)},a.toast=function(a){return new d(a)}}($,window,document)}),define("dist/application/api",["dist/application/urlConfig"],function(a,b,c){var d=a("dist/application/urlConfig"),e=d.ajaxUrl+"/gateway/pc",f=d.ajaxUrl+"/gateway";c.exports={user:{userWxAuthState:f+"/cas/user/wxAuthState",dictionaryData:f+"/market/dictionaryData/$code",checkSso:f+"/cas/login/checkSso",loginByPsodOrVerCode:f+"/cas/login/authorize",getLoginQrcode:f+"/cas/login/qrcode",loginByWeChat:f+"/cas/login/gzhScan",getUserInfo:"/node/api/getUserInfo",thirdLoginRedirect:f+"/cas/login/redirect",loginOut:f+"/cas/login/logout",newCollect:f+"/content/collect/getUserFileList",addFeedback:f+"/feedback/addFeedback",getFeedbackType:f+"/feedback/getFeedbackType",sendSms:f+"/cas/sms/sendSms",queryBindInfo:f+"/cas/user/queryBindInfo",thirdCodelogin:f+"/cas/login/thirdCode",userBindMobile:f+"/cas/user/bindMobile",checkIdentity:f+"/cas/sms/checkIdentity",userBindThird:f+"/cas/user/bindThird",untyingThird:f+"/cas/user/untyingThird",setUpPassword:f+"/cas/user/setUpPassword",getUserCentreInfo:f+"/user/getUserCentreInfo",editUser:f+"/user/editUser",getFileBrowsePage:f+"/content/fileBrowse/getFileBrowsePage",getDownloadRecordList:f+"/content/getDownloadRecordList",getUserFileList:f+"/content/collect/getUserFileList",getMyUploadPage:f+"/content/getMyUploadPage",getOtherUser:f+"/user/getOthersCentreInfo",getSearchList:f+"/search/content/byCondition",getVisitorId:f+"/user/getVisitorId"},normalFileDetail:{filePreDownLoad:f+"/content/getPreFileDownUrl",getFileDownLoadUrl:f+"/content/getFileDownUrl",getPrePageInfo:f+"/content/getPreRead",sendmail:f+"/content/sendmail/findFile",getFileDetailNoTdk:f+"/content/getFileDetailNoTdk"},officeFileDetail:{},search:{specialTopic:f+"/search/specialTopic/lisPage"},sms:{sendCorpusDownloadMail:f+"/content/fileSendEmail/sendCorpusDownloadMail",fileSendEmailVisitor:f+"/content/fileSendEmail/visitor"},pay:{bindUser:f+"/order/bind/loginUser",scanOrderInfo:f+"/order/scan/orderInfo",getBuyAutoRenewList:f+"/order/buy/autoRenewList",cancelAutoRenew:f+"/order/cancel/autoRenew/"},coupon:{rightsSaleVouchers:f+"/rights/sale/vouchers",rightsSaleQueryPersonal:f+"/rights/sale/queryPersonal",querySeniority:f+"/rights/sale/querySeniority",queryUsing:f+"/rights/sale/queryUsing",getMemberPointRecord:f+"/rights/vip/getMemberPointRecord",getBuyRecord:f+"/rights/vip/getBuyRecord",getTask:f+"/rights/task/get",receiveTask:f+"/rights/task/receive",taskHasEnable:f+"/rights/task/hasEnable"},order:{reportOrderError:f+"/order/message/save",bindOrderByOrderNo:f+"/order/bind/byOrderNo",unloginOrderDown:e+"/order/unloginOrderDown",createOrderInfo:f+"/order/create/orderInfo",rightsVipGetUserMember:f+"/rights/vip/getUserMember",getOrderStatus:f+"/order/get/orderStatus",queryOrderlistByCondition:f+"/order/query/listByCondition",getOrderInfo:f+"/order/get/orderInfo"},getHotSearch:f+"/cms/search/content/hotWords",special:{fileSaveOrupdate:f+"/comment/zan/fileSaveOrupdate",getCollectState:f+"/comment/zc/getUserFileZcState",setCollect:f+"/content/collect/file"},upload:{getWebAllFileCategory:f+"/content/fileCategory/getWebAll",createFolder:f+"/content/saveUserFolder",getFolder:f+"/content/getUserFolders",saveUploadFile:f+"/content/webUploadFile",picUploadCatalog:"/ishare-upload/picUploadCatalog",fileUpload:"/ishare-upload/fileUpload",batchDeleteUserFile:f+"/content/batchDeleteUserFile"},recommend:{recommendConfigInfo:f+"/recommend/config/info",recommendConfigRuleInfo:f+"/recommend/config/ruleInfo"},reportBrowse:{fileBrowseReportBrowse:f+"/content/fileBrowse/reportBrowse"},mywallet:{getAccountBalance:f+"/account/balance/getGrossIncome",withdrawal:f+"/account/with/apply",getWithdrawalRecord:f+"/account/withd/getPersonList",editFinanceAccount:f+"/account/finance/edit",getFinanceAccountInfo:f+"/account/finance/getInfo",getPersonalAccountTax:f+"/account/tax/getPersonal",getMyWalletList:f+"/settlement/settle/getMyWalletList",exportMyWalletDetail:f+"/settlement/settle/exportMyWalletDetail"},authentication:{getInstitutions:f+"/user/certification/getInstitutions",institutions:f+"/user/certification/institutions",getPersonalCertification:f+"/user/certification/getPersonal",personalCertification:f+"/user/certification/personal"},seo:{listContentInfos:f+"/seo/exposeContent/contentInfo/listContentInfos"},wechat:{getWechatSignature:f+"/message/wechat/info/getWechatSignature"},comment:{getLableList:f+"/comment/lable/dataList",addComment:f+"/comment/eval/add",getHotLableDataList:f+"/comment/lable/hotDataList",getFileComment:f+"/comment/eval/dataList",getPersoDataInfo:f+"/comment/eval/persoDataInfo"}}}),define("dist/application/urlConfig",[],function(a,b,c){var d=window.env,e={debug:{ajaxUrl:"",payUrl:"http://open-ishare.iask.com.cn",upload:"//upload-ishare.iask.com",appId:"wxb8af2801b7be4c37",bilogUrl:"https://dw.iask.com.cn/ishare/jsonp",officeUrl:"http://office.iask.com",ejunshi:"http://dev.ejunshi.com"},local:{ajaxUrl:"",payUrl:"http://test-open-ishare.iask.com.cn",upload:"//dev-upload-ishare.iask.com",appId:"wxb8af2801b7be4c37",bilogUrl:"https://dev-dw.iask.com.cn/ishare/jsonp",officeUrl:"http://dev-office.iask.com",ejunshi:"http://dev.ejunshi.com"},dev:{ajaxUrl:"",payUrl:"http://dev-open-ishare.iask.com.cn",upload:"//dev-upload-ishare.iask.com",appId:"wxb8af2801b7be4c37",bilogUrl:"https://dev-dw.iask.com.cn/ishare/jsonp",officeUrl:"http://dev-office.iask.com",ejunshi:"http://dev.ejunshi.com"},test:{ajaxUrl:"",payUrl:"http://test-open-ishare.iask.com.cn",upload:"//test-upload-ishare.iask.com",appId:"wxb8af2801b7be4c37",bilogUrl:"https://test-dw.iask.com.cn/ishare/jsonp",officeUrl:"http://test-office.iask.com",ejunshi:"http://test.ejunshi.com"},pre:{ajaxUrl:"",payUrl:"http://pre-open-ishare.iask.com.cn",upload:"//pre-upload-ishare.iask.com",appId:"wxca8532521e94faf4",bilogUrl:"https://pre-dw.iask.com.cn/ishare/jsonp",officeUrl:"http://pre-office.iask.com",ejunshi:"http://pre.ejunshi.com"},prod:{ajaxUrl:"",payUrl:"http://open-ishare.iask.com.cn",upload:"//upload-ishare.iask.com",appId:"wxca8532521e94faf4",bilogUrl:"https://dw.iask.com.cn/ishare/jsonp",officeUrl:"http://office.iask.com",ejunshi:"http://ejunshi.com"}};return e[d]}),define("dist/cmd-lib/util",[],function(a,b,c){var d={throttle:function(a,b){var c,d;return function(e){var f=this,g=arguments,h=+new Date;c&&c+b>h?(clearTimeout(d),d=setTimeout(function(){c=h,a.apply(f,g)},b)):(c=h,a.apply(f,g))}},debounce:function(a,b){var c=0,d=this;return function(e){c&&clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},isWeChatBrow:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("micromessenger");return b?!0:!1},getWebAppUA:function(){var a=0,b=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(b)?a=1:/android/.test(b)&&(a=0),a},validateIE8:function(){return!$.browser.msie||"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0;
},validateIE9:function(){return!$.browser.msie||"9.0"!=$.browser.version&&"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},getReferrer:function(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},getPageRef:function(a){var b=this,c=0;return(b.is360cookie(a)||b.is360cookie("360"))&&(c=1),b.is360wkCookie()&&(c=3),c},is360cookie:function(a){var b=this,c=b.getCookie("_r_so");if(c)for(var d=c.split("_"),e=0;e<d.length;e++)if(d[e]==a)return!0;return!1},add360wkCookie:function(){this.setCookieWithExpPath("_360hz","1",18e5,"/")},is360wkCookie:function(){return null==getCookie("_360hz")?!1:!0},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},findRefer:function(){var a=document.referrer,b="other";return/https?\:\/\/[^\s]*\/f\/.*$/g.test(a)?b="pindex":/https?\:\/\/[^\s]*\/d\/.*$/g.test(a)?b="landing":/https?\:\/\/[^\s]*\/c\/.*$/g.test(a)?b="pcat":/https?\:\/\/[^\s]*\/search\/.*$/g.test(a)?b="psearch":/https?\:\/\/[^\s]*\/t\/.*$/g.test(a)?b="ptag":/https?\:\/\/[^\s]*\/[u|n]\/.*$/g.test(a)?b="popenuser":/https?\:\/\/[^\s]*\/ucenter\/.*$/g.test(a)?b="puser":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.$/g.test(a)?b="ishareindex":/https?\:\/\/[^\s]*\/theme\/.*$/g.test(a)?b="theme":/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},showAlertDialog:function(a,b,c){var d=$(".common-bgMask"),e=$(".common-dialog");e.find("h2[name='title']").text(a),e.find("span[name='content']").html(b),e.find("a.close,a.btn-dialog").unbind("click").click(function(){d.hide(),e.hide(),c&&!$(this).hasClass("close")&&c()}),d.show(),e.show()},browserVersion:function(a){var b=a.indexOf("Opera")>-1,c=a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b,d=a.indexOf("Edge")>-1,e=a.indexOf("Firefox")>-1,f=a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome"),g=a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1;if(c){var h=new RegExp("MSIE (\\d+\\.\\d+);");h.test(a);var i=parseFloat(RegExp.$1);return 7===i?"IE7":8===i?"IE8":9===i?"IE9":10===i?"IE10":11===i?"IE11":12===i?"IE12":"IE"}return b?"Opera":d?"Edge":e?"Firefox":f?"Safari":g?"Chrome":"unKnow"},getBrowserInfo:function(a){var b={},c=a.toLowerCase(),d=/(msie|firefox|chrome|opera|version|trident).*?([\d.]+)/,e=c.match(d);return e&&e.length>=2?(b.browser=e[1].replace(/version/,"'safari")||"unknow",b.ver=e[2]||"1.0.0"):(b.browser="unknow",b.ver="1.0.0"),b.browser+"/"+b.ver},timeFormat:function(a,b){if(!b)return"";var c=new Date(b),d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate(),g=c.getHours(),h=c.getMinutes(),i=c.getSeconds();return 10>e&&(e+="0"),10>f&&(f+="0"),10>g&&(g+="0"),10>h&&(h+="0"),10>i&&(i+="0"),"yyyy-mm-dd"===a?d+"-"+e+"-"+f:d+"-"+e+"-"+f+" "+g+":"+h+":"+i}};c.exports=d}),define("dist/application/method",[],function(require,exports,module){return{keyMap:{ishare_detail_access:"ISHARE_DETAIL_ACCESS",ishare_office_detail_access:"ISHARE_OFFICE_DETAIL_ACCESS"},async:function(a,b,c,d,e){$.ajax(a,{type:d||"post",data:e,async:!1,dataType:"json",headers:{"cache-control":"no-cache",Pragma:"no-cache",Authrization:this.getCookie("cuk")}}).done(function(a){b&&b(a)}).fail(function(a){console.log("error==="+c)})},get:function(a,b,c){$.ajaxSetup({cache:!1}),this.async(a,b,c,"get")},post:function(a,b,c,d,e){this.async(a,b,c,d,e)},postd:function(a,b,c){this.async(a,b,!1,!1,c)},random:function(a,b){return Math.floor(Math.random()*(b-a))+a},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},setCookieWithExp:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),d?document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString():document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},delCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1);var e=this.getCookie(a);null!=e&&(b&&c?document.cookie=a+"= '' ;domain="+c+";expires="+d.toGMTString()+";path="+b:b?document.cookie=a+"= '' ;expires="+d.toGMTString()+";path="+b:document.cookie=a+"="+e+";expires="+d.toGMTString())},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},url2Obj:function(a){for(var b={},c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b},getParam:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},getLocalData:function(a){try{if(localStorage&&localStorage.getItem){var b=localStorage.getItem(a);return null===b?null:JSON.parse(b)}return console.log("浏览器不支持html localStorage getItem"),null}catch(c){return null}},setLocalData:function(a,b){localStorage&&localStorage.setItem?(localStorage.removeItem(a),localStorage.setItem(a,JSON.stringify(b))):console.log("浏览器不支持html localStorage setItem")},browserType:function(){var a=navigator.userAgent,b=a.indexOf("Opera")>-1;return b?"Opera":a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b?"IE":a.indexOf("Edge")>-1?"Edge":a.indexOf("Firefox")>-1?"Firefox":a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome")?"Safari":a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1?"Chrome":void 0},validateIE9:function(){return Boolean($.browser.msie&&("9.0"===$.browser.version||"8.0"===$.browser.version||"7.0"===$.browser.version||"6.0"===$.browser.version))},compareTime:function(a,b){return a&&b?Math.abs((b-a)/1e3/60/60/24):""},changeURLPar:function(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText)}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},getUrlAllParams:function(a){if("undefined"==typeof a)var b=decodeURI(location.search);else var b="?"+a.split("?")[1];var c=new Object;if(-1!=b.indexOf("?"))for(var d=b.substr(1),e=d.split("&"),f=0;f<e.length;f++)c[e[f].split("=")[0]]=decodeURI(e[f].split("=")[1]);return c},compatibleIESkip:function(a,b){setTimeout(function(){var c=document.createElement("a");c.href=a,c.style.display="none",b&&(c.target="_blank"),document.body.appendChild(c),c.click()},350)},testEmail:function(a){var b=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return b.test(a)?!0:!1},testPhone:function(a){return/^1(3|4|5|6|7|8|9)\d{9}$/.test(a)?!0:!1},handleRecommendData:function(a){var b=[];return $(a).each(function(a,c){var d={};1==c.type&&(c.linkUrl="/f/"+c.tprId+".html",d=c),2==c.type&&(d=c),3==c.type&&(c.linkUrl="/node/s/"+c.tprId+".html",d=c),b.push(d)}),console.log(b),b},formatDate:function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,String(this.getFullYear()).substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr(String(b[c]).length)));return a},getReferrer:function(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)&&(b="sm"),b},judgeSource:function(a){a||(a={}),a.searchEngine="";var b="";if(b=utils.getQueryVariable("from"),b||(b=sessionStorage.getItem("webWxFrom")||utils.getCookie("webWxFrom")),b)a.source=b,sessionStorage.setItem("webWxFrom",b),sessionStorage.removeItem("webReferrer");else{var c=sessionStorage.getItem("webReferrer")||utils.getCookie("webReferrer");if(c||(c=document.referrer),c){sessionStorage.setItem("webReferrer",c),sessionStorage.removeItem("webWxFrom"),c=c.toLowerCase();for(var d=new Array("google.","baidu.","360.","sogou.","shenma.","bing."),e=new Array("google","baidu","360","sogou","shenma","bing"),f=0,g=d.length;g>f;f++)c.indexOf(d[f])>=0&&(a.source="searchEngine",a.searchEngine=e[f])}c&&a.source||(utils.isWeChatBrow()?a.source="wechat":a.source="outLink")}return a},randomString:function(a){a=a||4;for(var b="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",c=b.length,d="",e=0;a>e;e++)d+=b.charAt(Math.floor(Math.random()*c));return d},saveLoginToken:function(a,b){b=b||2592e6,this.setCookieWithExpPath("cuk",a,b,"/")},getLoginToken:function(){return this.getCookie("cuk")||""},delLoginToken:function(){this.delCookie("cuk","/")},saveLoginSessionId:function(a){var b=(new Date).getTime(),c=a.split("_"),d=c[1]||0,e=d-b;this.setCookieWithExpPath("ish_jssid",a,e,"/")},getLoginSessionId:function(){return this.getCookie("ish_jssid")||""},isIe8:function(){return Array.isArray?!0:!1}}}),define("dist/application/effect",["dist/application/checkLogin","dist/application/api","dist/application/urlConfig","dist/application/method","dist/application/login","dist/application/loginOperationLogic","dist/cmd-lib/jqueryMd5","dist/common/bindphone","dist/cmd-lib/myDialog","dist/cmd-lib/toast","dist/application/iframe/iframe-messenger","dist/application/iframe/messenger","dist/common/baidu-statistics","dist/application/method","dist/common/loginType","dist/common/associateWords"],function(a,b,c){function d(a,b,c){!g.getCookie("cuk")&&b?f.notifyLoginInterface(function(b){a&&a(b),c&&c(b),m(b)}):g.getCookie("cuk")?f.getLoginData(function(b){a&&a(b),m(b)}):b||a&&a()}function e(){$.ajax({url:h.user.dictionaryData.replace("$code","sceneSwitch"),type:"GET",async:!1,contentType:"application/json; charset=utf-8",dataType:"json",cache:!1,success:function(a){console.log(a),0==a.code&&a.data&&a.data.length&&$.each(a.data,function(a,b){if("PC-M-Login"==b.pcode){var c=window.pageConfig.page&&window.pageConfig.page.abTest;("a"!=c||g.getCookie("isShowDetailALoginRedPacket"))&&("b"!=c||g.getCookie("isShowDetailBLoginRedPacket"))?"index"!=c||g.getCookie("isShowIndexLoginRedPacket")||($(".loginRedPacket-dialog").removeClass("hide"),trackEvent("NE006","modelView","view",{moduleID:"activityFloat",moduleName:"活动浮层"})):($(".loginRedPacket-dialog").removeClass("hide"),trackEvent("NE006","modelView","view",{moduleID:"activityFloat",moduleName:"活动浮层"}))}})}})}var f=a("dist/application/checkLogin"),g=a("dist/application/method"),h=a("dist/application/api"),i=a("dist/common/loginType"),j=a("dist/common/associateWords");j.init(),$("#unLogin").on("click",function(){f.notifyLoginInterface(function(a){m(a)})}),$(".loginOut").on("click",function(){var a=window.pageConfig.page&&window.pageConfig.page.pageName;"personalCenter"==a&&trackEvent("NE002","normalClick","click",{domID:"exit",domName:"退出登录"}),f.ishareLogout()}),$(".top-user-more .js-buy-open").click(function(){"vip"==$(this).attr("data-type")&&(location.href="/pay/vip.html")}),$(".vip-join-con").click(function(){g.compatibleIESkip("/node/rights/vip.html",!0)}),$(".btn-new-search").click(function(){var a="";if(new RegExp("/search/home.html").test(location.href)){var b=window.location.href.substring(0,window.location.href.indexOf("?"))+"?ft=all";a=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder"),window.location.href=g.changeURLPar(b,"cond",encodeURIComponent(encodeURIComponent(a)))}else a=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder"),a&&g.compatibleIESkip("/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(a)),!0)}),$(".new-input").on("keydown",function(a){var b="";if(new RegExp("/search/home.html").test(location.href)&&13===a.keyCode){var c=window.location.href.substring(0,window.location.href.indexOf("?"))+"?ft=all";b=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder"),window.location.href=g.changeURLPar(c,"cond",encodeURIComponent(encodeURIComponent(b)))}else 13===a.keyCode&&(b=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder"),b&&g.compatibleIESkip("/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(b)),!0))});var k=$(".new-detail-header"),l=k.height();$(window).scroll(function(){var a=$(this).scrollTop();a-l>=0?k.addClass("new-detail-header-fix"):k.removeClass("new-detail-header-fix")});var m=function(a){var b=a.nickName&&a.nickName.length>4?a.nickName.slice(0,4)+"...":a.nickName,c=$("#unLogin"),d=$("#haveLogin");c.hide(),d.find(".user-link .user-name").html(b),d.find(".user-link img").attr("src",a.photoPicURL),d.find(".top-user-more .name").html(b),d.find(".top-user-more img").attr("src",a.photoPicURL),d.find(".user-link .user-name").text(b);var e=i[g.getCookie("loginType")];d.find(".user-link .user-loginType").text(e?e+"登录":""),d.show();var f=$(".JsPayOfficeVip"),h=$(".JsPayMainVip"),j=$(".JsMainIcon"),k=$(".JsOfficeIcon");1===a.isOfficeVip?(f.html("立即续费"),k.addClass("i-vip-blue"),k.removeClass("i-vip-gray2")):(k.removeClass("i-vip-blue"),k.addClass("i-vip-gray2")),1===a.isMasterVip?(h.html("立即续费"),j.addClass("i-vip-yellow"),j.removeClass("i-vip-gray1")):(j.removeClass("i-vip-yellow"),j.addClass("i-vip-gray1")),$(".jsUserImage").attr("src",a.photoPicURL),$(".jsUserName").text(a.nickName),window.pageConfig.params&&(window.pageConfig.params.isVip=a.isVip);var l=a.fileDiscount;l?l/=100:l=.8,window.pageConfig.params&&(window.pageConfig.params.fileDiscount=l),$("#ip-uid").val(a.userId),$("#ip-isVip").val(a.isVip),$("#ip-mobile").val(a.mobile)};return e(),$(document).on("click",".loginRedPacket-dialog .close-btn",function(a){trackEvent("NE002","normalClick","click",{domID:"close",domName:"关闭"});var b=window.pageConfig.page&&window.pageConfig.page.abTest;"a"==b?g.setCookieWithExpPath("isShowDetailALoginRedPacket",1):"b"==b?g.setCookieWithExpPath("isShowDetailBLoginRedPacket",1):g.setCookieWithExpPath("isShowIndexLoginRedPacket",1),$(".loginRedPacket-dialog").hide()}),$(document).on("click",".loginRedPacket-dialog .loginRedPacket-content",function(a){trackEvent("NE002","normalClick","click",{domID:"confirm",domName:"确定"});var b=window.pageConfig.page&&window.pageConfig.page.abTest;"a"==b?$("#detail-unLogin").trigger("click"):"b"==b?$("#detail-unLogin").trigger("click"):$(".index-header .notLogin").trigger("click")}),{refreshTopBar:m,isLogin:d}}),define("dist/application/checkLogin",["dist/application/api","dist/application/urlConfig","dist/application/method","dist/application/login","dist/application/loginOperationLogic","dist/cmd-lib/jqueryMd5","dist/common/bindphone","dist/cmd-lib/myDialog","dist/cmd-lib/toast","dist/application/iframe/iframe-messenger","dist/application/iframe/messenger","dist/common/baidu-statistics"],function(a,b,c){var d=a("dist/application/api"),e=a("dist/application/method"),f=a("dist/application/login").showLoginDialog;a("dist/common/baidu-statistics").initBaiduStatistics("17cdd3f409f282dc0eeb3785fcf78a66");var g=a("dist/common/baidu-statistics").handleBaiduStatisticsPush;c.exports={getIds:function(){var a=window.pageConfig&&window.pageConfig.params?window.pageConfig.params:null,b=window.pageConfig&&window.pageConfig.access?window.pageConfig.access:null,c=a?a.classid:"",d=b?b.fileId||a.g_fileId||"":"",e=a&&a.classIds?a.classIds:"";return!c&&(c=e),{clsId:c,fid:d}},notifyLoginInterface:function(a){var b=this;if(!e.getCookie("cuk")){var c=(window.pageConfig&&window.pageConfig.page?window.pageConfig.page.ptype||"index":"index",this.getIds().clsId),d=this.getIds().fid;f({clsId:c,fid:d},function(){console.log("loginCallback"),b.getLoginData(a,"isFirstLogin")})}},listenLoginStatus:function(a){var b=this;$.loginPop("login_wx_code",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:"ishare",popup:"hidden",clsId:this.getIds().clsId,fid:this.getIds().fid},function(){b.getLoginData(a)})},getUserData:function(a){e.getCookie("cuk")&&e.get(d.coupon.querySeniority,function(b){b&&0==b.code&&a(b.data)},"")},getLoginData:function(a,b){var c=this;try{e.get("/node/api/getUserInfo",function(d){if(0==d.code&&d.data){if(b){g("loginResult01",{loginType:window.loginType&&window.loginType,loginResult:"1"}),trackEventLogin(d.data.userId),trackEvent("SE001","loginResult","query",{loginResult:"1",failMsg:"",loginType:window.loginType&&window.loginType});var f=window.pageConfig&&window.pageConfig.page||{};"detail"!=f.type&&setTimeout(function(){window.location.reload()},600)}if($(".loginRedPacket-dialog").hide(),a&&"function"==typeof a){a(d.data);try{window.pageConfig.params.isVip=d.data.isVip,window.pageConfig.page.uid=d.data.userId}catch(h){}}try{var i={uid:d.data.userId,isVip:d.data.isVip,tel:d.data.mobile};e.setCookieWithExpPath("ui",JSON.stringify(i),18e5,"/"),e.setCookieWithExpPath("userId",d.data.userId,18e5,"/")}catch(j){}}else g("loginResult01",{loginType:window.loginType&&window.loginType,loginResult:"0"}),c.ishareLogout()})}catch(d){console.log(d)}},ishareLogout:function(){$.ajax({url:d.user.loginOut,type:"GET",headers:{"cache-control":"no-cache",Pragma:"no-cache",jsId:e.getLoginSessionId()},contentType:"application/json; charset=utf-8",dataType:"json",cache:!1,data:null,success:function(a){console.log("loginOut:",a),0==a.code?(iask_web.logout(),window.location.reload()):$.toast({text:a.message,delay:3e3})}}),e.delCookie("cuk","/",".sina.com.cn"),e.delCookie("cuk","/",".iask.com.cn"),e.delCookie("cuk","/",".iask.com"),e.delCookie("cuk","/"),e.delCookie("sid","/",".iask.sina.com.cn"),e.delCookie("sid","/",".iask.com.cn"),e.delCookie("sid","/",".sina.com.cn"),e.delCookie("sid","/",".ishare.iask.com.cn"),e.delCookie("sid","/",".office.iask.com"),e.delCookie("sid_ishare","/",".iask.sina.com.cn"),e.delCookie("sid_ishare","/",".iask.com.cn"),e.delCookie("sid_ishare","/",".sina.com.cn"),e.delCookie("sid_ishare","/",".ishare.iask.com.cn"),e.delCookie("userId","/"),e.delCookie("_1st_l","/"),e.delCookie("ui","/")}}}),define("dist/application/login",["dist/application/method","dist/application/loginOperationLogic","dist/cmd-lib/jqueryMd5","dist/application/api","dist/application/urlConfig","dist/common/bindphone","dist/cmd-lib/myDialog","dist/cmd-lib/toast","dist/application/urlConfig","dist/application/iframe/iframe-messenger","dist/application/iframe/messenger"],function(a,b,c){function d(a,b,c){var d=$("#"+b)[0];o[b].addTarget(d),d.onload=function(){console.log("$iframe.onload:",o[b]),o[b].send({isOpen:!0,cid:c.clsId,fid:c.fid,jsId:c.jsId,redirectUrl:window.location.href,originUrl:q[p],bilogUrl:m.bilogUrl,visitor_id:k.getCookie("visitor_id"),sessionID:iask_web.get_property("sessionID"),deviceID:iask_web.get_property("deviceID"),persistedTime:iask_web.get_property("persistedTime"),sessionReferrer:iask_web.get_property("sessionReferrer"),sessionStartTime:iask_web.get_property("sessionStartTime"),updatedTime:iask_web.get_property("updatedTime"),visitID:iask_web.get_property("visitID")})},o[b].listen(function(b){console.log("客户端监听-数据",b),b.userData?i(b.userData,b.formData,a):j(b.formData)}),$("#dialog-box .login-dialog .close-btn").on("click",function(){o[b].send({isOpen:!1}),k.delCookie("download-qqweibo","/"),h()})}function e(a,b){trackEvent("NE006","modelView","view",{moduleID:"login",moduleName:"登录弹窗"});var c=$("#login-dialog"),d=k.getLoginSessionId();$.extend(a,{jsId:d}),$("#dialog-box").dialog({html:c.html(),closeOnClickModal:!1}).open(l(a,b))}function f(a,b){trackEvent("NE006","modelView","view",{moduleID:"login",moduleName:"登录弹窗"});var c=k.getLoginSessionId();$.extend(a,{jsId:c});var e=$("#tourist-purchase-dialog");$("#dialog-box").dialog({html:e.html(),closeOnClickModal:!1}).open(d(b,"I_SHARE_T0URIST_PURCHASE",a))}function g(a,b){var c=k.getLoginSessionId();$.extend(a,{jsId:c});var e=$("#tourist-login").html();$(".carding-info-bottom.unloginStatus .qrWrap").html(e),$("#tourist-login").remove(),d(b,"I_SHARE_T0URIST_LOGIN",a)}function h(){$(".common-bgMask").hide(),$(".detail-bg-mask").hide(),$("#dialog-box").hide()}function i(a,b,c){window.loginType=b,k.setCookieWithExpPath("cuk",a.access_token,1e3*a.expires_in,"/"),k.setCookieWithExpPath("loginType",b,1e3*a.expires_in,"/"),$.ajaxSetup({headers:{Authrization:k.getCookie("cuk")}}),c&&c(),h()}function j(a){h()}var k=a("dist/application/method"),l=a("dist/application/loginOperationLogic").loginInit;a("dist/cmd-lib/myDialog"),a("dist/cmd-lib/toast");var m=a("dist/application/urlConfig"),n=a("dist/application/iframe/iframe-messenger"),o={I_SHARE:new n({clientId:"MAIN_I_SHARE_LOGIN",projectName:"I_SHARE",ssoId:"I_SHARE_SSO_LOGIN"}),I_SHARE_T0URIST_PURCHASE:new n({clientId:"MAIN_I_SHARE_T0URIST_PURCHASE",projectName:"I_SHARE",ssoId:"I_SHARE_SSO_T0URIST_PURCHASE"}),I_SHARE_T0URIST_LOGIN:new n({clientId:"MAIN_I_SHARE_T0URIST_LOGIN",projectName:"I_SHARE",ssoId:"I_SHARE_SSO_T0URIST_LOGIN"})},p=window.env,q={local:"http://localhost:3004",dev:"http://dev-ishare.iask.com.cn",test:"http://test-ishare.iask.com.cn",pre:"http://pre-ishare.iask.com.cn",prod:"http://ishare.iask.sina.com.cn"};return $("#dialog-box").on("click",".close-btn",function(a){k.delCookie("download-qqweibo","/"),h()}),$(document).on("click",".tourist-purchase-dialog .tabs .tab",function(a){var b=$(this).attr("data-type");$(" .tourist-purchase-dialog .tabs .tab").removeClass("tab-active"),$(this).addClass("tab-active"),"tourist-purchase"==b&&(trackEvent("NE006","modelView","view",{moduleID:"noLgFPayCon",moduleName:"免登录资料支付弹窗"}),$(".tourist-purchase-dialog #I_SHARE_T0URIST_PURCHASE").hide(),$(".tourist-purchase-dialog .tourist-purchase-content").show()),"login-purchase"==b&&(trackEvent("NE006","modelView","view",{moduleID:"login",moduleName:"登录弹窗"}),$(".tourist-purchase-dialog .tourist-purchase-content").hide(),$(".tourist-purchase-dialog #I_SHARE_T0URIST_PURCHASE").show())}),{showLoginDialog:e,showTouristPurchaseDialog:f,showTouristLogin:g}}),define("dist/application/loginOperationLogic",["dist/cmd-lib/jqueryMd5","dist/application/api","dist/application/urlConfig","dist/application/method","dist/common/bindphone","dist/application/api","dist/application/method"],function(a,b,c){function d(a){var b=window.loginTypeList.type;window.loginType=b,s.setCookieWithExpPath("cuk",a.access_token,1e3*a.expires_in,"/"),s.setCookieWithExpPath("loginType",b,1e3*a.expires_in,"/"),$.ajaxSetup({headers:{Authrization:s.getCookie("cuk")}}),K&&K(),e()}function e(){$(".common-bgMask").hide(),$(".detail-bg-mask").hide(),$("#dialog-box").hide(),clearInterval(A)}function f(a,b,c){b?"verificationCode-login"==a?($(".login-content .verificationCode-login .errortip .error-tip").text(c),$(".login-content .verificationCode-login .errortip").show()):"password-login"==a&&($(".login-content .password-login .errortip .error-tip").text(c),$(".login-content .password-login .errortip").show()):"verificationCode-login"==a?($(".login-content .verificationCode-login .errortip .error-tip").text(""),$(".login-content .verificationCode-login .errortip").hide()):"password-login"==a&&($(".login-content .password-login .errortip .error-tip").text(""),$(".login-content .password-login .errortip").hide())}function g(a,b,c,d,e){$.ajax({headers:{jsId:D},url:r.user.getLoginQrcode,type:"POST",data:JSON.stringify({cid:E||"",site:"1",fid:b||"",sceneId:w,domain:encodeURIComponent(document.domain)}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){"0"==a.code?(h(!1),B=a.data&&a.data.expires_in,w=a.data&&a.data.sceneId,i(),d||c?($(".tourist-login .qrcode-default").hide(),$(".tourist-login #login-qr").attr("src",a.data.url),$(".tourist-login #login-qr").show()):($(".login-content .qrcode-default").hide(),$(".login-content #login-qr").attr("src",a.data.url),$(".login-content #login-qr").show()),A=setInterval(function(){j(E)},4e3)):(clearInterval(A),$.toast({text:a.message,delay:3e3}))},error:function(a){$.toast({text:a.message,delay:3e3})}})}function h(a){a?($(".login-qrContent .login-qr-invalidtip").show(),$(".login-qrContent .qr-invalidtip").show(),$(".login-qrContent .qr-refresh").show()):($(".login-qrContent .login-qr-invalidtip").hide(),$(".login-qrContent .qr-invalidtip").hide(),$(".login-qrContent .qr-refresh").hide())}function i(){0>=B?(clearTimeout(z),clearInterval(A),$(".login-content .qrcode-default").hide(),h(!0)):(B--,z=setTimeout(i,1e3))}function j(a,b){$.ajax({headers:{jsId:D},url:r.user.loginByWeChat,type:"POST",data:JSON.stringify({sceneId:w,site:"1",cid:a,fid:b||"1816",domain:encodeURIComponent(document.domain)}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){"0"==a.code?(clearInterval(A),d(a.data)):"411046"!=a.code&&(clearInterval(A),$.toast({text:a.message,delay:3e3}))},error:function(a){$.toast({text:a.message,delay:3e3})}})}function k(a){var b=a,c=1,d=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname,e=window.location.href,f=d+"/login-middle.html?clientCode="+b+"&redirectUrl="+encodeURIComponent(e),g=d+r.user.thirdCodelogin+"?clientCode="+b+"&channel="+c+"&terminal=pc&businessSys=ishare&location="+encodeURIComponent(f);l(g)}function l(a){var b=585,c=525,d=(window.screen.availHeight-30-c)/2,e=(window.screen.availWidth-10-b)/2,f="height="+c+",width="+b+",top="+d+",left="+e+",toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes";v=window.open(a,"_parent",f)}function m(a,b,c){$.ajax({headers:{jsId:D},url:r.user.thirdLoginRedirect,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({terminal:"0",thirdType:c,code:a,businessSys:"ishare"}),dataType:"json",success:function(a){"0"==a.code?(v.close(),d(a.data)):($.toast({text:a.message,delay:3e3}),v.close())},error:function(a){v.close(),$.toast({text:a.message,delay:3e3})}})}function n(a,b,c,d){$.ajax({url:r.user.sendSms,headers:{jsId:D},type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({mobile:x,nationCode:$(".login-content .verificationCode-login .phone-num").text().replace(/\+/,"").trim(),businessCode:y,terminal:"pc",appId:a,randstr:b,ticket:c,onOff:d}),dataType:"json",success:function(a){if("0"==a.code){u=a.data.smsId;var b=$(".login-content .getVerificationCode");b.attr("data-authenticationCodeType",1);var c=null,d=60;!function e(){0>=d?(clearTimeout(c),b.text("重新获取验证码"),b.css({fontSize:"13px",color:"#fff",borderColor:"#eee"}),autheSicationCode.attr("data-authenticationCodeType",2)):(authentCationCode.text(d--),b.css({color:"#999999",backgroundColor:"#E9E8E5",borderColor:"#eee"}),c=setTimeout(e,1e3)),C}(),C}else"411015"==a.code?t(n):"411033"==a.code?$.toast({text:"图形验证码错误",delay:3e3}):$.toast({text:a.message,delay:3e3})},error:function(a){$.toast({text:a.message,delay:3e3})}})}function o(a,b,c,e,g,h){$.ajax({url:r.user.loginByPsodOrVerCode,type:"POST",headers:{jsId:D},data:JSON.stringify({loginType:a,terminal:"pc",mobile:b,nationCode:c,smsId:e,checkCode:g,password:$.md5(h)}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){"0"==a.code?d(a.data):g?f("verificationCode-login",!0,a.message):f("password-login",!0,a.message)},error:function(a){$.toast({text:a.message,delay:3e3})}})}function p(){$.ajax({url:r.user.dictionaryData.replace("$code","sceneSwitch"),type:"GET",async:!1,contentType:"application/json; charset=utf-8",dataType:"json",cache:!1,success:function(a){console.log(a);var b=[];0==a.code&&a.data&&a.data.length&&$.each(a.data,function(a,c){b.push(c.pcode)}),-1!=b.indexOf("PC-M-Login")?($(".login-redpacket").show(),$(".login-type-list").css("margin-top","21px")):($(".login-redpacket").hide(),$(".login-type-list").removeAttr("style"))}})}function q(a,b){K=b,D=a.jsId,E=a.cid||a.clsId,F=a.originUrl,G=a.redirectUrl,H=a.bilogUrl,I=a.visitor_id,J={sessionID:a.sessionID,deviceID:a.deviceID,persistedTime:a.persistedTime,sessionReferrer:a.sessionReferrer,sessionStartTime:a.sessionStartTime,updatedTime:a.updatedTime,visitID:a.visitID},g(a.cid,a.fid),p()}a("dist/cmd-lib/jqueryMd5");var r=a("dist/application/api"),s=a("dist/application/method"),t=a("dist/common/bindphone").showCaptcha;v="";var u="",v="",w="",x="",y="",z=null,A=null,B="",D="",E="",F="",G="",H="",I="",J={},K="";return window.loginTypeList={type:"wechat",values:{0:"wechat",1:"qq",2:"weibo",3:"phoneCode",4:"phonePw"}},$(document).on("click",".login-content .login-type-list .login-type-weixin .weixin-icon",function(a){$(".login-content .verificationCode-login").hide(),$(" .login-content .password-login").hide(),$(".login-content .weixin-login").show(),window.loginTypeList.type=window.loginTypeList.values[0]}),$(document).on("click",".login-content .login-type-list .login-type-verificationCode",function(a){$(".login-content .password-login").hide(),$(".login-content .weixin-login").hide(),$(".login-content .verificationCode-login").show(),window.loginTypeList.type=window.loginTypeList.values[3],iask_web.track_event("NE002","normalClick","click",{domID:"mobileLogin",domName:"登录页短信验证码登录"})}),$(document).on("click",".login-content .login-type-list .login-type-password",function(a){$(".login-content .weixin-login").hide(),$(".login-content .verificationCode-login").hide(),$(".login-content .password-login").show(),window.loginTypeList.type=window.loginTypeList.values[4],iask_web.track_event("NE002","normalClick","click",{domID:"pwLogin",domName:"登录页密码登录"})}),$(document).on("click",".login-content  .login-type-list .login-type",function(){var a=$(this).attr("data-logintype");a&&(k(a),"qq"==a&&(window.loginTypeList.type=window.loginTypeList.values[1],iask_web.track_event("NE002","normalClick","click",{domID:"qqLogin",domName:"登录页QQ登录"})),"weibo"==a&&(window.loginTypeList.type=window.loginTypeList.values[2],iask_web.track_event("NE002","normalClick","click",{domID:"weiboLogin",domName:"登录页微博登录"})))}),$(document).on("click",".login-content .login-btn",function(a){var b=$(this).attr("data-logintype"),c="",d="";if("verificationCode"==b){c=$(".login-content .verificationCode-login .phone-num").text().replace(/\+/,"").trim();var e=$(".login-content .verificationCode-login .verification-code").val();return d=$(".login-content .verificationCode-login .telphone").val().trim(),s.testPhone(d)||"86"!=c?!e||e&&4!==e.length?void f("verificationCode-login",!0,"验证码错误"):(f("verificationCode-login",!1,""),o("codeLogin",d,c,u,e,""),void iask_web.track_event("NE002","normalClick","click",{domID:"login",domName:"登录页登录按钮"})):void f("verificationCode-login",!0,"手机号错误")}if("password"==b){c=$(".login-content.password-login .phone-num").text().replace(/\+/,"").trim();var g=$(".login-content .password-login .password .login-password:visible").val().trim();return d=$(".login-content .password-login .telphone").val().trim(),s.testPhone(d)||86!=c?(o("ppLogin",d,c,"","",g),void iask_web.track_event("NE002","normalClick","click",{domID:"login",domName:"登录页登录按钮"})):void f("password-login",!0,"手机号错误")}}),$(document).on("click",".qr-refresh",function(a){g("","",!0)}),$(document).on("click",".login-content .getVerificationCode",function(a){var b=$(this).attr("data-authenticationCodeType"),c=$(".login-content .verificationCode-login .input-mobile .telphone").val(),d=$(".login-content .verificationCode-login .phone-num").text().replace(/\+/,"").trim();
if("86"==d){if(!s.testPhone(c))return void f("verificationCode-login",!0,"手机号错误");f("verificationCode-login",!1,""),(0==b||2==b)&&(y=4,n(),iask_web.track_event("NE002","normalClick","click",{domID:"getValidateCode",domName:"登录页获取验证码"}))}else(0==b||2==b)&&(y=4,n(),iask_web.track_event("NE002","normalClick","click",{domID:"getValidateCode",domName:"登录页获取验证码"}))}),$(document).on("input",".login-content .verificationCode-login .telphone",function(a){x=$(this).val();var b=$(".login-content .verificationCode-login .verification-code").val(),c=$(".login-content .verificationCode-login .phone-num").text().replace(/\+/,"").trim();if(x.length>11&&$(".login-content .telphone").val(x.slice(0,11)),"86"==c)if(s.testPhone(x.slice(0,11)))f("verificationCode-login",!1,""),$(".login-content .getVerificationCode").addClass("getVerificationCode-active"),b&&b.length>=4&&($(".login-content .verificationCode-login .login-btn").removeClass("login-btn-disable"),$(".login-content .verificationCode-login .login-btn").addClass("login-btn-active"));else{if(x&&x.length>=11)return void f("verificationCode-login",!0,"手机号错误");$(".login-content .getVerificationCode").removeClass("getVerificationCode-active"),$(".login-content .verificationCode-login .login-btn").removeClass("login-btn-active"),$(".login-content .verificationCode-login .login-btn").addClass("login-btn-disable")}else x?($(".login-content .getVerificationCode").addClass("getVerificationCode-active"),b&&b.length>=4&&($(".login-content .verificationCode-login .login-btn").removeClass("login-btn-disable"),$(".login-content .verificationCode-login .login-btn").addClass("login-btn-active"))):($(".login-contentx .getVerificationCode").removeClass("getVerificationCode-active"),$(".login-content .verificationCode-login .login-btn").removeClass("login-btn-active"),$(".login-content .verificationCode-login .login-btn").addClass("login-btn-disable"))}),$(document).on("input",".login-content .verification-code",function(a){var b=$(".login-content .verificationCode-login .phone-num").text().replace(/\+/,"").trim(),c=$(".login-content .verificationCode-login .telphone").val(),d=$(this).val();d.length>4&&$(".login-content .verification-code").val(d.slice(0,4)),d&&d.length>=4&&f("verificationCode-login",!1,""),"86"==b?d&&d.length>=4&&s.testPhone(c)?($(".login-content .verificationCode-login .login-btn").removeClass("login-btn-disable"),$(".login-content .verificationCode-login .login-btn").addClass("login-btn-active")):($(".login-content .verificationCode-login .login-btn").removeClass("login-btn-active"),$(".login-content .verificationCode-login .login-btn").addClass("login-btn-disable")):d&&d.length>=4&&c?($(".login-content .verificationCode-login .login-btn").removeClass("login-btn-disable"),$(".login-content .verificationCode-login .login-btn").addClass("login-btn-active")):($(".login-content .verificationCode-login .login-btn").removeClass("login-btn-active"),$(".login-content .verificationCode-login .login-btn").addClass("login-btn-disable"))}),$(document).on("input",".login-content .password-login .telphone",function(){var a=$(".login-content .password-login .phone-num").text().replace(/\+/,"").trim();if(x=$(this).val(),x.length>11&&$(".login-content.password-login .telphone").val(x.slice(0,11)),"86"==a)if(s.testPhone(x.slice(0,11))){f("password-login",!1,"");var b=$(".login-content .password-login .password .login-password:visible").val();b&&b.length>=6&&b&&b.length<=8&&($(".login-content .password-login .login-btn").removeClass("login-btn-disable"),$(".login-content .password-login .login-btn").addClass("login-btn-active"))}else{if(x&&x.length>=11)return void f("password-login",!0,"手机号错误");$(".login-content .password-login .login-btn").removeClass("login-btn-active"),$(".login-content .password-login .login-btn").addClass("login-btn-disable")}else x?(f("password-login",!1,""),b&&b.length>=6&&b&&b.length<=8&&($(".login-content .password-login .login-btn").removeClass("login-btn-disable"),$(".login-content .password-login .login-btn").addClass("login-btn-active"))):($(".login-content .password-login .login-btn").removeClass("login-btn-active"),$(".login-content .password-login .login-btn").addClass("login-btn-disable"))}),$(document).on("input",".login-content .password-login .login-password",function(){var a=$(".login-content .password-login .phone-num").text().replace(/\+/,"").trim(),b=$(this).val(),c=$(".login-content .password-login .telphone").val();b&&b.length>0?$(".login-content .password-login .password .eye").show():$(".login-content .password-login .password .close-eye").hide(),b.length>16&&$(".login-content  .password-login .login-password").val(b.slice(0,16)),"86"==a?s.testPhone(c)&&b?($(".login-content .password-login .login-btn").removeClass("login-btn-disable"),$(".login-content .password-login .login-btn").addClass("login-btn-active")):($(".login-content .password-login .login-btn").removeClass("login-btn-active"),$(".login-content .password-login .login-btn").addClass("login-btn-disable")):c&&b?($(".login-content .password-login .login-btn").removeClass("login-btn-disable"),$(".login-content .password-login .login-btn").addClass("login-btn-active")):($(".login-content .password-login .login-btn").removeClass("login-btn-active"),$(".login-content .password-login .login-btn").addClass("login-btn-disable"))}),$(document).on("click",".login-content .password-login .close-eye",function(){var a=$(".login-content .password-login .text-input");a.hide(),$(".login-content .password-login .password-input").val(a.val()),$(".login-content .password-login .password-input").show(),$(".login-content .password-login .password .close-eye").hide(),$(".login-content .password-login .password .eye").show()}),$(document).on("click",".login-content .password-login .eye",function(){var a=$(".login-content .password-login .password-input");a.hide(),$(".login-content .password-login .text-input").val(a.val()),$(".login-content .password-login .text-input").show(),$(".login-content .password-login .password .eye").hide(),$(".login-content .password-login .password .close-eye").show()}),$(document).on("click",".login-dialog .close-btn",function(a){e()}),$(document).on("click",".login-content .phone-choice",function(a){return $(this).addClass("phone-choice-show"),$(".login-content .phone-more").show(),!1}),$(document).on("click",".login-content .phone-more .phone-ele",function(a){var b=$(this).find(".number-con em").text();return $(".login-content .phone-choice .phone-num .add").text("+"+b),$(".login-content.phone-choice").removeClass("phone-choice-show"),$(".login-content.phone-more").hide(),$(".login-content input").val(""),$(".login-content .getVerificationCode").removeClass("getVerificationCode-active"),$(".login-content .login-btn").removeClass("login-btn-active"),$(".login-content .login-btn").addClass("login-btn-disable"),f("verificationCode-login",!1,""),f("password-login",!1,""),!1}),$(document).on("click",".login-content",function(a){$(".login-content .phone-choice").removeClass("phone-choice-show"),$(".login-content .phone-more").hide()}),$(document).on("click",".login-content",function(a){$(".login-content .phone-choice").removeClass("phone-choice-show"),$(".login-content .phone-more").hide()}),window.clientDefineBindThirdUser=m,{loginInit:q}}),define("dist/cmd-lib/jqueryMd5",[],function(a,b,c){!function(a){var b=function(a,b){return a<<b|a>>>32-b},c=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},d=function(a,b,c){return a&b|~a&c},e=function(a,b,c){return a&c|b&~c},f=function(a,b,c){return a^b^c},g=function(a,b,c){return b^(a|~c)},h=function(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)},i=function(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)},j=function(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)},k=function(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)},l=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},m=function(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},n=function(a){a=a.replace(/\x0d\x0a/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b};a.extend({md5:function(a){var b,d,e,f,g,o,p,q,r,s=Array(),t=7,u=12,v=17,w=22,x=5,y=9,z=14,A=20,B=4,C=11,D=16,E=23,F=6,G=10,H=15,I=21;for(a=n(a),s=l(a),o=1732584193,p=4023233417,q=2562383102,r=271733878,b=0;b<s.length;b+=16)d=o,e=p,f=q,g=r,o=h(o,p,q,r,s[b+0],t,3614090360),r=h(r,o,p,q,s[b+1],u,3905402710),q=h(q,r,o,p,s[b+2],v,606105819),p=h(p,q,r,o,s[b+3],w,3250441966),o=h(o,p,q,r,s[b+4],t,4118548399),r=h(r,o,p,q,s[b+5],u,1200080426),q=h(q,r,o,p,s[b+6],v,2821735955),p=h(p,q,r,o,s[b+7],w,4249261313),o=h(o,p,q,r,s[b+8],t,1770035416),r=h(r,o,p,q,s[b+9],u,2336552879),q=h(q,r,o,p,s[b+10],v,4294925233),p=h(p,q,r,o,s[b+11],w,2304563134),o=h(o,p,q,r,s[b+12],t,1804603682),r=h(r,o,p,q,s[b+13],u,4254626195),q=h(q,r,o,p,s[b+14],v,2792965006),p=h(p,q,r,o,s[b+15],w,1236535329),o=i(o,p,q,r,s[b+1],x,4129170786),r=i(r,o,p,q,s[b+6],y,3225465664),q=i(q,r,o,p,s[b+11],z,643717713),p=i(p,q,r,o,s[b+0],A,3921069994),o=i(o,p,q,r,s[b+5],x,3593408605),r=i(r,o,p,q,s[b+10],y,38016083),q=i(q,r,o,p,s[b+15],z,3634488961),p=i(p,q,r,o,s[b+4],A,3889429448),o=i(o,p,q,r,s[b+9],x,568446438),r=i(r,o,p,q,s[b+14],y,3275163606),q=i(q,r,o,p,s[b+3],z,4107603335),p=i(p,q,r,o,s[b+8],A,1163531501),o=i(o,p,q,r,s[b+13],x,2850285829),r=i(r,o,p,q,s[b+2],y,4243563512),q=i(q,r,o,p,s[b+7],z,1735328473),p=i(p,q,r,o,s[b+12],A,2368359562),o=j(o,p,q,r,s[b+5],B,4294588738),r=j(r,o,p,q,s[b+8],C,2272392833),q=j(q,r,o,p,s[b+11],D,1839030562),p=j(p,q,r,o,s[b+14],E,4259657740),o=j(o,p,q,r,s[b+1],B,2763975236),r=j(r,o,p,q,s[b+4],C,1272893353),q=j(q,r,o,p,s[b+7],D,4139469664),p=j(p,q,r,o,s[b+10],E,3200236656),o=j(o,p,q,r,s[b+13],B,681279174),r=j(r,o,p,q,s[b+0],C,3936430074),q=j(q,r,o,p,s[b+3],D,3572445317),p=j(p,q,r,o,s[b+6],E,76029189),o=j(o,p,q,r,s[b+9],B,3654602809),r=j(r,o,p,q,s[b+12],C,3873151461),q=j(q,r,o,p,s[b+15],D,530742520),p=j(p,q,r,o,s[b+2],E,3299628645),o=k(o,p,q,r,s[b+0],F,4096336452),r=k(r,o,p,q,s[b+7],G,1126891415),q=k(q,r,o,p,s[b+14],H,2878612391),p=k(p,q,r,o,s[b+5],I,4237533241),o=k(o,p,q,r,s[b+12],F,1700485571),r=k(r,o,p,q,s[b+3],G,2399980690),q=k(q,r,o,p,s[b+10],H,4293915773),p=k(p,q,r,o,s[b+1],I,2240044497),o=k(o,p,q,r,s[b+8],F,1873313359),r=k(r,o,p,q,s[b+15],G,4264355552),q=k(q,r,o,p,s[b+6],H,2734768916),p=k(p,q,r,o,s[b+13],I,1309151649),o=k(o,p,q,r,s[b+4],F,4149444226),r=k(r,o,p,q,s[b+11],G,3174756917),q=k(q,r,o,p,s[b+2],H,718787259),p=k(p,q,r,o,s[b+9],I,3951481745),o=c(o,d),p=c(p,e),q=c(q,f),r=c(r,g);var J=m(o)+m(p)+m(q)+m(r);return J.toLowerCase()}})}(jQuery)}),define("dist/common/bindphone",["dist/application/api","dist/application/urlConfig","dist/application/method"],function(a,b,c){function d(a){var b=a.replace(/\D/g,"").substring(0,11),c=b.length;return c>3&&8>c?b=b.replace(/^(...)/g,"$1 "):c>=8&&(b=b.replace(/^(...)(....)/g,"$1 $2 ")),b}function e(a){if("1"==a){var b=$("#mobile").val();$(".carding-error").hide(),b?($("#mobile").val(d(b)),$(".btn-binding-code").removeClass("btn-code-no")):$(".btn-binding-code").addClass("btn-code-no")}}var f=a("dist/application/api"),g=a("dist/application/method");$(function(){var a=$(".phone-choice"),b=($("#ip-page-type").val(),$("#ip-checkCode")),c=$("#mobile"),d=($(".login-input-item.img-code-item"),$(".carding-error span"));a.find(".phone-num").click(function(a){a.stopPropagation(),$(this).siblings(".phone-more").is(":hidden")?($(this).parent().addClass("phone-choice-show"),$(this).siblings(".phone-more").show()):($(this).parent().removeClass("phone-choice-show"),$(this).siblings(".phone-more").hide())}),$(".phone-more").find("a").click(function(){var b=$(this).find(".number-con").find("em").text();a.find(".phone-num").find("em").text(b),a.removeClass("phone-choice-show"),a.find(".phone-more").hide()}),$(document).on("keyup","#mobile",function(){e(1)}),$(document).keyup(function(a){13==a.keyCode&&$(".btn-phone-login").trigger("click")}),$(".btn-bind").click(function(){function a(a,b,c){$.ajax({headers:{Authrization:g.getCookie("cuk")},url:f.user.userBindMobile,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({terminal:"pc",mobile:a,nationCode:$(".phone-choice .phone-num em").text(),smsId:b,checkCode:c}),dataType:"json",success:function(a){"0"==a.code?($(".binging-main").hide(),$(".binging-success").show()):(d.text(a.message).parent().show(),$(".carding-error").show())},error:function(a){console.log("userBindMobile:",a)}})}if(!$(this).hasClass("btn-code-no")){var e=c.val().replace(/\s/g,""),h=b.val(),i=$(".phone-num em").text();if(/^\s*$/g.test(e))return void d.text("请输入手机号码!").parent().show();if(/^\s*$/g.test(h))return void d.text("请输入验证码!").parent().show();({nationCode:i,mobile:e,smsId:b.attr("smsId"),checkCode:h});a(e,b.attr("smsId"),h)}});var h=function(a,e,g,j){var k=$(".binging-main .yz-link");if(!$(k).hasClass("btn-code-no")){var l=c.val().replace(/\s/g,"");if(/^\s*$/g.test(l))return void d.text("请输入手机号码!").parent().show();d.parent().hide();var m=JSON.stringify({mobile:l,nationCode:$(".phone-choice .phone-num em").text(),businessCode:$(k).siblings('input[name="businessCode"]').val(),terminal:"pc",appId:a,randstr:e,ticket:g,onOff:j});$.ajax({type:"POST",url:f.user.sendSms,contentType:"application/json;charset=utf-8",dataType:"json",data:m,success:function(a){if(a)if("0"==a.code){b.removeAttr("smsId"),b.attr("smsId",a.data.smsId);var c=$(k).siblings(".yz-time");c.addClass("btn-code-no"),c.show(),$(k).hide(),$(".btn-none-bind").hide(),$(".btn-bind").show(),function e(){var a=c.text().replace(/秒后重发$/g,"");return a=/^\d+$/g.test(a)?Number(a):60,a&&a>=0&&c.text(--a+"秒后重发"),0>=a?(c.text("60秒后重发").hide(),void $(k).text("重获验证码").show()):void setTimeout(e,1e3)}()}else"411015"==a.code?i(h):"411033"==a.code?d.text("图形验证码错误").parent().show():d.text(a.message).parent().show();else d.text("发送短信失败").parent().show()}})}};$(".binging-main").delegate(".yz-link","click",function(){h("","","","")})});var h,i=function(a){var b="2071307690";h||(h=new TencentCaptcha(b,j,{bizState:a})),h.show()},j=function(a){0===a.ret&&a.bizState(a.appid,a.randstr,a.ticket,1)};return{showCaptcha:i}}),define("dist/cmd-lib/myDialog",[],function(a,b,c){!function(a){a.extend(a.fn,{dialog:function(b){return this.each(function(){var c=a.data(this,"diglog");c||(c=new a.dialog(b,this),a.data(this,"dialog",c))})}});var b={zIndex:1e3,getZindex:function(){return this.zIndex+=100},dialog:{}};a.dialog=function(a,b){arguments.length&&this._init(a,b)},a.dialog.prototype={options:{title:"title",dragable:!1,cache:!0,html:"",width:"auto",height:"auto",cannelBtn:!0,confirmlBtn:!0,cannelText:"关闭",confirmText:"确定",showFooter:!0,onClose:!1,onOpen:!1,callback:!1,showLoading:!1,loadingTxt:"处理中...",onConfirm:!1,onCannel:!1,getContent:!1,zIndex:b.zIndex,closeOnClickModal:!0,getZindex:function(){return b.zIndex+=100},mask_tpl:'<div class="dialog-mask" data-page="mask" style="z-index:'+b.zIndex+';"></div>'},_init:function(b,c){this.options=a.extend(!0,this.options,b),this.element=a(c),this._build(this.options.html),this._bindEvents()},_build:function(b){var c,d="",e="",f="",g='<div class="body-content"></div>';if(b)c=b;else{if(this.options.confirmlBtn&&(e='<button class="confirm">'+this.options.confirmText+"</button>"),this.options.cannelBtn&&(f='<button class="cannel">'+this.options.cannelText+"</button>"),this.options.showFooter&&(d='<div class="footer">                                    <div class="buttons">                                        '+e+"                                        "+f+"                                    </div>                                </div>"),this.options.showFooter){var h=this.options.height-80+"px";g='<div class="body-content" style="height:'+h+';"></div>'}else g='<div class="body-content" style="height:'+this.options.height+';"></div>';c='<div class="m-dialog" style="z-index:'+this.options.getZindex+';">								<div class="m-d-header">									<h2 style="width:'+this.options.width+';">'+this.options.title+'</h2>									<a href="javascript:;" class="btn-close">X</a>								</div>								<div class="m-d-body" style="width:'+this.options.width+";height:"+this.options.height+';">									'+g+"                                </div>"+d+"</div>"}a(document).find('[data-page="mask"]').length||a("body").append(this.options.mask_tpl),this.element.html(c)},_center:function(){var b=this.element.find(".dialog");b.css({left:(a(document).width()-b.width())/2,top:(document.documentElement.clientHeight-b.height())/2+a(document).scrollTop()})},_bindEvents:function(){var b=this;this.element.delegate(".close,.cancel","click",function(a){a&&a.preventDefault(),b.close(b.options.onClose)}),a(document).delegate('[data-page="mask"]',"click",function(a){b.options.closeOnClickModal&&(a&&a.preventDefault(),b.close(b.options.onClose))}),this.element.delegate(".cannel","click",function(a){a&&a.preventDefault(),b._cannel(b.options.onCannel)}),this.element.delegate(".confirm","click",function(c){c&&c.preventDefault(),a(this).hasClass("disable")||(b.options.showLoading&&(a(this).addClass("disable"),a(this).html(b.options.loadingTxt)),b._confirm(b.options.onConfirm))})},close:function(a){this._hide(a),this.clearCache()},open:function(b){this._callback(b),this.element.show(),a('[data-page="mask"]').show(),this.clearCache()},_hide:function(b){this.element.hide(),a('[data-page="mask"]').hide(),b&&"function"==typeof b&&this._callback(b)},clearCache:function(){this.options.cache||this.element.data("dialog","")},_callback:function(a){a&&"function"==typeof a&&a.call(this)},_cannel:function(a){this._hide(a),this.clearCache()},_confirm:function(a){return this.options.callback?a():(this._hide(a),void this.clearCache())},getElement:function(){return this.element},_getOptions:function(){return this.options},_setTxt:function(a){return this.element.find(".confirm").html(a)},destroy:function(){var a=this;a.element.remove()}},a.extend(a.fn,{open:function(b){a(this).data("dialog")&&a(this).data("dialog").open(b)},close:function(b){a(this).data("dialog")&&a(this).data("dialog").close(b)},clear:function(){a(this).data("dialog")&&a(this).data("dialog").clearCache()},getOptions:function(){return a(this).data("dialog")&&a(this).data("dialog")._getOptions()},getEl:function(){return a(this).data("dialog")&&a(this).data("dialog").getElement()},setTxt:function(b){a(this).data("dialog")&&a(this).data("dialog")._setTxt(b)},destroy:function(){a(this).data("dialog")&&a(this).data("dialog").destroy(t)}})}(jQuery)}),define("dist/application/iframe/iframe-messenger",["dist/application/iframe/messenger"],function(a){function b(a){this.clientId=a.clientId,this.ssoId=a.ssoId,this.messenger=new c(a.clientId,a.projectName)}var c=a("dist/application/iframe/messenger");return b.prototype.addTarget=function(a){this.messenger.addTarget(a.contentWindow,this.ssoId)},b.prototype.listen=function(a){var b=this;this.messenger.listen(function(c){c&&(c=JSON.parse(c),c.id===b.ssoId&&"function"==typeof a&&a(c))})},b.prototype.send=function(a){var b=this;b.messenger.targets[b.ssoId].send(JSON.stringify({id:b.clientId,data:a}))},b}),define("dist/application/iframe/messenger",[],function(){function a(a,b,c){var d="";if(arguments.length<2?d="target error - target and name are both required":"object"!=typeof a?d="target error - target itself must be window object":"string"!=typeof b&&(d="target error - target name must be string type"),d)throw new Error(d);this.target=a,this.name=b,this.prefix=c}function b(a,b){this.targets={},this.name=a,this.listenFunc=[],this.prefix=b||c,this.initListen()}var c="[PROJECT_NAME]",d="postMessage"in window;return d?a.prototype.send=function(a){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+a,"*")}:a.prototype.send=function(a){var b=window.navigator[this.prefix+this.name];if("function"!=typeof b)throw new Error("target callback function is not defined");b(this.prefix+a,window)},b.prototype.addTarget=function(b,c){var d=new a(b,c,this.prefix);this.targets[c]=d},b.prototype.initListen=function(){var a=this,b=function(b){if("object"==typeof b&&b.data&&(b=b.data),"string"==typeof b)for(var c=b.split("__Messenger__"),b=c[1],d=c[0].split("|"),e=d[0],f=d[1],g=0;g<a.listenFunc.length;g++)e+f===a.prefix+a.name&&a.listenFunc[g](b)};d?"addEventListener"in document?window.addEventListener("message",b,!1):"attachEvent"in document&&window.attachEvent("onmessage",b):window.navigator[this.prefix+this.name]=b},b.prototype.listen=function(a){for(var b=0,c=this.listenFunc.length,d=!1;c>b;b++)if(this.listenFunc[b]==a){d=!0;break}d||this.listenFunc.push(a)},b.prototype.clear=function(){this.listenFunc=[]},b.prototype.send=function(a){var b,c=this.targets;for(b in c)c.hasOwnProperty(b)&&c[b].send(a)},b});var _hmt=_hmt||[];define("dist/common/baidu-statistics",["dist/application/method"],function(a,b,c){function d(a){if(a){_hmt.push(["_setAccount",a]);for(var b in _hmt.cmd){if(b==a)return;try{!function(){var b=document.createElement("script");b.src="https://hm.baidu.com/hm.js?"+a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}()}catch(c){console.error(a,c)}}}}function e(a,b){var c=h[a];"fileDetailPageView"==a&&(b=c),"payFileResult"==a&&(b=$.extend(c,{payresult:b.payresult,orderid:b.orderNo,orderpaytype:b.orderpaytype})),_hmt.push(["_trackCustomEvent",a,b]),console.log("百度统计:",a,b)}var f=a("dist/application/method"),g=window.pageConfig&&window.pageConfig.params,h={fileDetailPageView:{loginstatus:f.getCookie("cuk")?1:0,userid:window.pageConfig&&window.pageConfig.userId||"",pageid:"PC-M-FD",fileid:g&&g.g_fileId,filecategoryname:g&&g.classidName1+"||"+g&&g.classidName2+"||"+g&&g.classidName3,filepaytype:g&&g.productType||"",filecootype:"",fileformat:g&&g.file_format||""},payFileResult:{loginstatus:f.getCookie("cuk")?1:0,userid:window.pageConfig&&window.pageConfig.userId||"",pageid:"PC-M-FD",pagename:"",payresult:"",orderid:"",orderpaytype:"",orderpayprice:"",fileid:"",filename:"",fileprice:"",filecategoryname:"",fileformat:"",filecootype:"",fileuploaderid:""},payVipResult:{loginstatus:f.getCookie("cuk")?1:0,userid:"",pageid:"PC-M-FD",pagename:"",payresult:"",orderid:"",orderpaytype:"",orderpayprice:"",fileid:"",filename:"",fileprice:"",filecategoryname:"",fileformat:"",filecootype:"",fileuploaderid:""},loginResult:{pagename:$("#ip-page-id").val(),pageid:$("#ip-page-name").val(),loginType:"",userid:"",loginResult:""}};return{initBaiduStatistics:d,handleBaiduStatisticsPush:e}}),define("dist/common/loginType",[],function(a,b,c){return{wechat:"微信",qq:"QQ",weibo:"微博",phoneCode:"验证码",phonePw:"密码"}}),define("dist/common/associateWords",[],function(a,b,c){var d={searchList:[],init:function(){$("#search-detail-input").keyup(function(){var a=this.value;a?$.ajax({url:"http://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd="+a,type:"GET",dataType:"jsonp",jsonp:"cb",jsonpCallback:"soso",success:function(a){$(".lately-list li").remove(),d.searchList=a.s;for(var b="",c=0,e=d.searchList.length;e>c;c++){var f=d.searchList[c];b+='<li><a href ="/search/home.html?ft=all&cond='+encodeURIComponent(encodeURIComponent(f))+'" target="_blank">'+f+"</a></li>",$(".lately-list").html(b)}}}):(d.searchList=[],$(".lately-list").html(""))}),$("#search-detail-input").focus(function(){$(this).hasClass("input-focus")||$(this).addClass("input-focus"),$(".detail-lately").css({display:"block"})}),$("#search-detail-input").blur(function(){var a=$(this);setTimeout(function(){a.hasClass("input-focus")&&a.removeClass("input-focus"),$(".detail-lately").css({display:"none"})},200)})}};return d}),define("dist/authentication/template/bindPhone.html",[],'<!-- \n    name：提示绑定手机号\n    author：limeng\n    date：2020-11-04\n    descroiption: A14需求新增\n -->\n<!-- 提示去绑定手机号 -->\n\n<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h4>绑定手机号</h4>\n        </div>\n        <div class="modal-body">\n            <p>当前账号还未绑定手机号，绑定后才可进行认证</p>\n        </div>\n        <div class="modal-footer">\n            <a class="btn btn-normal" href="/node/auth/index.html">取消</a>\n            <a class="btn btn-color" href="/node/personalCenter/accountsecurity.html?type=accountsecurity">去绑定</a>\n        </div>\n    </div>\n</div>\n<div class="modal-backdrop"></div>'),define("dist/authentication/template/audit.html",[],'<!-- \n    name：认证信息提交成功\n    author：limeng\n    date：2020-11-04\n    descroiption: A14需求新增\n -->\n<!-- 认证信息提交成功 -->\n\n<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <a class="modal-close"></a>\n            <h4>\n                <span class="img-icon icon-success"></span>认证信息提交成功\n            </h4>\n        </div>\n        <div class="modal-body">\n            <div class="wechat-qrcode"></div>\n            <div class="body-text">\n                <p>微信扫码关注公众号</p>\n                <p>或添加<a>QQ3463748482</a></p>\n                <p>了解审核结果</p>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <a class="btn btn-color" href="/node/auth/index.html">我知道了</a>\n        </div>\n    </div>\n</div>\n<div class="modal-backdrop"></div>'),define("dist/authentication/template/success.html",[],'<!-- \n    name：认证成功\n    author：limeng\n    date：2020-11-04\n    descroiption: A14需求新增\n -->\n<!-- 认证成功 -->\n\n<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <a class="modal-close"></a>\n            <h4><span class="img-icon icon-success"></span>你已完成个人认证</h4>\n        </div>\n        <div class="modal-body">\n            <p>现在开始上传资料赚取收益吧~</p>\n        </div>\n        <div class="modal-footer">\n            <a class="btn btn-color" href="/node/upload.html">确定</a>\n        </div>\n    </div>\n</div>\n<div class="modal-backdrop"></div>'),define("dist/authentication/template/error.html",[],'<!-- \n    name：认证审核不通过\n    author：limeng\n    date：2020-11-04\n    descroiption: A14需求新增\n -->\n<!-- 认证审核不通过 -->\n\n<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <a class="modal-close"></a>\n            <h4>\n                <span class="img-icon icon-error"></span>很遗憾，认证审核不通过\n            </h4>\n        </div>\n        <div class="modal-body">\n            <div class="wechat-qrcode"></div>\n            <div class="body-text">\n                <p>微信扫码关注公众号</p>\n                <p>或添加<a>QQ3463748482</a></p>\n                <p>了解审核结果</p>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <a class="btn btn-color" onclick="$(this).parents(\'#authentication-box\').html(\'\').hide();">我知道了</a>\n        </div>\n    </div>\n</div>\n<div class="modal-backdrop"></div>');
//# sourceMappingURL=dist/js-source-map/ishare-web-pc.js.map