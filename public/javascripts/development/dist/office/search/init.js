/*! ishare_pc_website
*author:Jersey */
define("dist/office/search/init",["../common/suspension","../../application/method","../../application/checkLogin","../../application/api","../../application/app","../../application/element","../../application/template","../../application/extend","../../common/bilog","base64","../../cmd-lib/util","../../report/config","../../application/effect","../../application/helper","//static3.iask.cn/resource/js/plugins/pc.iask.login.min","../../common/gioPageSet"],function(a,b,c){function d(a,b){i.post(k.normalFileDetail.collect,function(c){if(0==c.code){var d=b.next(".office-collect-info"),e=d.length>0?d:b.closest(".data-text-con").siblings(".data-pic").find(".office-collect-info"),f=b.closest("li").find("#enshrineNum");3===a?(e.show().find("p").text("收藏成功"),b.closest("li").find(".first-collect .btn-pic-xx").addClass("btn-pic-xx-ok"),b.closest("li").find(".second-collect .btn-xx").addClass("btn-xx-ok"),setTimeout(function(){e.hide()},2500),f.text(parseInt(f.text())+1)):(e.show().find("p").text("取消收藏"),b.closest("li").find(".first-collect .btn-pic-xx").removeClass("btn-pic-xx-ok"),b.closest("li").find(".second-collect .btn-xx").removeClass("btn-xx-ok"),setTimeout(function(){e.hide()},2500),parseInt(f.text())>0&&f.text(parseInt(f.text())-1))}},"","post",{fid:b.attr("data-id"),cond:a,flag:"y"})}function e(a){var b=encodeURIComponent(encodeURIComponent(m.val())),c=$(".office-list-nav a.nav-ele.current").attr("data-order"),d=location.pathname;if(d.indexOf("node/office/search")>0){var e=$(".screen-list-search span.active").attr("data-type");window.location="/node/office/search.html?cond="+b+"&page="+a+"&fileType="+e+"&order="+c}else{var f=d.split("-");if(f.length>1){var g=/c\/(\S*)\./,h=d.match(g);if(h&&h.length>0){var i="/c/"+p.cid+"_"+a+"-"+p.order;p.specifics&&(i+="-"+p.specifics.replace(/,/g,"-")),i+=".html",location.href=i}}else{var j=location.pathname.split(".html");location.href=j[0]+"_"+a+"-"+c+".html"}}}function f(){var a=decodeURIComponent(decodeURIComponent(i.getParam("cond")));a&&l.gioPageSet({searchContent_pvar:a,officeChannel_pvar:"office",pageType_pvar:location.pathname.indexOf("node/office/search")>0?"officeSearch":"officeClassify"})}function g(){var a=$(".office-page-paging"),b=a.find(".btn-page-long"),c=a.find(".btn-page"),d=a.find(".page-ele"),f=d.length-1,g=i.getParam("page")||p.page,h=g-1;h=h>0?h:0,h>0&&(b.eq(0).show(),c.eq(0).show()),0!==h&&h!==f&&(d.eq(h-2).show(),d.eq(h-1).show(),d.eq(h).show(),d.eq(h+1).show(),d.eq(h+2).show(),h-2>0?d.eq(h-2).before('<span class="page-point">...</span>'):null,f-1>h+2?d.eq(h+2).after('<span class="page-point">...</span>'):null),0===h&&(b.eq(0).hide(),c.eq(0).hide(),d.eq(1).show(),d.eq(2).show(),d.eq(3).show(),d.eq(4).show(),d.eq(4).after('<span class="page-point">...</span>')),h===f&&(b.eq(1).hide(),c.eq(1).hide(),d.eq(f-4).show(),d.eq(f-3).show(),d.eq(f-2).show(),d.eq(f-1).show(),d.eq(f-4).before('<span class="page-point">...</span>')),h>0&&f>h&&(b.show(),c.show()),d.eq(0).show(),d.eq(f).show(),d.click(function(){n=$(this).attr("value"),e(n)}),b.eq(0).click(function(){n=1,e(n)}),b.eq(1).click(function(){g?f+1>=h+1&&(n=h+2,e(n)):(n=2,e(n))}),c.eq(0).click(function(){n=h,e(n)}),c.eq(1).click(function(){n=f+1,e(n)})}var h=a("../common/suspension"),i=(a("../../application/app"),a("../../application/method")),j=a("../../application/checkLogin"),k=a("../../application/api");a("../../common/bilog");var l=a("../../common/gioPageSet"),m=$(".search-input"),n=1,o="all",p=window.pageConfig.reqParams;g(),f(),$(".btn-pic-xx,.btn-collect").on("click",function(a){a.stopPropagation(),a.preventDefault(),i.getCookie("cuk")||j.notifyLoginInterface(function(a){h.afterLogin(a)});var b=$(this);b.hasClass("btn-pic-xx-ok")||b.hasClass("btn-xx-ok")?d(4,b):d(3,b)}),$(".office-list-nav a").on("click",function(){var a=location.pathname;o=$(this).attr("data-order");var b=$(".office-list-nav a.nav-ele.current").attr("data-order");if(a.indexOf("node/office/search")>0){var c=$.trim(m.val()||"");if(c){var d=$(".screen-list-search span.active").attr("data-type");i.compatibleIESkip("/node/office/search.html?cond="+encodeURIComponent(encodeURIComponent(c))+"&fileType="+d+"&order="+o,!1)}}else{var e=a.split("-");if(e.length>1)i.compatibleIESkip(a.replace(b,o).replace("_"+p.page,"_1"),!1);else{var f=a.split(".html");i.compatibleIESkip(f[0]+"_"+p.page+"-"+o+".html",!1)}}}),$(".association-list li a").on("click",function(){o=$(".office-list-nav a.nav-ele.current").attr("data-order");var a=encodeURIComponent(encodeURIComponent($(this).text())),b=p.cid,c=p.page,d=p.fileType;window.location.href=location.pathname+"?cid="+b+"&page="+c+"&order="+o+"&cond="+a+"&fileType="+d}),$(".screen-list-search span").on("click",function(){var a=$.trim(m.val()||"");if(a){var b=$(this).attr("data-type"),c=$(".office-list-nav a.nav-ele.current").attr("data-order");window.location="/node/office/search.html?cond="+encodeURIComponent(encodeURIComponent(a))+"&fileType="+b+"&order="+c}}),$(".btn-goods").on("click",function(a){a.stopPropagation(),a.preventDefault();var b=$(this),c=b.attr("data-isZan");if(c)return!1;var d=b.text(),e=d?parseInt(d)+1:d;b.addClass("btn-goods-ok").find("#num").text(e),b.attr("data-isZan",!0)}),$(".none-btn").on("click",function(){var a=encodeURIComponent(encodeURIComponent($(this).attr("data-cond")));window.location.href="/search/home.html?ft=all&cond="+a})}),define("dist/office/common/suspension",["dist/application/method","dist/application/checkLogin","dist/application/api","dist/application/app","dist/application/element","dist/application/template","dist/application/extend","dist/common/bilog","base64","dist/cmd-lib/util","dist/report/config","dist/application/effect","dist/application/helper","//static3.iask.cn/resource/js/plugins/pc.iask.login.min"],function(a,b,c){function d(){var a=$(".search-input");$(".btn-search").on("click",function(){var b=$.trim(a.val()||"");b&&(b=encodeURIComponent(encodeURIComponent(b)),window.location.href="/node/office/search.html?cond="+b)}),a.keydown(function(b){if(13===b.keyCode){var c=$.trim(a.val()||"");c&&(window.location="/node/office/search.html?cond="+encodeURIComponent(encodeURIComponent(c)))}})}function e(){function a(a,b){b=b||0,a&&1===b?n.getCookie("cuk")?(h(b),e.animate({right:"61px"},500)):o.notifyLoginInterface(function(a){f(a),g(e,b,a)}):e.animate({right:"-307px"},200),a&&0===b?n.getCookie("cuk")?window.open("/node/rights/vip.html","target"):o.notifyLoginInterface(function(a){f(a),g(null,b,a),window.open("/node/rights/vip.html","target")}):1===b?($(".mui-user-wrap").css("visibility","hidden"),$(".mui-sel-wrap").css("visibility","visible"),$(".mui-collect-wrap").css("visibility","hidden")):2===b?($(".mui-user-wrap").css("visibility","hidden"),$(".mui-sel-wrap").css("visibility","hidden"),$(".mui-collect-wrap").css("visibility","visible")):(4===b||6===b)&&e.animate({right:"-307px"},200)}function b(a){var b=$(window).height();b>=920?d.removeClass("fixed-min-height"):d.addClass("fixed-min-height")}var c=$(".fixed-op").find(".J_menu"),d=$(".fixed-right-full"),e=d.find(".fixed-detail-wrap");$(".btn-detail-back").on("click",function(){a(!1),c.removeClass("active")}),$(document).on("click",function(){a(!1),c.removeClass("active")}),$(".op-menu-wrap").click(function(a){a.stopPropagation()}),c.on("click",function(){var b=$(this).index();$(this).hasClass("active")?($(this).removeClass("active"),a(!1)):($(this).addClass("active").siblings().removeClass("active"),a(!0,b))}),$(window).bind("resize ready",b)}function f(a){q.removeClass("hide"),r.addClass("hide"),$(".user-pic").attr("src",a.photoPicURL),$(".user-name").html(a.nickName)}function g(a,b,c){if($(".user-avatar img").attr("src",c.photoPicURL),$(".name-wrap .name-text").html(c.nickName),"1"===c.isVip){var d="您的VIP将于"+c.expireTime+"到期,剩余"+c.privilege+"次下载特权";$(".mui-user-wrap").addClass("mui-user-vip-wrap"),$(".detail-right-normal-wel").html(d),$(".detail-right-vip-wel").html("会员尊享权益"),s.html("续费VIP"),$("#memProfit").html("会员权益")}else $(".mui-privilege-list li").removeClass("hide");h(b),a&&a.animate({right:"61px"},500)}function h(a){1===a?i():2===a&&j()}function i(){var a=n.keyMap.ishare_office_detail_access,b=n.getLocalData(a),c=$("#seenRecord"),d=[];if(b&&b.length){b=b.slice(0,20);for(var e=0;e<b.length;e++){var f=b[e],g='<li><i class="ico-data ico-'+f.format+'"></i><a target="_blank" href="/f/'+f.fileId+'.html">'+f.title+"</a></li>";d.push(g)}c.html(d.join(""))}else c.hide().siblings(".mui-data-null").show()}function j(){var a={pageNum:1,pageSize:20};$.ajax(p.user.collect,{type:"get",async:!1,data:a,dataType:"json"}).done(function(a){0==a.code&&k(a.data)}).fail(function(a){console.log("error==="+a)})}function k(a){var b=$("#myCollect"),c=[];if(a&&a.length){for(var d=a.slice(0,20),e=0;e<d.length;e++){var f=d[e],g='<li><i class="ico-data ico-'+f.format+'"></i><a target="_blank" href="/f/'+f.fileId+'.html">'+f.name+"</a></li>";c.push(g)}b.html(c.join("")),a.length>20&&b.siblings(".btn-mui-fix").removeClass("hide")}else b.siblings(".mui-data-null").removeClass("hide")}function l(a){f(a),g(null,0,a)}function m(a){try{window.pageConfig.params.isVip=a.isVip,$("#ip-uid").val(a.userId),$("#ip-isVip").val(a.isVip),$("#ip-mobile").val(a.mobile)}catch(b){console.error("flash error")}}var n=a("dist/application/method"),o=a("dist/application/checkLogin"),p=(a("dist/application/app"),a("dist/application/api")),q=$(".hasLogin"),r=$(".notLogin"),s=$(".btn-mui"),t=document.location.pathname;-1==t.indexOf("/pay/")&&n.getCookie("cuk")&&o.getLoginData(function(a){l(a)}),e(),d(),$(".op-feedback").on("click",function(){var a=window.location.href;n.compatibleIESkip("/feedAndComp/userFeedback?url="+encodeURIComponent(a),!0)}),$("#go-back-top").on("click",function(){$("body,html").animate({scrollTop:0},200)}),$(".btn-mui-contact").on("click",function(){_MEIQIA("init")}),r.on("click",function(a,b){n.getCookie("cuk")||o.notifyLoginInterface(function(a){l(a),b&&m(a)})}),$(".loginOut").on("click",function(){o.ishareLogout()});try{!function(a,b,c,d,e,f,g){a[d]=a[d]||function(){(a[d].a=a[d].a||[]).push(arguments)},f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=!0,f.charset="UTF-8",f.src="//static.meiqia.com/dist/meiqia.js?_=t",g.parentNode.insertBefore(f,g)}(window,document,"script","_MEIQIA"),_MEIQIA("entId","149498"),_MEIQIA("allSet",function(){_MEIQIA("showPanel")}),_MEIQIA("manualInit")}catch(u){}return{afterLogin:l,pageHeaderInfo:f,flash:m}}),define("dist/application/method",[],function(require,exports,module){return{keyMap:{ishare_detail_access:"ISHARE_DETAIL_ACCESS",ishare_office_detail_access:"ISHARE_OFFICE_DETAIL_ACCESS"},async:function(a,b,c,d,e){$.ajax(a,{type:d||"post",data:e,async:!1,dataType:"json",headers:{"cache-control":"no-cache",Pragma:"no-cache"}}).done(function(a){b&&b(a)}).fail(function(a){console.log("error==="+c)})},get:function(a,b,c){$.ajaxSetup({cache:!1}),this.async(a,b,c,"get")},post:function(a,b,c,d,e){this.async(a,b,c,d,e)},postd:function(a,b,c){this.async(a,b,!1,!1,c)},random:function(a,b){return Math.floor(Math.random()*(b-a))+a},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},setCookieWithExp:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),d?document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString():document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},delCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1);var e=this.getCookie(a);null!=e&&(b&&c?document.cookie=a+"= '' ;domain="+c+";expires="+d.toGMTString()+";path="+b:b?document.cookie=a+"= '' ;expires="+d.toGMTString()+";path="+b:document.cookie=a+"="+e+";expires="+d.toGMTString())},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},url2Obj:function(a){for(var b={},c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b},getParam:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},getLocalData:function(a){try{if(localStorage&&localStorage.getItem){var b=localStorage.getItem(a);return null===b?null:JSON.parse(b)}return console.log("浏览器不支持html localStorage getItem"),null}catch(c){return null}},setLocalData:function(a,b){localStorage&&localStorage.setItem?(localStorage.removeItem(a),localStorage.setItem(a,JSON.stringify(b))):console.log("浏览器不支持html localStorage setItem")},browserType:function(){var a=navigator.userAgent,b=a.indexOf("Opera")>-1;return b?"Opera":a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b?"IE":a.indexOf("Edge")>-1?"Edge":a.indexOf("Firefox")>-1?"Firefox":a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome")?"Safari":a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1?"Chrome":void 0},validateIE9:function(){return!(!$.browser.msie||"9.0"!==$.browser.version&&"8.0"!==$.browser.version&&"7.0"!==$.browser.version&&"6.0"!==$.browser.version)},compareTime:function(a,b){return a&&b?Math.abs((b-a)/1e3/60/60/24):""},changeURLPar:function(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText)}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},getUrlAllParams:function(a){if("undefined"==typeof a)var b=decodeURI(location.search);else var b="?"+a.split("?")[1];var c=new Object;if(-1!=b.indexOf("?"))for(var d=b.substr(1),e=d.split("&"),f=0;f<e.length;f++)c[e[f].split("=")[0]]=decodeURI(e[f].split("=")[1]);return c},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null},compatibleIESkip:function(a,b){var c=document.createElement("a");c.href=a,c.style.display="none",b&&(c.target="_blank"),document.body.appendChild(c),c.click()},testEmail:function(a){var b=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return b.test(a)?!0:!1},testPhone:function(a){return/^1(3|4|5|7|8)\d{9}$/.test(a)?!0:!1},handleRecommendData:function(a){var b=[];return $(a).each(function(a,c){var d={};1==c.type&&(c.linkUrl="/f/"+c.tprId+".html",d=c),2==c.type&&(d=c),3==c.type&&(c.linkUrl="/node/s/"+c.tprId+".html",d=c),b.push(d)}),console.log(b),b},formatDate:function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},getReferrer:function(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)&&(b="sm"),b},judgeSource:function(a){a||(a={}),a.searchEngine="";var b="";if(b=utils.getQueryVariable("from"),b||(b=sessionStorage.getItem("webWxFrom")||utils.getCookie("webWxFrom")),b)a.source=b,sessionStorage.setItem("webWxFrom",b),sessionStorage.removeItem("webReferrer");else{var c=sessionStorage.getItem("webReferrer")||utils.getCookie("webReferrer");if(c||(c=document.referrer),c){sessionStorage.setItem("webReferrer",c),sessionStorage.removeItem("webWxFrom"),c=c.toLowerCase();for(var d=new Array("google.","baidu.","360.","sogou.","shenma.","bing."),e=new Array("google","baidu","360","sogou","shenma","bing"),f=0,g=d.length;g>f;f++)c.indexOf(d[f])>=0&&(a.source="searchEngine",a.searchEngine=e[f])}c&&a.source||(utils.isWeChatBrow()?a.source="wechat":a.source="outLink")}return a}}}),define("dist/application/checkLogin",["dist/application/api","dist/application/method"],function(a,b,c){var d=a("dist/application/api"),e=a("dist/application/method"),d=a("dist/application/api");c.exports={getIds:function(){var a=window.pageConfig&&window.pageConfig.params?window.pageConfig.params:null,b=window.pageConfig&&window.pageConfig.access?window.pageConfig.access:null,c=[];a&&(a.classid1&&c.push(a.classid1),a.classid2&&c.push(a.classid2),a.classid3&&c.push(a.classid3));var d=a&&c.length>0?c.join("-"):"",e=b?b.fileId||a.g_fileId||"":"",f=window.pageConfig&&window.pageConfig.classIds?window.pageConfig.classIds:"";return!d&&(d=f),{clsId:d,fid:e}},notifyLoginInterface:function(a){var b=this;if(!e.getCookie("cuk")){var c=window.pageConfig&&window.pageConfig.page?window.pageConfig.page.ptype||"index":"index";$.loginPop("login",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:c,clsId:this.getIds().clsId,fid:this.getIds().fid},function(c){b.getLoginData(a)})}},listenLoginStatus:function(a){var b=this;$.loginPop("login_wx_code",{terminal:"PC",businessSys:"ishare",domain:document.domain,ptype:"ishare",popup:"hidden",clsId:this.getIds().clsId,fid:this.getIds().fid},function(){b.getLoginData(a)})},notifyCheckInterface:function(){e.getCookie("cuk")&&$.loginPop("checkCode",{terminal:"PC",businessSys:"ishare",domain:document.domain,clsId:this.getIds().clsId,fid:this.getIds().fid},function(a){"0"==a.code&&e.get(d.user.getJessionId,function(a){},"")})},syncUserInfoInterface:function(a){var b=this;e.getCookie("cuk")&&e.get(d.user.getJessionId,function(c){0==c.code&&b.getLoginData(a)},"")},getUserData:function(a){e.getCookie("cuk")&&e.get(d.coupon.querySeniority,function(b){b&&0==b.code&&a(b.data)},"")},getLoginData:function(a){var b=this;try{e.get(d.user.login,function(c){if(0==c.code&&c.data){if(a&&"function"==typeof a){a(c.data);try{window.pageConfig.params.isVip=c.data.isVip,window.pageConfig.page.uid=c.data.userId}catch(d){}}try{var f={uid:c.data.userId,isVip:c.data.isVip,tel:c.data.mobile};e.setCookieWithExpPath("ui",JSON.stringify(f),18e5,"/")}catch(g){}}else 40001==c.code&&b.ishareLogout()})}catch(c){console.log(c)}},ishareLogout:function(){e.delCookie("cuk","/",".sina.com.cn"),e.delCookie("cuk","/",".iask.com.cn"),e.delCookie("cuk","/",".iask.com"),e.delCookie("sid","/",".iask.sina.com.cn"),e.delCookie("sid","/",".iask.com.cn"),e.delCookie("sid","/",".sina.com.cn"),e.delCookie("sid","/",".ishare.iask.com.cn"),e.delCookie("sid","/",".office.iask.com"),e.delCookie("sid_ishare","/",".iask.sina.com.cn"),e.delCookie("sid_ishare","/",".iask.com.cn"),e.delCookie("sid_ishare","/",".sina.com.cn"),e.delCookie("sid_ishare","/",".ishare.iask.com.cn"),e.delCookie("_1st_l","/"),e.delCookie("ui","/"),$.get(d.user.loginOut,function(a){console.log("loginOut:",a),0==a.code&&(window.location.href=window.location.href)})}}}),define("dist/application/api",[],function(a,b,c){var d="/gateway/pc",e="/gateway";c.exports={user:{getUserInfo:"/node/api/getUserInfo",login:d+"/usermanage/checkLogin",loginOut:e+"/pc/usermanage/logout",collect:d+"/usermanage/collect",newCollect:e+"/content/collect/getUserFileList",getJessionId:d+"/usermanage/getJessionId",getSessionInfo:d+"/usermanage/getSessionInfo",addFeedback:e+"/feedback/addFeedback",getFeedbackType:e+"/feedback/getFeedbackType",sendSms:e+"/cas/sms/sendSms",queryBindInfo:e+"/cas/user/queryBindInfo",thirdCodelogin:e+"/cas/login/thirdCode",userBindMobile:e+"/cas/user/bindMobile",checkIdentity:e+"/cas/sms/checkIdentity",userBindThird:e+"/cas/user/bindThird",untyingThird:e+"/cas/user/untyingThird",setUpPassword:e+"/cas/user/setUpPassword",getUserCentreInfo:e+"/user/getUserCentreInfo",editUser:e+"/user/editUser",getFileBrowsePage:e+"/content/fileBrowse/getFileBrowsePage",getDownloadRecordList:e+"/content/getDownloadRecordList",getUserFileList:e+"/content/collect/getUserFileList",getMyUploadPage:e+"/content/getMyUploadPage",getOtherUser:e+"/user/getOthersCentreInfo",getSearchList:e+"/search/content/byCondition"},normalFileDetail:{addComment:d+"/fileSync/addComment",reportContent:d+"/fileSync/addFeedback",isStore:d+"/fileSync/getFileCollect",collect:d+"/fileSync/collect",filePreDownLoad:e+"/content/getPreFileDownUrl",fileDownLoad:d+"/action/downloadUrl",getFileDownLoadUrl:e+"/content/getFileDownUrl",appraise:d+"/fileSync/appraise",getPrePageInfo:d+"/fileSync/prePageInfo",hasDownLoad:d+"/fileSync/isDownload"},officeFileDetail:{},search:{byPosition:d+"/operating/byPosition",specialTopic:e+"/search/specialTopic/lisPage"},sms:{getCaptcha:d+"/usermanage/getSmsYzCode",sendCorpusDownloadMail:e+"/content/fileSendEmail/sendCorpusDownloadMail"},pay:{successBuyDownLoad:d+"/action/downloadNow",bindUser:d+"/order/bindUser",scanOrderInfo:e+"/order/scan/orderInfo"},coupon:{rightsSaleVouchers:e+"/rights/sale/vouchers",rightsSaleQueryPersonal:e+"/rights/sale/queryPersonal",querySeniority:e+"/rights/sale/querySeniority",queryUsing:e+"/rights/sale/queryUsing",getMemberPointRecord:e+"/rights/vip/getMemberPointRecord",getBuyRecord:e+"/rights/vip/getBuyRecord"},order:{bindOrderByOrderNo:d+"/order/bindOrderByOrderNo",unloginOrderDown:d+"/order/unloginOrderDown",createOrderInfo:e+"/order/create/orderInfo",rightsVipGetUserMember:e+"/rights/vip/getUserMember",getOrderStatus:e+"/order/get/orderStatus",queryOrderlistByCondition:e+"/order/query/listByCondition",getOrderInfo:e+"/order/get/orderInfo"},getHotSearch:d+"/search/getHotSearch",special:{fileSaveOrupdate:e+"/comment/collect/fileSaveOrupdate",getCollectState:e+"/comment/zc/getUserFileZcState",setCollect:e+"/content/collect/file"},upload:{getCategory:e+"/content/category/getSimplenessInfo",createFolder:e+"/content/saveUserFolder",getFolder:e+"/content/getUserFolders",saveUploadFile:e+"/content/webUploadFile",batchDeleteUserFile:e+"/content/batchDeleteUserFile"},recommend:{recommendConfigInfo:e+"/recommend/config/info",recommendConfigRuleInfo:e+"/recommend/config/ruleInfo"},reportBrowse:{fileBrowseReportBrowse:e+"/content/fileBrowse/reportBrowse"}}}),define("dist/application/app",["dist/application/method","dist/application/element","dist/application/template","dist/application/extend","dist/common/bilog","base64","dist/cmd-lib/util","dist/report/config","dist/application/effect","dist/application/checkLogin","dist/application/api","dist/application/helper","//static3.iask.cn/resource/js/plugins/pc.iask.login.min"],function(a,b,c){var d=a("dist/application/method");a("dist/application/element"),a("dist/application/extend");var e=a("dist/common/bilog");return a("dist/application/effect"),window.template=a("dist/application/template"),a("dist/application/helper"),a("//static3.iask.cn/resource/js/plugins/pc.iask.login.min.js"),window.getCookie=d.getCookie,{method:d,v:"1.0.1",bilog:e}}),define("dist/application/element",["dist/application/method","dist/application/template"],function(a,b,c){a("dist/application/method"),a("dist/application/template");if(window.pageConfig&&window.pageConfig.hotData){JSON.parse(window.pageConfig.hotData)}var d=function(a){var b={ele:a,init:function(){return this.ele[0].addEventListener("click",function(){$("html, body").animate({scrollTop:0},120)},!1),window.addEventListener("scroll",this,!1),this},handleEvent:function(a){var b=$(document).scrollTop();$(window).height();return b>100?this.ele.show():this.ele.hide(),b>10?$(".m-header").addClass("header-fix"):$(".m-header").removeClass("header-fix"),this}};b.init().handleEvent()};$("#backToTop").length&&d&&d($("#backToTop"))}),!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(/^$|,+/)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'console.log(3316)';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(B){throw B.temp="function anonymous($data,$filename) {"+z+"}",B}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||"anonymous",j.name="Syntax Error",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g;e.openTag="{{",e.closeTag="}}";var y=function(a,b){var c=b.split(":"),d=c.shift(),e=c.join(":")||"";return e&&(e=", "+e),"$helpers."+d+"("+a+e+")"};e.parser=function(a,b){a=a.replace(/^\s/,"");var c=a.split(" "),e=c.shift(),f=c.join(" ");switch(e){case"if":a="if("+f+"){";break;case"else":c="if"===c.shift()?" if("+c.join(" ")+")":"",a="}else"+c+"{";break;case"/if":a="}";break;case"each":var g=c[0]||"$data",h=c[1]||"as",i=c[2]||"$value",j=c[3]||"$index",k=i+","+j;"as"!==h&&(g="[]"),a="$each("+g+",function("+k+"){";break;case"/each":a="});";break;case"echo":a="print("+f+");";break;case"print":case"include":a=e+"("+c.join(",")+");";break;default:if(-1!==f.indexOf("|")){var l=b.escape;0===a.indexOf("#")&&(a=a.substr(1),l=!1);for(var m=0,n=a.split("|"),o=n.length,p=l?"$escape":"$string",q=p+"("+n[m++]+")";o>m;m++)q=y(q,n[m]);a="=#"+q}else a=d.helpers[e]?"=#"+e+"("+c.join(",")+");":"="+a}return a},"function"==typeof define?define("dist/application/template",[],function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}(),define("dist/application/extend",[],function(a,b,c){String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")}),String.prototype.stripTags||(String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>/gi,"")}),Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1})}),define("dist/common/bilog",["base64","dist/cmd-lib/util","dist/application/method","dist/report/config"],function(a,b,c){function d(){sessionStorage.setItem("sessionID",C)}function e(a,b){if(!new RegExp("/f/").test(a)||new RegExp("referrer=").test(a)||new RegExp("/f/down").test(a))new RegExp("/pay/payConfirm.html").test(a)?(b.prePageID="PC-M-PAY-F-L",b.prePageName="支付页-付费资料-列表页"):new RegExp("/pay/payQr.html\\?type=2").test(a)?(b.prePageID="PC-M-PAY-F-QR",b.prePageName="支付页-付费资料-支付页"):new RegExp("/pay/vip.html").test(a)?(b.prePageID="PC-M-PAY-VIP-L",b.prePageName="支付页-VIP-套餐列表页"):new RegExp("/pay/payQr.html\\?type=0").test(a)?(b.prePageID="PC-M-PAY-VIP-QR",b.prePageName="支付页-VIP-支付页"):new RegExp("/pay/privilege.html").test(a)?(b.prePageID="PC-M-PAY-PRI-L",b.prePageName="支付页-下载特权-套餐列表页"):new RegExp("/pay/payQr.html\\?type=1").test(a)?(b.prePageID="PC-M-PAY-PRI-QR",b.prePageName="支付页-下载特权-支付页"):new RegExp("/pay/success").test(a)?(b.prePageID="PC-M-PAY-SUC",b.prePageName="支付成功页"):new RegExp("/pay/fail").test(a)?(b.prePageID="PC-M-PAY-FAIL",b.prePageName="支付失败页"):new RegExp("/node/f/downsucc.html").test(a)?/unloginFlag=1/.test(a)?(b.prePageID="PC-M-FDPAY-SUC",b.prePageName="免登购买成功页"):(b.prePageID="PC-M-DOWN-SUC",b.prePageName="下载成功页"):new RegExp("/node/f/downfail.html").test(a)?(b.prePageID="PC-M-DOWN-FAIL",b.prePageName="下载失败页"):new RegExp("/search/home.html").test(a)?(b.prePageID="PC-M-SR",b.prePageName="搜索关键词"):new RegExp("/node/404.html").test(a)?(b.prePageID="PC-M-404",b.prePageName="404错误页"):new RegExp("/node/503.html").test(a)?(b.prePageID="PC-M-500",b.prePageName="500错误页"):new RegExp("/node/personalCenter/home.html").test(a)?(b.prePageID="PC-M-USER",b.prePageName="个人中心-首页"):new RegExp("/node/personalCenter/myuploads.html").test(a)?(b.prePageID="PC-M-USER-MU",b.prePageName="个人中心-我的上传页"):new RegExp("/node/personalCenter/mycollection.html").test(a)?(b.prePageID="PC-M-USER-CL",b.prePageName="个人中心-我的收藏页"):new RegExp("/node/personalCenter/mydownloads.html").test(a)?(b.prePageID="PC-M-USER-MD",b.prePageName="个人中心-我的下载页"):new RegExp("/node/personalCenter/vip.html").test(a)?(b.prePageID="PC-M-USER-VIP",b.prePageName="个人中心-我的VIP"):new RegExp("/node/personalCenter/mycoupon.html").test(a)?(b.prePageID="PC-M-USER-MS",b.prePageName="个人中心-我的优惠券页"):new RegExp("/node/personalCenter/accountsecurity.html").test(a)?(b.prePageID="PC-M-USER-ATM",b.prePageName="个人中心-账号与安全页"):new RegExp("/node/personalCenter/personalinformation.html").test(a)?(b.prePageID="PC-M-USER-ATF",b.prePageName="个人中心-个人信息页"):new RegExp("/node/personalCenter/myorder.html").test(a)&&(b.prePageID="PC-M-USER-ORD",
b.prePageName="个人中心-我的订单");else{var c=$(".ip-page-statusCode");"404"==c?(b.prePageID="PC-M-404",b.prePageName="资料被删除"):"302"==c?(b.prePageID="PC-M-FSM",b.prePageName="资料私有"):(b.prePageID="PC-M-FD",b.prePageName="资料详情页")}}function f(){$.getScript("//ipip.iask.cn/iplookup/search?format=js",function(a,b){"success"===b?(x.setCookieWithExp("ip",remote_ip_info.ip,3e5,"/"),F.ip=remote_ip_info.ip):console.error("ipip获取ip信息error")})}function g(){var a="";return-1!=window.navigator.userAgent.indexOf("Windows NT 10.0")?a="Windows 10":-1!=window.navigator.userAgent.indexOf("Windows NT 6.2")?a="Windows 8":-1!=window.navigator.userAgent.indexOf("Windows NT 6.1")?a="Windows 7":-1!=window.navigator.userAgent.indexOf("Windows NT 6.0")?a="Windows Vista":-1!=window.navigator.userAgent.indexOf("Windows NT 5.1")?a="Windows XP":-1!=window.navigator.userAgent.indexOf("Windows NT 5.0")?a="Windows 2000":-1!=window.navigator.userAgent.indexOf("Mac")?a="Mac/iOS":-1!=window.navigator.userAgent.indexOf("X11")?a="UNIX":-1!=window.navigator.userAgent.indexOf("Linux")&&(a="Linux"),a}function h(a){setTimeout(function(){console.log(a,"页面上报"),$.getJSON("https://dw.iask.com.cn/ishare/jsonp?data="+v.encode(JSON.stringify(a))+"&jsoncallback=?",function(a){console.log(a)})})}function i(a,b){var c=a;if(a&&b){for(var d in a)if("var"===d)for(var e in b)c["var"][e]=b[e];else b[d]&&(c[d]=b[d]);console.log("埋点参数:",c),h(c)}}function j(){var a=JSON.parse(JSON.stringify(F));e(document.referrer,a);var b={channel:""},c=x.getCookie("bc");c&&(b.channel=c),a.eventType="page",a.eventID="NE001",a.eventName="normalPageView",a.pageID=$("#ip-page-id").val()||"",a.pageName=$("#ip-page-name").val()||"",a.pageURL=window.location.href;var d=t(),f=u(d);$.extend(b,{source:f,searchEngine:d}),i(a,b)}function k(){var a={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePrice:window.pageConfig.params.moneyPrice,fileCouponCount:window.pageConfig.params.file_volume,filePayType:z[window.pageConfig.params.file_state],fileFormat:window.pageConfig.params.file_format,fileProduceType:window.pageConfig&&window.pageConfig.params?window.pageConfig.params.fsource:"",fileCooType:"",fileUploaderID:window.pageConfig.params.file_uid},b=window.pageConfig&&window.pageConfig.params?window.pageConfig.params.is360:"";/https?\:\/\/[^\s]*so.com.*$/g.test(document.referrer)&&!/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&"true"==b&&(a.fileCooType="360onebox",x.setCookieWithExp("bc","360onebox",18e5,"/")),/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&(a.fileCooType="360wenku",x.setCookieWithExp("bc","360wenku",18e5,"/")),/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(document.referrer)&&(a.fileCooType="360wenku",x.setCookieWithExp("bc","360wenku",18e5,"/"));var c=JSON.parse(JSON.stringify(F));e(document.referrer,c),c.eventType="page",c.eventID="SE002",c.eventName="fileDetailPageView",c.pageID=$("#ip-page-id").val()||"",c.pageName=$("#ip-page-name").val()||"",c.pageURL=window.location.href,x.setCookieWithExp("bf",JSON.stringify(a),18e5,"/"),i(c,a)}function l(a){var b=JSON.parse(JSON.stringify(F));if(e(document.referrer,b),b.eventType="page",b.eventID="SE009",b.eventName="payFileResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,a.fileID||(a.fileID=x.getParam("fid")||$("#ip-page-fid").val()),!a.filePayType){var c=$("#ip-page-fstate").val()||1;a.filePayType=z[c]}i(b,a)}function m(a){var b=JSON.parse(JSON.stringify(F));e(document.referrer,b),b.eventType="page",b.eventID="SE011",b.eventName="payVipResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,a.orderID||(a.orderID=x.getParam("orderNo")||""),i(b,a)}function n(a){var b=JSON.parse(JSON.stringify(F));e(document.referrer,b),b.eventType="page",b.eventID="SE013",b.eventName="payPrivilegeResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,i(b,a)}function o(a){var b=JSON.parse(JSON.stringify(F));e(document.referrer,b),b.eventType="page",b.eventID="SE014",b.eventName="downResult",b.pageID=$("#ip-page-id").val()||"",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,i(b,a)}function p(a){var b=JSON.parse(JSON.stringify(F));b.eventType="page",b.eventID="SE015",b.eventName="searchPageView",e(document.referrer,b),b.pageID="PC-M-SR",b.pageName=$("#ip-page-name").val()||"",b.pageURL=window.location.href,i(b,a)}function q(a,b){for(var c in b)a[c]&&(b[c]=a[c])}function r(a,b,c,d,f){var g=JSON.parse(JSON.stringify(F));e(document.referrer,g),g.eventType="click",g.eventID=a,g.eventName=b,g.pageID=$("#ip-page-id").val(),g.pageName=$("#ip-page-name").val(),g.pageURL=window.location.href,g.domID=c,g.domName=d,g.domURL=window.location.href,i(g,f)}function s(a,b,c){var d=$("#ip-page-type").val();if("pindex"==d){var e={fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:""},f=x.getCookie("bf");if(f&&q(JSON.parse(f),e),"fileDetailUpDown"==a||"fileDetailMiddleDown"==a||"fileDetailBottomDown"==a)e.downType="","fileDetailUpDown"==a?r("SE003","fileDetailDownClick","fileDetailUpDown","资料详情页顶部立即下载",e):"fileDetailMiddleDown"==a?r("SE003","fileDetailDownClick","fileDetailMiddleDown","资料详情页中部立即下载",e):"fileDetailBottomDown"==a&&r("SE003","fileDetailDownClick","fileDetailBottomDown","资料详情页底部立即下载",e),delete e.downType;else if("fileDetailUpBuy"==a)r("SE004","fileDetailBuyClick","fileDetailUpBuy","资料详情页顶部立即购买",e);else if("fileDetailMiddleBuy"==a)r("SE004","fileDetailBuyClick","fileDetailMiddleBuy","资料详情页中部立即购买",e);else if("fileDetailBottomBuy"==a)r("SE004","fileDetailBuyClick","fileDetailBottomBuy","资料详情页底部立即购买",e);else if("fileDetailMiddleOpenVip8"==a)r("SE005","fileDetailOpenVipClick","fileDetailMiddleOpenVip8","资料详情页中部开通vip，8折购买",e);else if("fileDetailBottomOpenVip8"==a)r("SE005","fileDetailOpenVipClick","fileDetailBottomOpenVip8","资料详情页底部开通vip，8折购买",e);else if("fileDetailMiddleOpenVipPr"==a)r("SE005","fileDetailOpenVipClick","fileDetailMiddleOpenVipPr","资料详情页中部开通vip，享更多特权",e);else if("fileDetailBottomOpenVipPr"==a)r("SE005","fileDetailOpenVipClick","fileDetailBottomOpenVipPr","资料详情页底部开通vip，享更多特权",e);else if("fileDetailComment"==a)r("SE006","fileDetailCommentClick","fileDetailComment","资料详情页评论",e);else if("fileDetailScore"==a){var g=b.find(".on:last").text();e.fileScore=g?g:"",r("SE007","fileDetailScoreClick","fileDetailScore","资料详情页评分",e),delete e.fileScore}}if("payFile"==a){var e={orderID:x.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",filePrice:"",fileSalePrice:""},f=x.getCookie("bf");f&&q(JSON.parse(f),e),r("SE008","payFileClick","payFile","支付页-付费资料-立即支付",e)}else if("payVip"==a){var e={orderID:x.getParam("orderNo")||"",vipID:$(".ui-tab-nav-item.active").data("vid"),vipName:$(".ui-tab-nav-item.active p.vip-time").text()||"",vipPrice:$(".ui-tab-nav-item.active p.vip-price strong").text()||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||""};r("SE010","payVipClick","payVip","支付页-VIP-立即支付",e)}else if("payPrivilege"==a){var e={orderID:x.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",privilegeName:$(".ui-tab-nav-item.active p.privilege-price").text()||"",privilegePrice:$(".ui-tab-nav-item.active").data("activeprice")||"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:""},f=x.getCookie("bf");f&&q(JSON.parse(f),e),r("SE012","payPrivilegeClick","payPrivilege","支付页-下载特权-立即支付",e)}else"searchResult"==a&&(e={fileID:b.attr("data-fileId"),fileName:b.attr("data-fileName"),keyWords:$("#scondition").val()},r("SE016","normalClick","searchResultClick","搜索结果页点击",e));var e={phone:$("#ip-mobile").val()||"",vipStatus:$("#ip-isVip").val()||"",channel:"",cashBalance:"",integralNumber:"",idolNumber:"",fileCategoryID:"",fileCategoryName:""};G&&(e.vipStatus=G.isVip||"",e.phone=G.tel||"");var h=x.getCookie("bc");h&&(e.channel=h),"paySuccessBacDown"==a?r("NE002","normalClick","paySuccessBacDown","支付成功页-返回下载",e):"paySuccessOpenVip"==a?r("NE002","normalClick","paySuccessOpenVip","支付成功页-开通VIP",e):"downSuccessOpenVip"==a?r("NE002","normalClick","downSuccessOpenVip","下载成功页-开通VIP",e):"downSuccessContinueVip"==a?r("NE002","normalClick","downSuccessContinueVip","下载成功页-续费VIP",e):"downSuccessBacDetail"==a?r("NE002","normalClick","downSuccessBacDetail","下载成功页-返回详情页",e):"downSuccessBindPhone"==a?r("NE002","normalClick","downSuccessBindPhone","下载成功页-立即绑定",e):"viewExposure"==a?(e.moduleID=c,r("SE006","modelView","","",e)):"similarFileClick"==a?(e={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePayType:z[window.pageConfig.params.file_state]},r("SE017","fileListNormalClick","similarFileClick","资料列表常规点击",e)):"underSimilarFileClick"==a?r("SE017","fileListNormalClick","underSimilarFileClick","点击底部猜你喜欢内容时",e):"downSucSimilarFileClick"==a?r("SE017","fileListNormalClick","downSucSimilarFileClick","下载成功页猜你喜欢内容时",e):"markFileClick"==a?(e={fileID:window.pageConfig.params.g_fileId,fileName:window.pageConfig.params.file_title,fileCategoryID:window.pageConfig.params.classid1+"||"+window.pageConfig.params.classid2+"||"+window.pageConfig.params.classid3,fileCategoryName:window.pageConfig.params.classidName1+"||"+window.pageConfig.params.classidName2+"||"+window.pageConfig.params.classidName3,filePayType:z[window.pageConfig.params.file_state],markRusult:1},r("SE019","markClick","markFileClick","资料收藏点击",e)):"vipRights"==a?r("NE002","normalClick","vipRights","侧边栏-vip权益",e):"seen"==a?r("NE002","normalClick","seen","侧边栏-我看过的",e):"mark"==a?r("NE002","normalClick","mark","侧边栏-我的收藏",e):"customerService"==a?r("NE002","normalClick","customerService","侧边栏-联系客服",e):"downApp"==a?r("NE002","normalClick","downApp","侧边栏-下载APP",e):"follow"==a&&r("NE002","normalClick","follow","侧边栏-关注领奖",e)}function t(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*google.com.*$/g.test(a)?b="google":/https?\:\/\/[^\s]*bing.com.*$/g.test(a)&&(b="bing"),b}function u(a){var b=document.referrer,c=location.origin,d="";return d=a?"searchEngine":b&&-1!==b.indexOf(c)?"vist":"outLink"}var v=a("base64").Base64,w=a("dist/cmd-lib/util"),x=a("dist/application/method"),y=a("dist/report/config"),z=["","free","","online","vipOnly","cost"],A=x.getCookie("ip")||f(),B=x.getCookie("cid");B||(B=(new Date).getTime()+""+Math.random(),x.setCookieWithExp("cid",B,2592e6,"/"));var C=(new Date).getTime()+""+Math.random(),D=18e5,E=sessionStorage.getItem("sessionID")||"";E||d(),C-E>D&&d();var F={eventType:"",eventID:"",eventName:"",eventTime:String((new Date).getTime()),reportTime:String((new Date).getTime()),sdkVersion:"V1.0.3",terminalType:"0",loginStatus:x.getCookie("cuk")?1:0,visitID:x.getCookie("gr_user_id")||"",userID:"",sessionID:sessionStorage.getItem("sessionID")||B||"",productName:"ishare",productCode:"0",productVer:"V4.5.0",pageID:"",pageName:"",pageURL:"",ip:A||"",resolution:document.documentElement.clientWidth+"*"+document.documentElement.clientHeight,browserVer:w.getBrowserInfo(navigator.userAgent),osType:g(),moduleID:"",moduleName:"",appChannel:"",prePageID:"",prePageName:"",prePageURL:document.referrer,domID:"",domName:"",domURL:"",location:"",deviceID:"",deviceBrand:"",deviceModel:"",deviceLanguage:navigator.language,mac:"",osVer:"",networkType:"",networkProvider:"","var":{}},G=x.getCookie("ui");G&&(G=JSON.parse(G),F.userID=G.uid||""),e(document.referrer,F),$(function(){setTimeout(function(){var a=$("#ip-page-id").val();"PC-M-FD"==a&&k(),"PC-O-SR"!=a&&j();var b={payResult:1,orderID:x.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",vipID:"",vipName:"",vipPrice:""},c={payResult:1,orderID:x.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",privilegeID:"",privilegeName:"",privilegePrice:""},d={payResult:1,orderID:x.getParam("orderNo")||"",couponID:$(".pay-coupon-wrap").attr("vid")||"",coupon:$(".pay-coupon-wrap p.chose-ele").text()||"",orderPayType:"",orderPayPrice:"",fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:"",fileFormat:"",fileProduceType:"",fileCooType:"",fileUploaderID:"",filePrice:"",fileSalePrice:""},e=x.getCookie("bf"),f=x.getCookie("br"),g=window.location.href;if("PC-M-PAY-SUC"==a||"PC-O-PAY-SUC"==a){if(g.indexOf("type=0")>-1)f&&q(JSON.parse(f),b),m(b);else if(g.indexOf("type=1")>-1)e&&q(JSON.parse(e),c),f&&q(JSON.parse(f),c),n(c);else if(g.indexOf("type=2")>-1){e&&q(JSON.parse(e),d);var f=x.getCookie("br");f&&q(JSON.parse(f),d),l(d)}}else("PC-M-PAY-FAIL"==a||"PC-O-PAY-FAIL"==a)&&(g.indexOf("type=0")>-1?(f&&q(JSON.parse(f),b),b.payResult=0,m(b)):g.indexOf("type=1")>-1?(e&&q(JSON.parse(e),c),f&&q(JSON.parse(f),c),c.payResult=0,n(c)):g.indexOf("type=2")>-1&&(e&&q(JSON.parse(e),d),f&&q(JSON.parse(f),d),d.payResult=0,l(d)));var h={downResult:1,fileID:"",fileName:"",fileCategoryID:"",fileCategoryName:"",filePayType:""};if("PC-M-DOWN-SUC"==a){var e=x.getCookie("bf");e&&q(JSON.parse(e),h),h.downResult=1,o(h)}else if("PC-M-DOWN-FAIL"==a){var e=x.getCookie("bf");e&&q(JSON.parse(e),h),h.downResult=0,o(h)}},1e3)}),$(document).delegate("."+y.EVENT_NAME,"click",function(a){var b=$(this),c=b.attr(y.BILOG_CONTENT_NAME);console.log("cnt:",c),c&&setTimeout(function(){s(c,b)})}),c.exports={clickEvent:function(a){var b=a.attr(y.BILOG_CONTENT_NAME);console.log("cnt-导出的:",b),b&&setTimeout(function(){s(b,a)})},viewExposure:function(a,b){var c="viewExposure";c&&setTimeout(function(){s(c,a,b)})},searchResult:p}}),define("dist/cmd-lib/util",[],function(a,b,c){var d={throttle:function(a,b){var c,d;return function(e){var f=this,g=arguments,h=+new Date;c&&c+b>h?(clearTimeout(d),d=setTimeout(function(){c=h,a.apply(f,g)},b)):(c=h,a.apply(f,g))}},debounce:function(a,b){var c=0,d=this;return function(e){c&&clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},isWeChatBrow:function(){var a=navigator.userAgent.toLowerCase(),b=-1!=a.indexOf("micromessenger");return b?!0:!1},getWebAppUA:function(){var a=0,b=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(b)?a=1:/android/.test(b)&&(a=0),a},validateIE8:function(){return!$.browser.msie||"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},validateIE9:function(){return!$.browser.msie||"9.0"!=$.browser.version&&"8.0"!=$.browser.version&&"7.0"!=$.browser.version&&"6.0"!=$.browser.version?!1:!0},getReferrer:function(){var a=document.referrer,b="";return/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},getPageRef:function(a){var b=this,c=0;return(b.is360cookie(a)||b.is360cookie("360"))&&(c=1),b.is360wkCookie()&&(c=3),c},is360cookie:function(a){var b=this,c=b.getCookie("_r_so");if(c)for(var d=c.split("_"),e=0;e<d.length;e++)if(d[e]==a)return!0;return!1},add360wkCookie:function(){this.setCookieWithExpPath("_360hz","1",18e5,"/")},is360wkCookie:function(){return null==getCookie("_360hz")?!1:!0},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null},setCookieWithExpPath:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c),document.cookie=a+"="+escape(b)+";path="+d+";expires="+e.toGMTString()},findRefer:function(){var a=document.referrer,b="other";return/https?\:\/\/[^\s]*\/f\/.*$/g.test(a)?b="pindex":/https?\:\/\/[^\s]*\/d\/.*$/g.test(a)?b="landing":/https?\:\/\/[^\s]*\/c\/.*$/g.test(a)?b="pcat":/https?\:\/\/[^\s]*\/search\/.*$/g.test(a)?b="psearch":/https?\:\/\/[^\s]*\/t\/.*$/g.test(a)?b="ptag":/https?\:\/\/[^\s]*\/[u|n]\/.*$/g.test(a)?b="popenuser":/https?\:\/\/[^\s]*\/ucenter\/.*$/g.test(a)?b="puser":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.$/g.test(a)?b="ishareindex":/https?\:\/\/[^\s]*\/theme\/.*$/g.test(a)?b="theme":/https?\:\/\/[^\s]*wenku.so.com.*$/g.test(a)?b="360wenku":/https?\:\/\/[^\s]*so.com.*$/g.test(a)?b="360":/https?\:\/\/[^\s]*baidu.com.*$/g.test(a)?b="baidu":/https?\:\/\/[^\s]*sogou.com.*$/g.test(a)?b="sogou":/https?\:\/\/[^\s]*sm.cn.*$/g.test(a)?b="sm":/https?\:\/\/[^\s]*ishare.iask.sina.com.cn.*$/g.test(a)?b="ishare":/https?\:\/\/[^\s]*iask.sina.com.cn.*$/g.test(a)&&(b="iask"),b},showAlertDialog:function(a,b,c){var d=$(".common-bgMask"),e=$(".common-dialog");e.find("h2[name='title']").text(a),e.find("span[name='content']").html(b),e.find("a.close,a.btn-dialog").unbind("click").click(function(){d.hide(),e.hide(),c&&!$(this).hasClass("close")&&c()}),d.show(),e.show()},browserVersion:function(a){var b=a.indexOf("Opera")>-1,c=a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b,d=a.indexOf("Edge")>-1,e=a.indexOf("Firefox")>-1,f=a.indexOf("Safari")>-1&&-1===a.indexOf("Chrome"),g=a.indexOf("Chrome")>-1&&a.indexOf("Safari")>-1;if(c){var h=new RegExp("MSIE (\\d+\\.\\d+);");h.test(a);var i=parseFloat(RegExp.$1);return 7===i?"IE7":8===i?"IE8":9===i?"IE9":10===i?"IE10":11===i?"IE11":12===i?"IE12":"IE"}return b?"Opera":d?"Edge":e?"Firefox":f?"Safari":g?"Chrome":"unKnow"},getBrowserInfo:function(a){var b={},c=a.toLowerCase(),d=/(msie|firefox|chrome|opera|version|trident).*?([\d.]+)/,e=c.match(d);return e&&e.length>=2?(b.browser=e[1].replace(/version/,"'safari")||"unknow",b.ver=e[2]||"1.0.0"):(b.browser="unknow",b.ver="1.0.0"),b.browser+"/"+b.ver},timeFormat:function(a,b){if(!b)return"";var c=new Date(b),d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate(),g=c.getHours(),h=c.getMinutes(),i=c.getSeconds();return 10>e&&(e+="0"),10>f&&(f+="0"),10>g&&(g+="0"),10>h&&(h+="0"),10>i&&(i+="0"),"yyyy-mm-dd"===a?d+"-"+e+"-"+f:d+"-"+e+"-"+f+" "+g+":"+h+":"+i}};c.exports=d}),define("dist/report/config",[],function(a,b,c){return{COOKIE_FLAG:"_dplf",COOKIE_CIDE:"_dpcid",COOKIE_CUK:"cuk",COOKIE_TIMEOUT:3e6,SERVER_URL:"/",UACTION_URL:"/uAction",EVENT_NAME:"pc_click",CONTENT_NAME:"pcTrackContent",BILOG_CONTENT_NAME:"bilogContent",ishareTrackEvent:"_ishareTrackEvent",eventCookieFlag:"_eventCookieFlag",EVENT_REPORT:!1,AUTO_PV:!1}}),define("dist/application/effect",["dist/application/checkLogin","dist/application/api","dist/application/method","dist/application/method"],function(a,b,c){function d(a,b,c){!f.getCookie("cuk")&&b?e.notifyLoginInterface(function(b){a&&a(b),c&&c(),i(b)}):f.getCookie("cuk")&&e.getLoginData(function(b){a&&a(b),i(b)})}var e=a("dist/application/checkLogin"),f=a("dist/application/method");$("#unLogin").on("click",function(){e.notifyLoginInterface(function(a){i(a)})}),$(".login-text").on("click",function(){e.notifyLoginInterface(function(a){i(a)})}),$(".js-sync").on("click",function(){e.syncUserInfoInterface(function(a){i(a)})}),$(".btn-exit").on("click",function(){e.ishareLogout()}),$(".js-buy-open").click(function(){"vip"==$(this).attr("data-type")&&(location.href="/pay/vip.html")}),$(".vip-join-con").click(function(){f.compatibleIESkip("/node/rights/vip.html",!0)}),$(".btn-new-search").click(function(){var a=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder");a&&f.compatibleIESkip("/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(a)),!0)}),$(".new-input").on("keydown",function(a){if(13===a.keyCode){var b=$(".new-input").val()?$(".new-input").val().replace(/^\s+|\s+$/gm,""):$(".new-input").attr("placeholder");b&&f.compatibleIESkip("/search/home.html?ft=all&cond="+encodeURIComponent(encodeURIComponent(b)),!0)}});var g=$(".new-detail-header"),h=g.height();$(window).scroll(function(){var a=$(this).scrollTop();a-h>=0?g.addClass("new-detail-header-fix"):g.removeClass("new-detail-header-fix")});var i=function(a){var b=$("#unLogin"),c=$("#haveLogin"),d=$(".btn-user-more"),e=$(".vip-status"),g=($(".icon-iShare"),$(".top-user-more"));d.text(1==a.isVip?"续费":"开通");var h=null;"6"===f.getCookie("file_state")&&$(".vip-title").eq(0).show(),1==a.isVip?(h=e.find('p[data-type="2"]'),h.find(".expire_time").html(a.expireTime),h.show().siblings().hide(),g.addClass("top-vip-more"),$(".isVip-show").find("span").html(a.expireTime),$(".isVip-show").removeClass("hide")):1==a.userType?(h=e.find('p[data-type="3"]'),c.removeClass("user-con-vip"),h.show().siblings().hide()):0==a.isVip?c.removeClass("user-con-vip"):2==a.isVip&&$(".vip-title").hide(),b.hide(),c.find(".user-link .user-name").html(a.nickName),c.find(".user-link img").attr("src",a.weiboImage),c.find(".top-user-more .name").html(a.nickName),c.find(".top-user-more img").attr("src",a.weiboImage),c.show(),window.pageConfig.params.isVip=a.isVip;var i=a.fileDiscount;i?i/=100:i=.8,window.pageConfig.params.fileDiscount=i,$("#ip-uid").val(a.userId),$("#ip-isVip").val(a.isVip),$("#ip-mobile").val(a.mobile)};return{refreshTopBar:i,isLogin:d}}),define("dist/application/helper",[],function(a,b,c){template.helper("encodeValue",function(a){return encodeURIComponent(encodeURIComponent(a))})}),define("dist/common/gioPageSet",[],function(a,b,c){c.exports={gioPageSet:function(a){var b=document.referrer,c=window.location.href,d=null,e=null,f={home:new RegExp("ishare.iask.sina.com.cn/").test(b),homeCurrent:new RegExp("ishare.iask.sina.com.cn/").test(c),ishareindex:"ishareindex",f:new RegExp("ishare.iask.sina.com.cn/f/").test(b),fCurrent:new RegExp("ishare.iask.sina.com.cn/f/").test(c),pindex:"pindex",c:new RegExp("ishare.iask.sina.com.cn/c/").test(b),cCurrent:new RegExp("ishare.iask.sina.com.cn/c/").test(c),pcat:"pcat",search:new RegExp("ishare.iask.sina.com.cn/search/").test(b),searchCurrent:new RegExp("ishare.iask.sina.com.cn/search/").test(c),psearch:"psearch",ucenter:new RegExp("ishare.iask.sina.com.cn/ucenter/").test(b),ucenterCurrent:new RegExp("ishare.iask.sina.com.cn/ucenter/").test(c),puser:"puser",t:new RegExp("ishare.iask.sina.com.cn/t/").test(b),tCurrent:new RegExp("ishare.iask.sina.com.cn/t/").test(c),ptag:"ptag",d:new RegExp("ishare.iask.sina.com.cn/d/").test(b),dCurrent:new RegExp("ishare.iask.sina.com.cn/d/").test(c),landing:"landing",themeindex:new RegExp("ishare.iask.sina.com.cn/theme").test(b),themeindexCurrent:new RegExp("ishare.iask.sina.com.cn/theme").test(c),theme:"theme",u:new RegExp("ishare.iask.sina.com.cn/u/").test(b),uCurrent:new RegExp("ishare.iask.sina.com.cn/u/").test(c),n:new RegExp("ishare.iask.sina.com.cn/n/").test(b),nCurrent:new RegExp("ishare.iask.sina.com.cn/n/").test(c),popenuser:"popenuser"};d=f.search?f.psearch:f.themeindex?f.theme:f.d?f.landing:f.t?f.ptag:f.ucenter?f.puser:f.c?f.pcat:f.f?f.pindex:f.u||f.n?f.popenuser:f.home?f.ishareindex:"other",e=f.searchCurrent?f.psearch:f.themeindexCurrent?f.theme:f.dCurrent?f.landing:f.tCurrent?f.ptag:f.ucenterCurrent?f.puser:f.cCurrent?f.pcat:f.fCurrent?f.pindex:f.uCurrent||f.nCurrent?f.popenuser:f.homeCurrent?f.ishareindex:"other";var g={currentUrl_pvar:decodeURIComponent(decodeURIComponent(c)),sourcePage_pvar:d,currentPageType_pvar:e};for(var h in a)g[h]=a[h];__pc__.gioPage(g)}}});